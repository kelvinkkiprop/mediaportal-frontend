import{a as Je}from"./chunk-47TLDLVH.js";import{b as qe,c as Y,e as _,f as J,g as K,h as Ue,i as ke,k as Q,m as X,n as Z,o as de,p as pe,q as ue,r as ce,s as Ae,t as Re}from"./chunk-YIOSBDZK.js";import{h as $,j as te}from"./chunk-BHYX23KN.js";import{c as N,e as ee,h as Be}from"./chunk-5QGQO723.js";import{$ as C,Aa as Ie,B as he,Bb as ne,G as I,Ga as we,H as w,Ha as a,Ia as f,Ja as be,La as O,Ma as M,Na as P,Qa as v,Ra as Te,Sa as ze,Ua as le,V as Fe,Va as ae,X as l,Xa as Oe,ba as U,ca as oe,fa as p,fb as j,gb as D,hb as H,ia as ye,ib as Me,ja as m,kb as me,oa as o,pa as r,qa as g,rb as Pe,ta as k,va as T,vb as Ne,wa as c,xb as se,y as Ee,yb as G,z as re,za as z}from"./chunk-KOGPXGXW.js";import{f as Ye}from"./chunk-GAL4ENT6.js";var A=class i{constructor(n,e){this.mAppContextService=n;this.http=e}allItems(){let n=`${N.base_url}/users`;return this.http.get(n,this.mAppContextService.getHttpOptions())}createItem(n){let e=`${N.base_url}/users`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}getOneItem(n){let e=`${N.base_url}/users/${n}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(n){let e=`${N.base_url}/users/${n.id}`;return this.http.put(e,n,this.mAppContextService.getHttpOptions())}deleteItem(n){let e=`${N.base_url}/users/${n.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(n){return this.http.get(n,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let n=`${N.base_url}/unpaginated-items-users`;return this.http.get(n,this.mAppContextService.getHttpOptions())}searchItems(n){let e=`${N.base_url}/search-users`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}filterOrganizations(n){let e=`${N.base_url}/filter-organizations/${n}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||i)(he(ee),he(Pe))};static \u0275prov=Ee({token:i,factory:i.\u0275fac,providedIn:"root"})};var R=i=>({"is-invalid":i});function Ke(i,n){i&1&&g(0,"app-progress")}function Qe(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Xe(i,n){if(i&1&&(o(0,"div",41),p(1,Qe,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("first_name"))==null||e.errors==null?null:e.errors.required)}}function Ze(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function et(i,n){if(i&1&&(o(0,"div",41),p(1,Ze,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("last_name"))==null||e.errors==null?null:e.errors.required)}}function tt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function it(i,n){i&1&&(o(0,"div"),a(1,"Enter a valid email address."),r())}function nt(i,n){if(i&1&&(o(0,"div",41),p(1,tt,2,0,"div",0)(2,it,2,0,"div",0),r()),i&2){let e,t,s=c();l(),m("ngIf",(e=s.itemForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(t=s.itemForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function rt(i,n){if(i&1&&(o(0,"option",42),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function ot(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function lt(i,n){if(i&1&&(o(0,"div",43),p(1,ot,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("role_id"))==null||e.errors==null?null:e.errors.required)}}function at(i,n){if(i&1&&(o(0,"option",42),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function mt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function st(i,n){if(i&1&&(o(0,"div",43),p(1,mt,2,0,"div",0),r()),i&2){let e,t=c(2);l(),m("ngIf",(e=t.itemForm.get("organization_category_id"))==null||e.errors==null?null:e.errors.required)}}function dt(i,n){if(i&1&&(o(0,"option",42),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function pt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function ut(i,n){if(i&1&&(o(0,"div",43),p(1,pt,2,0,"div",0),r()),i&2){let e,t=c(2);l(),m("ngIf",(e=t.itemForm.get("organization_id"))==null||e.errors==null?null:e.errors.required)}}function ct(i,n){if(i&1){let e=k();o(0,"div",3)(1,"div",20)(2,"div",21)(3,"label",44),a(4,"Organization category:"),r(),o(5,"select",45),T("change",function(s){I(e);let d=c();return w(d.onOrganizationChange(s.target))}),o(6,"option",31),a(7,"--- Select category ---"),r(),p(8,at,2,2,"option",32),r(),p(9,st,2,1,"div",33),r()(),o(10,"div",20)(11,"div",21)(12,"label",46),a(13,"Organization:"),r(),o(14,"select",47)(15,"option",31),a(16,"--- Select organization ---"),r(),p(17,dt,2,2,"option",32),r(),p(18,ut,2,1,"div",33),r()()()}if(i&2){let e,t,s,d,u=c();l(5),m("ngClass",v(6,R,((e=u.itemForm.get("organization_category_id"))==null?null:e.invalid)&&(((e=u.itemForm.get("organization_category_id"))==null?null:e.dirty)||((e=u.itemForm.get("organization_category_id"))==null?null:e.touched)))),l(3),m("ngForOf",u.mOrganizationCategories),l(),m("ngIf",((t=u.itemForm.get("organization_category_id"))==null?null:t.invalid)&&(((t=u.itemForm.get("organization_category_id"))==null?null:t.dirty)||((t=u.itemForm.get("organization_category_id"))==null?null:t.touched))),l(5),m("ngClass",v(8,R,((s=u.itemForm.get("organization_id"))==null?null:s.invalid)&&(((s=u.itemForm.get("organization_id"))==null?null:s.dirty)||((s=u.itemForm.get("organization_id"))==null?null:s.touched)))),l(3),m("ngForOf",u.mOrganizations),l(),m("ngIf",((d=u.itemForm.get("organization_id"))==null?null:d.invalid)&&(((d=u.itemForm.get("organization_id"))==null?null:d.dirty)||((d=u.itemForm.get("organization_id"))==null?null:d.touched)))}}function _t(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function gt(i,n){i&1&&(o(0,"div"),a(1,"Password must be at least 6 characters long."),r())}function vt(i,n){if(i&1&&(o(0,"div",41),p(1,_t,2,0,"div",0)(2,gt,2,0,"div",0),r()),i&2){let e,t,s=c();l(),m("ngIf",(e=s.itemForm.get("password"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(t=s.itemForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}var _e=class i{constructor(n,e,t,s,d){this.mToastrService=n;this.mUserService=e;this.mAppContextService=t;this.router=s;this.fb=d;this.itemForm=this.fb.group({first_name:["",_.required],last_name:["",_.required],email:["",[_.required,_.email]],role_id:["",_.required],organization_category_id:["",_.nullValidator],organization_id:["",_.nullValidator],password:["",[_.required,_.minLength(6)]]})}itemForm;mProgress=!1;mRoles;mOrganizationCategories;mOrganizations;ngOnInit(){this.index()}onSubmit(n){this.mProgress=!0,this.mUserService.createItem(n).subscribe({next:e=>{e.status==="success"?(this.mToastrService.success(e.message),this.router.navigateByUrl("/users"),this.mProgress=!1):(this.mToastrService.error(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}index(){this.mProgress=!0,this.mUserService.unpaginatedItems().subscribe({next:n=>{n&&(this.mRoles=n.data.roles,this.mOrganizationCategories=n.data.organization_categories,this.mOrganizations=n.data.organizations,this.mProgress=!1)},error:n=>{n.error.message&&this.mToastrService.error(n.error.message),this.mProgress=!1}})}onOrganizationChange(n){let e=n.value;this.filterConstituencies(e),this.mOrganizations=[]}filterConstituencies(n){this.mProgress=!0,this.mUserService.filterOrganizations(n).subscribe({next:e=>{e&&(this.mOrganizations=e,this.mProgress=!1)},error:e=>{this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(C($),C(A),C(ee),C(se),C(ce))};static \u0275cmp=U({type:i,selectors:[["app-create"]],standalone:!1,decls:68,vars:25,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],[1,"mb-3"],["for","first_name",1,"form-label","required"],["type","text","formControlName","first_name",1,"form-control",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","last_name",1,"form-label","required"],["type","text","formControlName","last_name",1,"form-control",3,"ngClass"],["for","email",1,"form-label","required"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],["for","role_id",1,"form-label","required"],["formControlName","role_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-md-12"],["for","password",1,"form-label","required"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"text-end"],["routerLink","/users",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],["for","organization_category_id",1,"form-label","required"],["formControlName","organization_category_id",1,"form-select",3,"change","ngClass"],["for","organization_id",1,"form-label","required"],["formControlName","organization_id",1,"form-select",3,"ngClass"]],template:function(e,t){if(e&1&&(p(0,Ke,1,0,"app-progress",0),o(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),a(7,"Users"),r()(),o(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),a(12,"Home"),r()(),o(13,"li",9),a(14,"Users"),r(),o(15,"li",10),a(16,"Create"),r()()()()()(),o(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),a(24," Create User "),r(),g(25,"div",16),r(),o(26,"div",17)(27,"form",18),T("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),o(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),a(32,"First Name:"),r(),g(33,"input",23),p(34,Xe,2,1,"div",24),r()(),o(35,"div",20)(36,"div",21)(37,"label",25),a(38,"Last Name:"),r(),g(39,"input",26),p(40,et,2,1,"div",24),r()(),o(41,"div",20)(42,"div",21)(43,"label",27),a(44,"Email:"),r(),g(45,"input",28),p(46,nt,3,2,"div",24),r()(),o(47,"div",20)(48,"div",21)(49,"label",29),a(50,"Role:"),r(),o(51,"select",30)(52,"option",31),a(53,"--- Select role ---"),r(),p(54,rt,2,2,"option",32),r(),p(55,lt,2,1,"div",33),r()(),p(56,ct,19,10,"div",34),o(57,"div",35)(58,"div",21)(59,"label",36),a(60,"Password:"),r(),g(61,"input",37),p(62,vt,3,2,"div",24),r()()(),o(63,"div",38)(64,"a",39),a(65,"Cancel"),r(),o(66,"button",40),a(67,"Submit"),r()()()()()()()()()()),e&2){let s,d,u,h,y,b,S,x,E,F;m("ngIf",t.mProgress),l(27),m("formGroup",t.itemForm),l(6),m("ngClass",v(15,R,((s=t.itemForm.get("first_name"))==null?null:s.invalid)&&(((s=t.itemForm.get("first_name"))==null?null:s.dirty)||((s=t.itemForm.get("first_name"))==null?null:s.touched)))),l(),m("ngIf",((d=t.itemForm.get("first_name"))==null?null:d.invalid)&&(((d=t.itemForm.get("first_name"))==null?null:d.dirty)||((d=t.itemForm.get("first_name"))==null?null:d.touched))),l(5),m("ngClass",v(17,R,((u=t.itemForm.get("last_name"))==null?null:u.invalid)&&(((u=t.itemForm.get("last_name"))==null?null:u.dirty)||((u=t.itemForm.get("last_name"))==null?null:u.touched)))),l(),m("ngIf",((h=t.itemForm.get("last_name"))==null?null:h.invalid)&&(((h=t.itemForm.get("last_name"))==null?null:h.dirty)||((h=t.itemForm.get("last_name"))==null?null:h.touched))),l(5),m("ngClass",v(19,R,((y=t.itemForm.get("email"))==null?null:y.invalid)&&(((y=t.itemForm.get("email"))==null?null:y.dirty)||((y=t.itemForm.get("email"))==null?null:y.touched)))),l(),m("ngIf",((b=t.itemForm.get("email"))==null?null:b.invalid)&&(((b=t.itemForm.get("email"))==null?null:b.dirty)||((b=t.itemForm.get("email"))==null?null:b.touched))),l(5),m("ngClass",v(21,R,((S=t.itemForm.get("role_id"))==null?null:S.invalid)&&(((S=t.itemForm.get("role_id"))==null?null:S.dirty)||((S=t.itemForm.get("role_id"))==null?null:S.touched)))),l(3),m("ngForOf",t.mRoles),l(),m("ngIf",((x=t.itemForm.get("role_id"))==null?null:x.invalid)&&(((x=t.itemForm.get("role_id"))==null?null:x.dirty)||((x=t.itemForm.get("role_id"))==null?null:x.touched))),l(),m("ngIf",t.itemForm.get("role_id").value!=1),l(5),m("ngClass",v(23,R,((E=t.itemForm.get("password"))==null?null:E.invalid)&&(((E=t.itemForm.get("password"))==null?null:E.dirty)||((E=t.itemForm.get("password"))==null?null:E.touched)))),l(),m("ngIf",((F=t.itemForm.get("password"))==null?null:F.invalid)&&(((F=t.itemForm.get("password"))==null?null:F.dirty)||((F=t.itemForm.get("password"))==null?null:F.touched))),l(4),m("disabled",t.itemForm.invalid)}},dependencies:[j,D,H,G,Q,pe,ue,Y,de,J,K,X,Z,te],encapsulation:2})};var q=i=>({"is-invalid":i});function ft(i,n){i&1&&g(0,"app-progress")}function Ct(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function ht(i,n){if(i&1&&(o(0,"div",46),p(1,Ct,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("first_name"))==null||e.errors==null?null:e.errors.required)}}function yt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function bt(i,n){if(i&1&&(o(0,"div",46),p(1,yt,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("last_name"))==null||e.errors==null?null:e.errors.required)}}function St(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function xt(i,n){i&1&&(o(0,"div"),a(1,"Enter a valid email address."),r())}function Et(i,n){if(i&1&&(o(0,"div",46),p(1,St,2,0,"div",0)(2,xt,2,0,"div",0),r()),i&2){let e,t,s=c();l(),m("ngIf",(e=s.itemForm.get("email"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(t=s.itemForm.get("email"))==null||t.errors==null?null:t.errors.email)}}function Ft(i,n){if(i&1&&(o(0,"option",47),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function It(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function wt(i,n){if(i&1&&(o(0,"div",48),p(1,It,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("role_id"))==null||e.errors==null?null:e.errors.required)}}function Tt(i,n){if(i&1&&(o(0,"option",47),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function zt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Ot(i,n){if(i&1&&(o(0,"div",48),p(1,zt,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("status_id"))==null||e.errors==null?null:e.errors.required)}}function Mt(i,n){if(i&1&&(o(0,"option",47),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function Pt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Nt(i,n){if(i&1&&(o(0,"div",48),p(1,Pt,2,0,"div",0),r()),i&2){let e,t=c(2);l(),m("ngIf",(e=t.itemForm.get("organization_category_id"))==null||e.errors==null?null:e.errors.required)}}function qt(i,n){if(i&1&&(o(0,"option",47),a(1),r()),i&2){let e=n.$implicit;z("value",e.id),l(),f(e.name)}}function Ut(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function kt(i,n){if(i&1&&(o(0,"div",48),p(1,Ut,2,0,"div",0),r()),i&2){let e,t=c(2);l(),m("ngIf",(e=t.itemForm.get("organization_id"))==null||e.errors==null?null:e.errors.required)}}function At(i,n){if(i&1){let e=k();o(0,"div",3)(1,"div",20)(2,"div",21)(3,"label",49),a(4,"Organization category:"),r(),o(5,"select",50),P("ngModelChange",function(s){I(e);let d=c();return M(d.item.organization_category_id,s)||(d.item.organization_category_id=s),w(s)}),T("change",function(s){I(e);let d=c();return w(d.onOrganizationChange(s.target))}),o(6,"option",31),a(7,"--- Select category ---"),r(),p(8,Mt,2,2,"option",32),r(),p(9,Nt,2,1,"div",33),r()(),o(10,"div",20)(11,"div",21)(12,"label",51),a(13,"Organization:"),r(),o(14,"select",52),P("ngModelChange",function(s){I(e);let d=c();return M(d.item.organization_id,s)||(d.item.organization_id=s),w(s)}),o(15,"option",31),a(16,"--- Select organization ---"),r(),p(17,qt,2,2,"option",32),r(),p(18,kt,2,1,"div",33),r()()()}if(i&2){let e,t,s,d,u=c();l(5),O("ngModel",u.item.organization_category_id),m("ngClass",v(8,q,((e=u.itemForm.get("organization_category_id"))==null?null:e.invalid)&&(((e=u.itemForm.get("organization_category_id"))==null?null:e.dirty)||((e=u.itemForm.get("organization_category_id"))==null?null:e.touched)))),l(3),m("ngForOf",u.mOrganizationCategories),l(),m("ngIf",((t=u.itemForm.get("organization_category_id"))==null?null:t.invalid)&&(((t=u.itemForm.get("organization_category_id"))==null?null:t.dirty)||((t=u.itemForm.get("organization_category_id"))==null?null:t.touched))),l(5),O("ngModel",u.item.organization_id),m("ngClass",v(10,q,((s=u.itemForm.get("organization_id"))==null?null:s.invalid)&&(((s=u.itemForm.get("organization_id"))==null?null:s.dirty)||((s=u.itemForm.get("organization_id"))==null?null:s.touched)))),l(3),m("ngForOf",u.mOrganizations),l(),m("ngIf",((d=u.itemForm.get("organization_id"))==null?null:d.invalid)&&(((d=u.itemForm.get("organization_id"))==null?null:d.dirty)||((d=u.itemForm.get("organization_id"))==null?null:d.touched)))}}function Rt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Bt(i,n){i&1&&(o(0,"div"),a(1,"Password must be at least 6 characters long."),r())}function Vt(i,n){if(i&1&&(o(0,"div",46),p(1,Rt,2,0,"div",0)(2,Bt,2,0,"div",0),r()),i&2){let e,t,s=c();l(),m("ngIf",(e=s.itemForm.get("password"))==null||e.errors==null?null:e.errors.required),l(),m("ngIf",(t=s.itemForm.get("password"))==null||t.errors==null?null:t.errors.minlength)}}function Wt(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Lt(i,n){if(i&1&&(o(0,"div",46),p(1,Wt,2,0,"div",0),r()),i&2){let e,t=c();l(),m("ngIf",(e=t.itemForm.get("reset_password"))==null||e.errors==null?null:e.errors.required)}}var ge=class i{constructor(n,e,t,s,d,u){this.route=n;this.mUserService=e;this.router=t;this.mToastrService=s;this.mAppContextService=d;this.fb=u;this.itemForm=this.fb.group({first_name:["",_.required],last_name:["",_.required],email:["",[_.required,_.email]],role_id:["",_.required],status_id:["",_.required],organization_category_id:["",_.nullValidator],organization_id:["",_.nullValidator],password:["",[_.nullValidator,_.minLength(6)]],reset_password:[!1,_.nullValidator]})}itemForm;mProgress=!1;mRoles;mStatuses;mOrganizationCategories;mOrganizations;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mUserService.getOneItem(this.id).subscribe({next:n=>{n&&(this.item=n,this.mProgress=!1)},error:n=>{n.error.message&&this.mToastrService.error(n.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mUserService.unpaginatedItems().subscribe({next:n=>{n&&(this.mRoles=n.data.roles,this.mStatuses=n.data.statuses,this.mOrganizationCategories=n.data.organization_categories,this.mOrganizations=n.data.organizations,this.mProgress=!1)},error:n=>{n.error.message&&this.mToastrService.error(n.error.message),this.mProgress=!1}})}onOrganizationChange(n){let e=n.value;this.filterConstituencies(e),this.mOrganizations=[]}filterConstituencies(n){this.mProgress=!0,this.mUserService.filterOrganizations(n).subscribe({next:e=>{e&&(this.mOrganizations=e,this.mProgress=!1)},error:e=>{this.mToastrService.error(e.error.message),this.mProgress=!1}})}onSubmit(n){let e={id:this.id,first_name:n.first_name,last_name:n.last_name,email:n.email,role_id:n.role_id,status_id:n.status_id,organization_category_id:n.organization_category_id,organization_id:n.organization_id,password:n.password,reset_password:n.reset_password};this.mProgress=!0,this.mUserService.updateItem(e).subscribe({next:t=>{t&&(this.mToastrService.success(t.message),this.router.navigateByUrl("/users"),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(C(Ne),C(A),C(se),C($),C(ee),C(ce))};static \u0275cmp=U({type:i,selectors:[["app-edit"]],standalone:!1,decls:84,vars:40,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-6"],[1,"mb-3"],["for","first_name",1,"form-label","required"],["type","text","formControlName","first_name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","last_name",1,"form-label","required"],["type","text","formControlName","last_name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","email",1,"form-label","required"],["type","email","formControlName","email",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","role_id",1,"form-label","required"],["formControlName","role_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],[1,"col-md-12"],["for","status_id",1,"form-label","required"],["formControlName","status_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["class","row",4,"ngIf"],["for","password",1,"form-label","required"],["type","password","formControlName","password",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"text-end"],[1,"form-check","d-inline-block"],["type","checkbox","formControlName","reset_password",1,"form-check-input",3,"ngClass"],["for","reset_password"],["routerLink","/users",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],["for","organization_category_id",1,"form-label","required"],["formControlName","organization_category_id",1,"form-select",3,"ngModelChange","change","ngModel","ngClass"],["for","organization_id",1,"form-label","required"],["formControlName","organization_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"]],template:function(e,t){if(e&1&&(p(0,ft,1,0,"app-progress",0),o(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),a(7,"Users"),r()(),o(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),a(12,"Home"),r()(),o(13,"li",9),a(14,"Users"),r(),o(15,"li",10),a(16,"Edit"),r()()()()()(),o(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),a(24," Edit User "),r(),g(25,"div",16),r(),o(26,"div",17)(27,"form",18),T("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),o(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),a(32,"First Name:"),r(),o(33,"input",23),P("ngModelChange",function(d){return M(t.item.first_name,d)||(t.item.first_name=d),d}),r(),p(34,ht,2,1,"div",24),r()(),o(35,"div",20)(36,"div",21)(37,"label",25),a(38,"Last Name:"),r(),o(39,"input",26),P("ngModelChange",function(d){return M(t.item.last_name,d)||(t.item.last_name=d),d}),r(),p(40,bt,2,1,"div",24),r()(),o(41,"div",20)(42,"div",21)(43,"label",27),a(44,"Email:"),r(),o(45,"input",28),P("ngModelChange",function(d){return M(t.item.email,d)||(t.item.email=d),d}),r(),p(46,Et,3,2,"div",24),r()(),o(47,"div",20)(48,"div",21)(49,"label",29),a(50,"Role:"),r(),o(51,"select",30),P("ngModelChange",function(d){return M(t.item.role_id,d)||(t.item.role_id=d),d}),o(52,"option",31),a(53,"--- Select role ---"),r(),p(54,Ft,2,2,"option",32),r(),p(55,wt,2,1,"div",33),r()(),o(56,"div",34)(57,"div",21)(58,"label",35),a(59,"Status:"),r(),o(60,"select",36),P("ngModelChange",function(d){return M(t.item.status_id,d)||(t.item.status_id=d),d}),o(61,"option",31),a(62,"Status"),r(),p(63,Tt,2,2,"option",32),r(),p(64,Ot,2,1,"div",33),r()(),p(65,At,19,12,"div",37),o(66,"div",34)(67,"div",21)(68,"label",38),a(69,"Password:"),r(),o(70,"input",39),P("ngModelChange",function(d){return M(t.item.password,d)||(t.item.password=d),d}),r(),p(71,Vt,3,2,"div",24),r()(),o(72,"div",34)(73,"div",40)(74,"div",41),g(75,"input",42),o(76,"label",43),a(77," Reset user password?"),r(),p(78,Lt,2,1,"div",24),r()()()(),o(79,"div",40)(80,"a",44),a(81,"Cancel"),r(),o(82,"button",45),a(83,"Submit"),r()()()()()()()()()()),e&2){let s,d,u,h,y,b,S,x,E,F,B,V,W,L;m("ngIf",t.mProgress),l(27),m("formGroup",t.itemForm),l(6),O("ngModel",t.item.first_name),m("ngClass",v(26,q,((s=t.itemForm.get("first_name"))==null?null:s.invalid)&&(((s=t.itemForm.get("first_name"))==null?null:s.dirty)||((s=t.itemForm.get("first_name"))==null?null:s.touched)))),l(),m("ngIf",((d=t.itemForm.get("first_name"))==null?null:d.invalid)&&(((d=t.itemForm.get("first_name"))==null?null:d.dirty)||((d=t.itemForm.get("first_name"))==null?null:d.touched))),l(5),O("ngModel",t.item.last_name),m("ngClass",v(28,q,((u=t.itemForm.get("last_name"))==null?null:u.invalid)&&(((u=t.itemForm.get("last_name"))==null?null:u.dirty)||((u=t.itemForm.get("last_name"))==null?null:u.touched)))),l(),m("ngIf",((h=t.itemForm.get("last_name"))==null?null:h.invalid)&&(((h=t.itemForm.get("last_name"))==null?null:h.dirty)||((h=t.itemForm.get("last_name"))==null?null:h.touched))),l(5),O("ngModel",t.item.email),m("ngClass",v(30,q,((y=t.itemForm.get("email"))==null?null:y.invalid)&&(((y=t.itemForm.get("email"))==null?null:y.dirty)||((y=t.itemForm.get("email"))==null?null:y.touched)))),l(),m("ngIf",((b=t.itemForm.get("email"))==null?null:b.invalid)&&(((b=t.itemForm.get("email"))==null?null:b.dirty)||((b=t.itemForm.get("email"))==null?null:b.touched))),l(5),O("ngModel",t.item.role_id),m("ngClass",v(32,q,((S=t.itemForm.get("role_id"))==null?null:S.invalid)&&(((S=t.itemForm.get("role_id"))==null?null:S.dirty)||((S=t.itemForm.get("role_id"))==null?null:S.touched)))),l(3),m("ngForOf",t.mRoles),l(),m("ngIf",((x=t.itemForm.get("role_id"))==null?null:x.invalid)&&(((x=t.itemForm.get("role_id"))==null?null:x.dirty)||((x=t.itemForm.get("role_id"))==null?null:x.touched))),l(5),O("ngModel",t.item.status_id),m("ngClass",v(34,q,((E=t.itemForm.get("status_id"))==null?null:E.invalid)&&(((E=t.itemForm.get("status_id"))==null?null:E.dirty)||((E=t.itemForm.get("status_id"))==null?null:E.touched)))),l(3),m("ngForOf",t.mStatuses),l(),m("ngIf",((F=t.itemForm.get("status_id"))==null?null:F.invalid)&&(((F=t.itemForm.get("status_id"))==null?null:F.dirty)||((F=t.itemForm.get("status_id"))==null?null:F.touched))),l(),m("ngIf",t.itemForm.get("role_id").value!=1),l(5),O("ngModel",t.item.password),m("ngClass",v(36,q,((B=t.itemForm.get("password"))==null?null:B.invalid)&&(((B=t.itemForm.get("password"))==null?null:B.dirty)||((B=t.itemForm.get("password"))==null?null:B.touched)))),l(),m("ngIf",((V=t.itemForm.get("password"))==null?null:V.invalid)&&(((V=t.itemForm.get("password"))==null?null:V.dirty)||((V=t.itemForm.get("password"))==null?null:V.touched))),l(4),m("ngClass",v(38,q,((W=t.itemForm.get("reset_password"))==null?null:W.invalid)&&(((W=t.itemForm.get("reset_password"))==null?null:W.dirty)||((W=t.itemForm.get("reset_password"))==null?null:W.touched)))),l(3),m("ngIf",((L=t.itemForm.get("reset_password"))==null?null:L.invalid)&&(((L=t.itemForm.get("reset_password"))==null?null:L.dirty)||((L=t.itemForm.get("reset_password"))==null?null:L.touched))),l(4),m("disabled",t.itemForm.invalid)}},dependencies:[j,D,H,G,Q,pe,ue,Y,qe,de,J,K,X,Z,te],encapsulation:2})};var Ge=Ye(Je());var jt=i=>({"is-invalid":i}),Dt=(i,n,e)=>({"bg-warning text-dark":i,"bg-primary":n,"bg-danger":e}),Ht=(i,n)=>({active:i,disabled:n});function Gt(i,n){i&1&&g(0,"app-progress")}function $t(i,n){i&1&&(o(0,"div"),a(1,"This field is required."),r())}function Yt(i,n){if(i&1&&(o(0,"div",28),p(1,$t,2,0,"div",1),r()),i&2){let e=c();l(),m("ngIf",e.search_term.errors==null?null:e.search_term.errors.required)}}function Jt(i,n){if(i&1){let e=k();o(0,"tr")(1,"td"),a(2),r(),o(3,"td"),a(4),r(),o(5,"td"),a(6),r(),o(7,"td"),a(8),r(),o(9,"td")(10,"span",32),a(11),r()(),o(12,"td"),a(13),le(14,"date"),r(),o(15,"td",33)(16,"button",34),g(17,"i",35),r(),o(18,"a",36),g(19,"i",37),r(),o(20,"button",38),T("click",function(){let s=I(e).$implicit,d=c(2);return w(d.onDelete(s))}),g(21,"i",39),r(),o(22,"div",40)(23,"div",41)(24,"div",42)(25,"div",43)(26,"h5",44),a(27),r(),g(28,"button",45),r(),o(29,"div",46)(30,"ol",47)(31,"li",48)(32,"div",49)(33,"div",50),a(34,"Parent:"),r()(),o(35,"span",51),a(36),r()(),o(37,"li",48)(38,"div",49)(39,"div",50),a(40,"Child:"),r()(),o(41,"span",51),a(42),r()(),o(43,"li",48)(44,"div",49)(45,"div",50),a(46,"Email Verified At:"),r()(),o(47,"span",51),a(48),le(49,"date"),r()(),o(50,"li",48)(51,"div",49)(52,"div",50),a(53,"Updated At:"),r()(),o(54,"span",51),a(55),le(56,"date"),r()()()(),o(57,"div",52)(58,"button",53),a(59,"Close"),r()()()()()()()}if(i&2){let e=n.$implicit,t=n.index;l(2),be("",t+1,"."),l(2),f(e.name),l(2),f(e.email),l(2),f(e.role==null?null:e.role.name),l(2),m("ngClass",ze(22,Dt,e.status_id==1,e.status_id==2,e.status_id==3)),l(),be(" ",e.status==null?null:e.status.name,""),l(2),f(ae(14,16,e.created_at)),l(3),ye("data-bs-target","#modal1"+e.id),l(2),Ie("routerLink","/users/edit/",e.id,""),l(4),ye("id","modal1"+e.id),l(5),f(e.name),l(9),f(e.parent==null?null:e.parent.name),l(6),f(e.child==null?null:e.child.name),l(6),f(ae(49,18,e.email_verified_at)),l(7),f(ae(56,20,e.updated_at))}}function Kt(i,n){if(i&1&&(o(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th"),a(5,"#"),r(),o(6,"th"),a(7,"Name"),r(),o(8,"th"),a(9,"Email"),r(),o(10,"th"),a(11,"Role"),r(),o(12,"th"),a(13,"Status"),r(),o(14,"th"),a(15,"Created"),r(),o(16,"th"),a(17,"Action"),r()()(),o(18,"tbody"),p(19,Jt,60,26,"tr",31),r()()()),i&2){let e=c();l(19),m("ngForOf",e.mItems)}}function Qt(i,n){if(i&1){let e=k();o(0,"li",56)(1,"a",57),T("click",function(){let s=I(e).$implicit,d=c(2);return w(d.onChangePage(s.url))}),r()()}if(i&2){let e=n.$implicit;m("ngClass",Te(2,Ht,e.active,!e.url)),l(),m("innerHTML",e.label,Fe)}}function Xt(i,n){if(i&1&&(o(0,"div")(1,"ul",54),p(2,Qt,2,5,"li",55),r()()),i&2){let e=c();l(2),m("ngForOf",e.links)}}function Zt(i,n){i&1&&(o(0,"p",58),a(1,"No items"),r())}var ve=class i{constructor(n,e){this.mUserService=n;this.mToastrService=e}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new ke("",_.required),this.itemForm=new Ue({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mUserService.allItems().subscribe({next:n=>{n&&(this.mItems=n.data,this.links=n.links,this.mProgress=!1)},error:n=>{n.error.message&&this.mToastrService.error(n.error.message),this.mProgress=!1}})}onChangePage(n){this.mProgress=!0,this.mUserService.paginateItems(n).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}onDelete(n){Ge.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mUserService.deleteItem(n).subscribe({next:s=>{s&&(this.mItems=this.mItems.filter(d=>d.id!==n.id),this.mToastrService.error(s.message),this.mProgress=!1)},error:s=>{s.error.message&&this.mToastrService.error(s.error.message),this.mProgress=!1}}))})}onSearch(n){this.mProgress=!0,this.mUserService.searchItems(n).subscribe({next:e=>{e&&(this.mItems=e.data,this.mToastrService.success(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(C(A),C($))};static \u0275cmp=U({type:i,selectors:[["app-index"]],standalone:!1,decls:38,vars:9,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["routerLink","/users/create",1,"btn","btn-warning","btn-sm"],[1,"bi","bi-plus-circle-fill"],[1,"card-tools"],[3,"ngSubmit","formGroup"],[1,"input-group","input-group-sm",2,"width","150px"],["type","text","formControlName","search_term","placeholder","Search",1,"form-control","float-right",3,"ngClass"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-search"],["class","invalid-feedback","type","alert",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf","ngIfElse"],["type","alert",1,"invalid-feedback"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"badge","rounded-pill",3,"ngClass"],[1,"text-nowrap"],["data-bs-toggle","modal",1,"btn","btn-outline-dark","btn-sm","me-1"],[1,"bi","bi-eye-fill"],[1,"btn","btn-dark","btn-sm","me-1",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash2-fill"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"text-muted"],[1,"modal-footer","bg-dark"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-sm"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1){let s=k();p(0,Gt,1,0,"app-progress",1),o(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),a(7,"Users"),r()(),o(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),a(12,"Home"),r()(),o(13,"li",10),a(14,"Users"),r()()()()()(),o(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"a",16),g(23,"i",17),a(24," Create "),r()(),o(25,"div",18)(26,"form",19),T("ngSubmit",function(){return I(s),w(t.onSearch(t.itemForm.value))}),o(27,"div",20),g(28,"input",21),o(29,"div",22)(30,"button",23),g(31,"i",24),r()(),p(32,Yt,2,1,"div",25),r()()()(),o(33,"div",26),p(34,Kt,20,1,"div",27)(35,Xt,3,1,"div",1)(36,Zt,2,0,"ng-template",null,0,Oe),r()()()()()()()}if(e&2){let s=we(37);m("ngIf",t.mProgress),l(26),m("formGroup",t.itemForm),l(2),m("ngClass",v(7,jt,t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched))),l(4),m("ngIf",t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched)),l(2),m("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",s),l(),m("ngIf",t.links)}},dependencies:[j,D,H,G,Q,Y,J,K,X,Z,te,Me],encapsulation:2})};var fe=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=U({type:i,selectors:[["app-show"]],standalone:!1,decls:2,vars:0,template:function(e,t){e&1&&(o(0,"p"),a(1,"show works!"),r())},encapsulation:2})};var ei=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ve,data:{title:"Index"}},{path:"create",component:_e,data:{title:"Create"}},{path:"edit/:id",component:ge,data:{title:"Edit"}},{path:"show",component:fe,data:{title:"Show"}}],Ce=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=oe({type:i});static \u0275inj=re({imports:[me,ne.forChild(ei),ne]})};var $e=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=oe({type:i});static \u0275inj=re({imports:[me,ne,Ae,Re,Be,Ce]})};export{$e as UserModule};
