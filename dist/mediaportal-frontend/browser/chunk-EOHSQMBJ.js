import{a as Q}from"./chunk-WQ6ZQVY7.js";import{a as j,b as F}from"./chunk-HJUCVMR7.js";import{s as L,t as N}from"./chunk-QFRYTLOK.js";import{h as O,j as E}from"./chunk-KZGKNQKD.js";import{h as P}from"./chunk-LPEF23WO.js";import{A as h,Ca as R,Da as I,Db as d,Ea as _,Ia as y,Y as l,aa as f,ca as T,da as c,ga as D,jb as A,ka as m,mb as u,pa as r,qa as o,ra as n}from"./chunk-FCMXJ2TO.js";import"./chunk-GAL4ENT6.js";var H=["mChart"];function k(s,t){s&1&&n(0,"app-progress")}var C=class s{constructor(t,i){this.mToastrService=t;this.mReportService=i}mProgress=!1;mChart;mChartMediaByStatus={series:[],chart:{type:"bar",height:350},title:{text:"Media by Status"},xaxis:{categories:[]},labels:[],plotOptions:{bar:{borderRadius:6}},dataLabels:{enabled:!0}};mChartUsersByStatus={series:[],chart:{type:"donut",height:350},title:{text:"Users by Status"},xaxis:{categories:[]},labels:[],plotOptions:{bar:{borderRadius:6}},dataLabels:{enabled:!0}};mChartViewsByUser={series:[],chart:{type:"area",height:350},title:{text:"Views by User"},xaxis:{categories:[]},labels:[],plotOptions:{bar:{borderRadius:6}},dataLabels:{enabled:!0}};mChartViewsByDeviceType={series:[],chart:{type:"pie",height:350},title:{text:"Views by Device Type"},xaxis:{categories:[]},labels:[],plotOptions:{bar:{borderRadius:6}},dataLabels:{enabled:!0}};ngOnInit(){this.index()}index(){this.mProgress=!0,this.mReportService.allItems().subscribe({next:t=>{if(t){let i=t.data.media_by_status,e=i.map(a=>a.status?.name),p=i.map(a=>a.total);this.mChartMediaByStatus.chart.type==="bar"?(this.mChartMediaByStatus.series=[{name:"Media",data:p}],this.mChartMediaByStatus.xaxis={categories:e}):(this.mChartMediaByStatus.series=p,this.mChartMediaByStatus.labels=e);let v=t.data.users_by_status,x=v.map(a=>a.status?.name),S=v.map(a=>a.total);this.mChartUsersByStatus.chart.type==="donut"?(this.mChartUsersByStatus.series=S,this.mChartUsersByStatus.labels=x):(this.mChartUsersByStatus.series=[{name:"Users",data:S}],this.mChartUsersByStatus.xaxis={categories:x});let B=t.data.views_by_user,g=B.map(a=>a.user?.full_name),w=B.map(a=>a.user_total_views);this.mChartViewsByUser.chart.type==="pie"?(this.mChartViewsByUser.series=w,this.mChartViewsByUser.labels=g):(this.mChartViewsByUser.series=[{name:"Views",data:w}],this.mChartViewsByUser.xaxis={categories:g});let M=t.data.views_by_device_type,V=M.map(a=>a.device_type?.name),U=M.map(a=>a.total);this.mChartViewsByDeviceType.chart.type==="pie"?(this.mChartViewsByDeviceType.series=U,this.mChartViewsByDeviceType.labels=V):(this.mChartViewsByDeviceType.series=[{name:"Device Type",data:U}],this.mChartViewsByDeviceType.xaxis={categories:V}),this.mProgress=!1}},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}static \u0275fac=function(i){return new(i||s)(f(O),f(Q))};static \u0275cmp=T({type:s,selectors:[["app-index"]],viewQuery:function(i,e){if(i&1&&R(H,5),i&2){let p;I(p=_())&&(e.mChart=p.first)}},standalone:!1,decls:30,vars:21,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-md-7","col-12","mb-4"],[1,"card","p-4","mb-3","h-100","shadow-none","border-0"],[3,"series","chart","xaxis","title","dataLabels","plotOptions"],[1,"col-md-5","col-12","mb-4"],[3,"series","chart","labels","title"]],template:function(i,e){i&1&&(D(0,k,1,0,"app-progress",0),r(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),y(7,"Reports"),o()(),r(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),y(12,"Home"),o()(),r(13,"li",9),y(14,"Reports"),o()()()()()(),r(15,"div",10)(16,"div",2)(17,"div",3)(18,"div",11)(19,"div",12),n(20,"apx-chart",13),o()(),r(21,"div",14)(22,"div",12),n(23,"apx-chart",15),o()(),r(24,"div",14)(25,"div",12),n(26,"apx-chart",15),o()(),r(27,"div",11)(28,"div",12),n(29,"apx-chart",13),o()()()()()()),i&2&&(m("ngIf",e.mProgress),l(20),m("series",e.mChartViewsByUser.series)("chart",e.mChartViewsByUser.chart)("xaxis",e.mChartViewsByUser.xaxis)("title",e.mChartViewsByUser.title)("dataLabels",e.mChartViewsByUser.dataLabels)("plotOptions",e.mChartViewsByUser.plotOptions),l(3),m("series",e.mChartViewsByDeviceType.series)("chart",e.mChartViewsByDeviceType.chart)("labels",e.mChartViewsByDeviceType.labels)("title",e.mChartViewsByDeviceType.title),l(3),m("series",e.mChartUsersByStatus.series)("chart",e.mChartUsersByStatus.chart)("labels",e.mChartUsersByStatus.labels)("title",e.mChartUsersByStatus.title),l(3),m("series",e.mChartMediaByStatus.series)("chart",e.mChartMediaByStatus.chart)("xaxis",e.mChartMediaByStatus.xaxis)("title",e.mChartMediaByStatus.title)("dataLabels",e.mChartMediaByStatus.dataLabels)("plotOptions",e.mChartMediaByStatus.plotOptions))},dependencies:[A,E,j],encapsulation:2})};var z=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:C,data:{title:"Index"}}],b=class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=c({type:s});static \u0275inj=h({imports:[u,d.forChild(z),d]})};var q=class s{static \u0275fac=function(i){return new(i||s)};static \u0275mod=c({type:s});static \u0275inj=h({imports:[u,d,L,N,b,P,F]})};export{q as ReportModule};
