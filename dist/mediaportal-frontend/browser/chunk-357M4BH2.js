import{b as r,c as p}from"./chunk-5G3ALHHI.js";import{d as o,gb as c,i,v as u,y as n}from"./chunk-EN7VB6NI.js";var l=class s{constructor(t,e){this.mAppContextService=t;this.http=e;this.mCurrentUserSubject=new o(JSON.parse(localStorage.getItem("currentUser"))),this.mCurrentUser=this.mCurrentUserSubject.asObservable()}mCurrentUserSubject;mCurrentUser;get currentUser(){return this.mCurrentUserSubject.value}getCurrentUser(){let t=`${r.base_url}/sso`;return this.http.get(t,this.mAppContextService.getHttpOptions()).pipe(i(e=>(this.saveUserLocally(e),e)))}register(t){let e=`${r.base_url}/register`;return this.http.post(e,t,this.mAppContextService.getHttpOptions()).pipe(i(a=>a))}login(t){let e=`${r.base_url}/login`;return this.http.post(e,t,this.mAppContextService.getHttpOptions()).pipe(i(a=>(this.saveUserLocally(a),a)))}logout(){let t=`${r.base_url}/logout`;return this.http.post(t,null,this.mAppContextService.getHttpOptions()).pipe(i(e=>(localStorage.removeItem("currentUser"),localStorage.clear(),this.mCurrentUserSubject.next(null),e)))}localSignOut(){localStorage.removeItem("currentUser"),localStorage.clear()}saveUserLocally(t){if(t.status=="success"){let e={id:t.data.user.id,first_name:t.data.user.first_name,last_name:t.data.user.last_name,email:t.data.user.email,phone:t.data.user.phone,status_id:t.data.user.status_id,role_id:t.data.user.role_id,created_at:t.data.user.created_at,token:t.data.token,name:t.data.user.name,email_verified_at:t.data.user.email_verified_at,role:t.data.user.role,status:t.data.user.status,county_id:t.data.user.county_id,referral_code:t.data.user.referral_code,receive_notifications:t.data.user.receive_notifications};localStorage.setItem("currentUser",JSON.stringify(e)),this.mCurrentUserSubject.next(e)}}changePassword(t){let e=`${r.base_url}/change-password`;return this.http.post(e,t,this.mAppContextService.getHttpOptions()).pipe(i(a=>a))}unpaginatedItems(){let t=`${r.base_url}/unpaginated-items-register`;return this.http.get(t,this.mAppContextService.getHttpOptions())}isUsernameTaken(t){let e=`${r.base_url}/check-username/${t}`;return this.http.get(e)}verifyEmail(t){let e=`${r.base_url}/verify-email`;return this.http.post(e,t,this.mAppContextService.getHttpOptions()).pipe(i(a=>(a.status==="success"&&this.saveUserLocally(a),a)))}resendVerificationCode(){let t=`${r.base_url}/resend-verification-code`;return this.http.get(t,this.mAppContextService.getHttpOptions())}resetPassword(t){let e=`${r.base_url}/reset-password`;return this.http.post(e,t,this.mAppContextService.getHttpOptions())}recoverPassword(t){let e=`${r.base_url}/recover-password`;return this.http.post(e,t,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||s)(n(p),n(c))};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{l as a};
