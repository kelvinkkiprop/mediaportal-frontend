import{a as Y,b as J,c as Ie}from"./chunk-OYANUUXS.js";import{a as Te}from"./chunk-47TLDLVH.js";import{c as A,e as x,f as B,g as q,h as he,i as Ce,k as $,m as V,n as G,r as W,s as be,t as Se}from"./chunk-AW6OH7LN.js";import{h as y,j as _}from"./chunk-G326LOTN.js";import{b as z,c as f,e as ye,h as _e}from"./chunk-FIGPFU76.js";import{A as T,Ab as S,Ba as se,C as te,Db as w,H as E,Ha as L,I as M,Ia as m,Ja as le,Ka as ce,La as de,Na as pe,Oa as ue,Pa as ge,Ra as fe,Sa as I,Y as s,Za as k,aa as p,ca as v,da as F,ga as d,hb as D,ib as H,jb as b,ka as l,mb as O,pa as n,qa as o,ra as u,tb as ve,ua as N,wa as h,xa as C,xb as R,z as me,zb as j}from"./chunk-GNYCVOWU.js";import{f as we}from"./chunk-GAL4ENT6.js";var g=class r{constructor(t,e){this.mAppContextService=t;this.http=e}allItems(t){let e=`${f.base_url}/categories`;return this.http.get(e+t,this.mAppContextService.getHttpOptions())}createItem(t){let e=`${f.base_url}/categories`;return this.http.post(e,t,this.mAppContextService.getHttpOptions())}getOneItem(t){let e=`${f.base_url}/categories/${t}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(t){let e=`${f.base_url}/categories/${t.id}`;return this.http.put(e,t,this.mAppContextService.getHttpOptions())}deleteItem(t){let e=`${f.base_url}/categories/${t.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(t){return this.http.get(t,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let t=`${f.base_url}/unpaginated-items-categories`;return this.http.get(t,this.mAppContextService.getHttpOptions())}searchItems(t){let e=`${f.base_url}/search-categories`;return this.http.post(e,t,this.mAppContextService.getHttpOptions())}categorizedItems(t,e){let i=`${f.base_url}/categorized-items-categories/${e}`;return this.http.get(i+t,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||r)(te(ye),te(ve))};static \u0275prov=me({token:r,factory:r.\u0275fac,providedIn:"root"})};var Me=r=>({"is-invalid":r});function Fe(r,t){r&1&&u(0,"app-progress")}function Ne(r,t){r&1&&(n(0,"div"),m(1,"This field is required."),o())}function Le(r,t){if(r&1&&(n(0,"div",28),d(1,Ne,2,0,"div",0),o()),r&2){let e,i=C();s(),l("ngIf",(e=i.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}var Q=class r{constructor(t,e,i,a){this.mToastrService=t;this.mCategoryService=e;this.router=i;this.fb=a;this.itemForm=this.fb.group({name:["",x.required]})}itemForm;mProgress=!1;onSubmit(t){this.mProgress=!0,this.mCategoryService.createItem(t).subscribe({next:e=>{e.status==="success"?(this.mToastrService.success(e.message),this.router.navigateByUrl("/categories"),this.mProgress=!1):(this.mToastrService.error(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||r)(p(y),p(g),p(j),p(W))};static \u0275cmp=v({type:r,selectors:[["app-create"]],standalone:!1,decls:40,vars:7,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","name",1,"form-label","required"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/categories",1,"btn","btn-danger","me-1"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"]],template:function(e,i){if(e&1&&(d(0,Fe,1,0,"app-progress",0),n(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Categories"),o()(),n(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),m(12,"Home"),o()(),n(13,"li",9),m(14,"Categories"),o(),n(15,"li",10),m(16,"Create"),o()()()()()(),n(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),m(24," Create Category "),o(),u(25,"div",16),o(),n(26,"div",17)(27,"form",18),h("ngSubmit",function(){return i.onSubmit(i.itemForm.value)}),n(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),m(32,"Name:"),o(),u(33,"input",23),d(34,Le,2,1,"div",24),o()()(),n(35,"div",25)(36,"a",26),m(37,"Cancel"),o(),n(38,"button",27),m(39,"Submit"),o()()()()()()()()()()),e&2){let a,c;l("ngIf",i.mProgress),s(27),l("formGroup",i.itemForm),s(6),l("ngClass",I(5,Me,((a=i.itemForm.get("name"))==null?null:a.invalid)&&(((a=i.itemForm.get("name"))==null?null:a.dirty)||((a=i.itemForm.get("name"))==null?null:a.touched)))),s(),l("ngIf",((c=i.itemForm.get("name"))==null?null:c.invalid)&&(((c=i.itemForm.get("name"))==null?null:c.dirty)||((c=i.itemForm.get("name"))==null?null:c.touched))),s(4),l("disabled",i.itemForm.invalid)}},dependencies:[D,b,S,$,A,B,q,V,G,_],encapsulation:2})};var ke=r=>({"is-invalid":r});function De(r,t){r&1&&u(0,"app-progress")}function He(r,t){r&1&&(n(0,"div"),m(1,"This field is required."),o())}function Oe(r,t){if(r&1&&(n(0,"div",28),d(1,He,2,0,"div",0),o()),r&2){let e,i=C();s(),l("ngIf",(e=i.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}var U=class r{constructor(t,e,i,a,c){this.mToastrService=t;this.mCategoryService=e;this.router=i;this.fb=a;this.route=c;this.itemForm=this.fb.group({name:["",x.required]})}itemForm;mProgress=!1;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mCategoryService.getOneItem(this.id).subscribe({next:t=>{t&&(this.item=t,this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onSubmit(t){let e={id:this.id,name:t.name};this.mProgress=!0,this.mCategoryService.updateItem(e).subscribe({next:i=>{i&&(this.mToastrService.success(i.message),this.router.navigateByUrl("/categories"),this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||r)(p(y),p(g),p(j),p(W),p(R))};static \u0275cmp=v({type:r,selectors:[["app-edit"]],standalone:!1,decls:40,vars:8,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","name",1,"form-label","required"],["type","text","formControlName","name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/categories",1,"btn","btn-danger","me-1"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"]],template:function(e,i){if(e&1&&(d(0,De,1,0,"app-progress",0),n(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Categories"),o()(),n(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),m(12,"Home"),o()(),n(13,"li",9),m(14,"Categories"),o(),n(15,"li",10),m(16,"Edit"),o()()()()()(),n(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),m(24," Edit Category "),o(),u(25,"div",16),o(),n(26,"div",17)(27,"form",18),h("ngSubmit",function(){return i.onSubmit(i.itemForm.value)}),n(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),m(32,"Name:"),o(),n(33,"input",23),ge("ngModelChange",function(c){return ue(i.item.name,c)||(i.item.name=c),c}),o(),d(34,Oe,2,1,"div",24),o()()(),n(35,"div",25)(36,"a",26),m(37,"Cancel"),o(),n(38,"button",27),m(39,"Submit"),o()()()()()()()()()()),e&2){let a,c;l("ngIf",i.mProgress),s(27),l("formGroup",i.itemForm),s(6),pe("ngModel",i.item.name),l("ngClass",I(6,ke,((a=i.itemForm.get("name"))==null?null:a.invalid)&&(((a=i.itemForm.get("name"))==null?null:a.dirty)||((a=i.itemForm.get("name"))==null?null:a.touched)))),s(),l("ngIf",((c=i.itemForm.get("name"))==null?null:c.invalid)&&(((c=i.itemForm.get("name"))==null?null:c.dirty)||((c=i.itemForm.get("name"))==null?null:c.touched))),s(4),l("disabled",i.itemForm.invalid)}},dependencies:[D,b,S,$,A,B,q,V,G,_],encapsulation:2})};var xe=we(Te());var Be=()=>["/media/watch"],qe=r=>({category:r});function $e(r,t){r&1&&u(0,"app-progress")}function Ve(r,t){if(r&1&&(n(0,"div",16)(1,"a",17),u(2,"app-media-card",18),n(3,"h6",6),m(4),o(),n(5,"div",19),m(6),o()()()),r&2){let e=t.$implicit;s(),l("routerLink",fe(5,Be))("queryParams",I(6,qe,e.id)),s(),l("data",e),s(2),le(e.name),s(2),ce("",e.total_media," media")}}function Ge(r,t){if(r&1&&(n(0,"div",14),d(1,Ve,7,8,"div",15),o()),r&2){let e=C();s(),l("ngForOf",e.mItems)}}function We(r,t){r&1&&u(0,"app-loader")}function ze(r,t){r&1&&(n(0,"p",20),m(1,"No items"),o())}var X=class r{constructor(t,e){this.mCategoryService=t;this.mToastrService=e}mItems=[];itemForm;search_term;mProgress=!1;links=[];currentPage=1;mLoadingMore=!1;mHasMorePages=!0;ngOnInit(){this.index(this.currentPage),this.search_term=new Ce("",x.required),this.itemForm=new he({search_term:this.search_term})}index(t){this.currentPage===1&&(this.mProgress=!0);let e=typeof t=="string"?t:`?page=${this.currentPage}`;this.mCategoryService.allItems(e).subscribe({next:i=>{this.currentPage===1?this.mItems=i.data:this.mItems=[...this.mItems,...i.data],this.mProgress=!1,this.links=i.links,this.mLoadingMore=!1;let a=this.links.find(c=>c.label==="Next &raquo;");this.mHasMorePages=!!a?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let t=this.links.find(e=>e.label==="Next &raquo;");t?(this.mLoadingMore=!0,this.currentPage++,this.index(t)):this.mHasMorePages=!1}onDelete(t){xe.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(i=>{i.isConfirmed&&(this.mProgress=!0,this.mCategoryService.deleteItem(t).subscribe({next:a=>{a&&(this.mItems=this.mItems.filter(c=>c.id!==t.id),this.mToastrService.error(a.message),this.mProgress=!1)},error:a=>{a.error.message&&this.mToastrService.error(a.error.message),this.mProgress=!1}}))})}onSearch(t){this.mProgress=!0,this.mCategoryService.searchItems(t).subscribe({next:e=>{e&&(this.mItems=e.data,this.mToastrService.success(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||r)(p(g),p(y))};static \u0275cmp=v({type:r,selectors:[["app-index"]],standalone:!1,decls:23,vars:7,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],["infiniteScroll","",1,"card-body",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"row","text-decoration-none","text-reset",3,"routerLink","queryParams"],[3,"data"],[1,"pt-0","text-muted"],[1,"p-5","text-center","text-muted"]],template:function(e,i){if(e&1){let a=N();d(0,$e,1,0,"app-progress",1),n(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),m(7,"Categories"),o()(),n(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),m(12,"Home"),o()(),n(13,"li",10),m(14,"Categories"),o()()()()()(),n(15,"div",11)(16,"div",3)(17,"div",12),h("scrolled",function(){return E(a),M(i.onLoadMore())}),d(18,Ge,2,1,"div",13),n(19,"div"),d(20,We,1,0,"app-loader",1),o(),d(21,ze,2,0,"ng-template",null,0,k),o()()()()}if(e&2){let a=L(22);l("ngIf",i.mProgress),s(17),l("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!i.mHasMorePages||i.mLoadingMore),s(),l("ngIf",i.mItems&&i.mItems.length>0)("ngIfElse",a),s(2),l("ngIf",i.mLoadingMore)}},dependencies:[H,b,S,_,Y,z,J],encapsulation:2})};function Ye(r,t){r&1&&u(0,"app-progress")}function Je(r,t){if(r&1&&(n(0,"div",23)(1,"a",24),u(2,"app-media-card",25),o()()),r&2){let e=t.$implicit;s(),se("routerLink","/media/show/",e==null?null:e.media.id,""),s(),l("data",e==null?null:e.media)}}function Ke(r,t){if(r&1&&(n(0,"div",21),d(1,Je,3,3,"div",22),o()),r&2){let e=C();s(),l("ngForOf",e.mItems)}}function Qe(r,t){r&1&&u(0,"app-loader")}function Ue(r,t){r&1&&(n(0,"p",26),m(1,"No items"),o())}var Z=class r{constructor(t,e,i){this.mToastrService=t;this.mCategoryService=e;this.route=i}id;item={};mItems=[];mProgress=!1;links=[];currentPage=1;mLoadingMore=!1;mHasMorePages=!0;ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mCategoryService.getOneItem(this.id).subscribe({next:t=>{t&&(this.item=t,this.index(this.currentPage),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}index(t){this.currentPage===1&&(this.mProgress=!0);let e=typeof t=="string"?t:`?page=${this.currentPage}`;this.mCategoryService.categorizedItems(e,this.item.id).subscribe({next:i=>{this.currentPage===1?this.mItems=i.data:this.mItems=[...this.mItems,...i.data],this.mProgress=!1,this.links=i.links,this.mLoadingMore=!1;let a=this.links.find(c=>c.label==="Next &raquo;");this.mHasMorePages=!!a?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let t=this.links.find(e=>e.label==="Next &raquo;");t?(this.mLoadingMore=!0,this.currentPage++,this.index(t)):this.mHasMorePages=!1}static \u0275fac=function(e){return new(e||r)(p(y),p(g),p(R))};static \u0275cmp=v({type:r,selectors:[["app-show"]],standalone:!1,decls:33,vars:9,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],["infiniteScroll","",1,"card-body",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"row","text-decoration-none","text-reset","me-1",3,"routerLink"],[3,"data"],[1,"p-5","text-center","text-muted"]],template:function(e,i){if(e&1){let a=N();d(0,Ye,1,0,"app-progress",1),n(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),m(7,"Categories"),o()(),n(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),m(12,"Home"),o()(),n(13,"li",10),m(14,"Categories"),o(),n(15,"li",11),m(16,"Show"),o()()()()()(),n(17,"div",12)(18,"div",3)(19,"div",4)(20,"div",13)(21,"div",14)(22,"div",15)(23,"div",16),m(24),o(),u(25,"div",17),o(),n(26,"div",18)(27,"div",19),h("scrolled",function(){return E(a),M(i.onLoadMore())}),d(28,Ke,2,1,"div",20),n(29,"div"),d(30,Qe,1,0,"app-loader",1),o(),d(31,Ue,2,0,"ng-template",null,0,k),o()()()()()()()()}if(e&2){let a=L(32);l("ngIf",i.mProgress),s(24),de(" ",i.item.total_media,' media in category "',i.item.name,'" '),s(3),l("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!i.mHasMorePages||i.mLoadingMore),s(),l("ngIf",i.mItems&&i.mItems.length>0)("ngIfElse",a),s(2),l("ngIf",i.mLoadingMore)}},dependencies:[H,b,S,_,Y,z,J],encapsulation:2})};var Xe=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:X,data:{title:"Index"}},{path:"create",component:Q,data:{title:"Create"}},{path:"edit/:id",component:U,data:{title:"Edit"}},{path:"show/:id",component:Z,data:{title:"Show"}}],ee=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=F({type:r});static \u0275inj=T({imports:[O,w.forChild(Xe),w]})};var Pe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=F({type:r});static \u0275inj=T({imports:[O,w,be,Se,_e,ee,Ie]})};export{Pe as CategoryModule};
