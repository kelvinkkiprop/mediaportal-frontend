import{a as at}from"./chunk-ZOK7XUDO.js";import{a as mt,b as st}from"./chunk-B7WRYCLN.js";import{a as L}from"./chunk-667GTK5Z.js";import{a as rt}from"./chunk-GRXRPJTM.js";import{a as Te,b as we,c as ot}from"./chunk-OYANUUXS.js";import{a as lt}from"./chunk-47TLDLVH.js";import{b as Ze,c as H,e as g,f as G,g as z,h as $e,i as et,k as J,m as Q,n as Y,o as le,p as oe,q as ae,r as me,s as tt,t as it}from"./chunk-AW6OH7LN.js";import{h as A,j as q}from"./chunk-G326LOTN.js";import{b as Ie,d as Fe,e as K,h as nt}from"./chunk-FIGPFU76.js";import{A as ge,Aa as U,Ab as B,Ba as he,Ca as He,Da as Ge,Db as ve,Ea as ze,H as h,Ha as ne,I as C,Ia as m,Ja as _,Ka as F,La as Je,Na as T,Oa as w,Pa as P,Ra as Ce,Sa as y,Ta as Qe,Ua as Ye,W as je,Wa as D,Xa as be,Y as a,Ya as Z,Za as re,aa as v,ca as k,da as ye,ga as d,hb as j,ib as R,ja as Ue,jb as N,ka as s,kb as Ke,la as _e,lb as Xe,mb as xe,pa as r,qa as n,ra as u,ua as E,wa as I,xa as c,xb as Se,zb as Ee}from"./chunk-GNYCVOWU.js";import{a as Re,f as We}from"./chunk-GAL4ENT6.js";var W=i=>({"is-invalid":i});function ut(i,l){i&1&&u(0,"app-progress")}function _t(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function vt(i,l){i&1&&(r(0,"div"),m(1,"Enter a valid email address."),n())}function ft(i,l){if(i&1&&(r(0,"div",39),d(1,_t,2,0,"div",0)(2,vt,2,0,"div",0),n()),i&2){let t,e,o=c();a(),s("ngIf",(t=o.itemForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),s("ngIf",(e=o.itemForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function gt(i,l){if(i&1&&(r(0,"option",40),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function yt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function ht(i,l){if(i&1&&(r(0,"div",41),d(1,yt,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("account_type_id"))==null||t.errors==null?null:t.errors.required)}}function Ct(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function bt(i,l){if(i&1&&(r(0,"div",39),d(1,Ct,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("first_name"))==null||t.errors==null?null:t.errors.required)}}function xt(i,l){if(i&1&&(r(0,"div",42)(1,"div",21)(2,"label",43),m(3,"First Name:"),n(),u(4,"input",44),d(5,bt,2,1,"div",24),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(2,W,((t=o.itemForm.get("first_name"))==null?null:t.invalid)&&(((t=o.itemForm.get("first_name"))==null?null:t.dirty)||((t=o.itemForm.get("first_name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("first_name"))==null?null:e.invalid)&&(((e=o.itemForm.get("first_name"))==null?null:e.dirty)||((e=o.itemForm.get("first_name"))==null?null:e.touched)))}}function St(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Et(i,l){if(i&1&&(r(0,"div",39),d(1,St,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("last_name"))==null||t.errors==null?null:t.errors.required)}}function It(i,l){if(i&1&&(r(0,"div",42)(1,"div",21)(2,"label",45),m(3,"Last Name:"),n(),u(4,"input",46),d(5,Et,2,1,"div",24),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(2,W,((t=o.itemForm.get("last_name"))==null?null:t.invalid)&&(((t=o.itemForm.get("last_name"))==null?null:t.dirty)||((t=o.itemForm.get("last_name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("last_name"))==null?null:e.invalid)&&(((e=o.itemForm.get("last_name"))==null?null:e.dirty)||((e=o.itemForm.get("last_name"))==null?null:e.touched)))}}function Ft(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Tt(i,l){if(i&1&&(r(0,"div",39),d(1,Ft,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("name"))==null||t.errors==null?null:t.errors.required)}}function wt(i,l){if(i&1&&(r(0,"div",42)(1,"div",21)(2,"label",47),m(3,"Name:"),n(),u(4,"input",48),d(5,Tt,2,1,"div",24),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(2,W,((t=o.itemForm.get("name"))==null?null:t.invalid)&&(((t=o.itemForm.get("name"))==null?null:t.dirty)||((t=o.itemForm.get("name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("name"))==null?null:e.invalid)&&(((e=o.itemForm.get("name"))==null?null:e.dirty)||((e=o.itemForm.get("name"))==null?null:e.touched)))}}function Pt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Mt(i,l){if(i&1&&(r(0,"div",39),d(1,Pt,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("alias"))==null||t.errors==null?null:t.errors.required)}}function kt(i,l){if(i&1&&(r(0,"div",42)(1,"div",21)(2,"label",49),m(3,"Alias:"),n(),u(4,"input",50),d(5,Mt,2,1,"div",24),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(2,W,((t=o.itemForm.get("alias"))==null?null:t.invalid)&&(((t=o.itemForm.get("alias"))==null?null:t.dirty)||((t=o.itemForm.get("alias"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("alias"))==null?null:e.invalid)&&(((e=o.itemForm.get("alias"))==null?null:e.dirty)||((e=o.itemForm.get("alias"))==null?null:e.touched)))}}function Nt(i,l){if(i&1&&(r(0,"option",40),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function At(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function qt(i,l){if(i&1&&(r(0,"div",41),d(1,At,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("institution_category_id"))==null||t.errors==null?null:t.errors.required)}}function Lt(i,l){if(i&1&&(r(0,"div",20)(1,"div",21)(2,"label",51),m(3,"Institution category:"),n(),r(4,"select",52)(5,"option",27),m(6,"--- Select category ---"),n(),d(7,Nt,2,2,"option",28),n(),d(8,qt,2,1,"div",29),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(3,W,((t=o.itemForm.get("institution_category_id"))==null?null:t.invalid)&&(((t=o.itemForm.get("institution_category_id"))==null?null:t.dirty)||((t=o.itemForm.get("institution_category_id"))==null?null:t.touched)))),a(3),s("ngForOf",o.mInstitutionCategories),a(),s("ngIf",((e=o.itemForm.get("institution_category_id"))==null?null:e.invalid)&&(((e=o.itemForm.get("institution_category_id"))==null?null:e.dirty)||((e=o.itemForm.get("institution_category_id"))==null?null:e.touched)))}}function Vt(i,l){if(i&1&&(r(0,"option",40),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function Ut(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Bt(i,l){if(i&1&&(r(0,"div",41),d(1,Ut,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("institution_id"))==null||t.errors==null?null:t.errors.required)}}function Ot(i,l){if(i&1&&(r(0,"div",20)(1,"div",21)(2,"label",53),m(3,"Institution:"),n(),r(4,"select",54)(5,"option",27),m(6,"--- Select institution ---"),n(),d(7,Vt,2,2,"option",28),n(),d(8,Bt,2,1,"div",29),n()()),i&2){let t,e,o=c();a(4),s("ngClass",y(3,W,((t=o.itemForm.get("institution_id"))==null?null:t.invalid)&&(((t=o.itemForm.get("institution_id"))==null?null:t.dirty)||((t=o.itemForm.get("institution_id"))==null?null:t.touched)))),a(3),s("ngForOf",o.mInstitutions),a(),s("ngIf",((e=o.itemForm.get("institution_id"))==null?null:e.invalid)&&(((e=o.itemForm.get("institution_id"))==null?null:e.dirty)||((e=o.itemForm.get("institution_id"))==null?null:e.touched)))}}function Dt(i,l){if(i&1&&(r(0,"option",40),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function Rt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Wt(i,l){if(i&1&&(r(0,"div",41),d(1,Rt,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("role_id"))==null||t.errors==null?null:t.errors.required)}}function jt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Ht(i,l){i&1&&(r(0,"div"),m(1,"Password must be at least 6 characters long."),n())}function Gt(i,l){if(i&1&&(r(0,"div",39),d(1,jt,2,0,"div",0)(2,Ht,2,0,"div",0),n()),i&2){let t,e,o=c();a(),s("ngIf",(t=o.itemForm.get("password"))==null||t.errors==null?null:t.errors.required),a(),s("ngIf",(e=o.itemForm.get("password"))==null||e.errors==null?null:e.errors.minlength)}}var Pe=class i{constructor(l,t,e,o,p){this.mToastrService=l;this.mUserService=t;this.mAppContextService=e;this.router=o;this.fb=p;this.itemForm=this.fb.group({email:["",[g.required,g.email]],account_type_id:["",g.required],first_name:["",g.nullValidator],last_name:["",g.nullValidator],name:["",g.nullValidator],alias:["",g.nullValidator],institution_category_id:["",g.nullValidator],institution_id:["",g.nullValidator],role_id:["",g.required],password:["",[g.required,g.minLength(6)]]})}itemForm;mProgress=!1;mAccountTypes;mInstitutionCategories;mInstitutions;mRoles;ngOnInit(){this.index()}onSubmit(l){this.mProgress=!0,this.mUserService.createItem(l).subscribe({next:t=>{t.status==="success"?(this.mToastrService.success(t.message),this.router.navigateByUrl("/users"),this.mProgress=!1):(this.mToastrService.error(t.message),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}index(){this.mProgress=!0,this.mUserService.unpaginatedItems().subscribe({next:l=>{l&&(this.mAccountTypes=l.data.account_types,this.mInstitutionCategories=l.data.institution_categories,this.mInstitutions=l.data.institutions,this.mRoles=l.data.roles,this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}static \u0275fac=function(t){return new(t||i)(v(A),v(L),v(K),v(Ee),v(me))};static \u0275cmp=k({type:i,selectors:[["app-create"]],standalone:!1,decls:70,vars:27,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","email",1,"form-label","required"],["type","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","account_type_id",1,"form-label","required"],["formControlName","account_type_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-md-12",4,"ngIf"],["for","role_id",1,"form-label","required"],["formControlName","role_id",1,"form-select",3,"ngClass"],["for","password",1,"form-label","required"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"text-end"],["routerLink","/users",1,"btn","btn-danger","me-1"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[1,"col-md-6"],["for","first_name",1,"form-label","required"],["type","text","formControlName","first_name",1,"form-control",3,"ngClass"],["for","last_name",1,"form-label","required"],["type","text","formControlName","last_name",1,"form-control",3,"ngClass"],["for","name",1,"form-label","required"],["type","text","formControlName","name",1,"form-control",3,"ngClass"],["for","alias",1,"form-label","required1"],["placeholder","e.g., KRA","type","text","formControlName","alias",1,"form-control",3,"ngClass"],["for","institution_category_id",1,"form-label","required"],["formControlName","institution_category_id",1,"form-select",3,"ngClass"],["for","institution_id",1,"form-label","required"],["formControlName","institution_id",1,"form-select",3,"ngClass"]],template:function(t,e){if(t&1&&(d(0,ut,1,0,"app-progress",0),r(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Users"),n()(),r(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),m(12,"Home"),n()(),r(13,"li",9),m(14,"Users"),n(),r(15,"li",10),m(16,"Create"),n()()()()()(),r(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),m(24," Create User "),n(),u(25,"div",16),n(),r(26,"div",17)(27,"form",18),I("ngSubmit",function(){return e.onSubmit(e.itemForm.value)}),r(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),m(32,"Email:"),n(),u(33,"input",23),d(34,ft,3,2,"div",24),n()(),r(35,"div",20)(36,"div",21)(37,"label",25),m(38,"Account Type:"),n(),r(39,"select",26)(40,"option",27),m(41,"--- Select account type ---"),n(),d(42,gt,2,2,"option",28),n(),d(43,ht,2,1,"div",29),n()(),d(44,xt,6,4,"div",30)(45,It,6,4,"div",30)(46,wt,6,4,"div",30)(47,kt,6,4,"div",30)(48,Lt,9,5,"div",31)(49,Ot,9,5,"div",31),r(50,"div",20)(51,"div",21)(52,"label",32),m(53,"Role:"),n(),r(54,"select",33)(55,"option",27),m(56,"--- Select role ---"),n(),d(57,Dt,2,2,"option",28),n(),d(58,Wt,2,1,"div",29),n()(),r(59,"div",20)(60,"div",21)(61,"label",34),m(62,"Password:"),n(),u(63,"input",35),d(64,Gt,3,2,"div",24),n()()(),r(65,"div",36)(66,"a",37),m(67,"Cancel"),n(),r(68,"button",38),m(69,"Submit"),n()()()()()()()()()()),t&2){let o,p,f,b,x,S,M,V;s("ngIf",e.mProgress),a(27),s("formGroup",e.itemForm),a(6),s("ngClass",y(19,W,((o=e.itemForm.get("email"))==null?null:o.invalid)&&(((o=e.itemForm.get("email"))==null?null:o.dirty)||((o=e.itemForm.get("email"))==null?null:o.touched)))),a(),s("ngIf",((p=e.itemForm.get("email"))==null?null:p.invalid)&&(((p=e.itemForm.get("email"))==null?null:p.dirty)||((p=e.itemForm.get("email"))==null?null:p.touched))),a(5),s("ngClass",y(21,W,((f=e.itemForm.get("account_type_id"))==null?null:f.invalid)&&(((f=e.itemForm.get("account_type_id"))==null?null:f.dirty)||((f=e.itemForm.get("account_type_id"))==null?null:f.touched)))),a(3),s("ngForOf",e.mAccountTypes),a(),s("ngIf",((b=e.itemForm.get("account_type_id"))==null?null:b.invalid)&&(((b=e.itemForm.get("account_type_id"))==null?null:b.dirty)||((b=e.itemForm.get("account_type_id"))==null?null:b.touched))),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(5),s("ngClass",y(23,W,((x=e.itemForm.get("role_id"))==null?null:x.invalid)&&(((x=e.itemForm.get("role_id"))==null?null:x.dirty)||((x=e.itemForm.get("role_id"))==null?null:x.touched)))),a(3),s("ngForOf",e.mRoles),a(),s("ngIf",((S=e.itemForm.get("role_id"))==null?null:S.invalid)&&(((S=e.itemForm.get("role_id"))==null?null:S.dirty)||((S=e.itemForm.get("role_id"))==null?null:S.touched))),a(5),s("ngClass",y(25,W,((M=e.itemForm.get("password"))==null?null:M.invalid)&&(((M=e.itemForm.get("password"))==null?null:M.dirty)||((M=e.itemForm.get("password"))==null?null:M.touched)))),a(),s("ngIf",((V=e.itemForm.get("password"))==null?null:V.invalid)&&(((V=e.itemForm.get("password"))==null?null:V.dirty)||((V=e.itemForm.get("password"))==null?null:V.touched))),a(4),s("disabled",e.itemForm.invalid)}},dependencies:[j,R,N,B,J,oe,ae,H,le,G,z,Q,Y,q],encapsulation:2})};var O=i=>({"is-invalid":i});function zt(i,l){i&1&&u(0,"app-progress")}function Jt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Qt(i,l){i&1&&(r(0,"div"),m(1,"Enter a valid email address."),n())}function Yt(i,l){if(i&1&&(r(0,"div",44),d(1,Jt,2,0,"div",0)(2,Qt,2,0,"div",0),n()),i&2){let t,e,o=c();a(),s("ngIf",(t=o.itemForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),s("ngIf",(e=o.itemForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function Kt(i,l){if(i&1&&(r(0,"option",45),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function Xt(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Zt(i,l){if(i&1&&(r(0,"div",46),d(1,Xt,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("account_type_id"))==null||t.errors==null?null:t.errors.required)}}function $t(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function ei(i,l){if(i&1&&(r(0,"div",44),d(1,$t,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("first_name"))==null||t.errors==null?null:t.errors.required)}}function ti(i,l){if(i&1){let t=E();r(0,"div",47)(1,"div",21)(2,"label",48),m(3,"First Name:"),n(),r(4,"input",49),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.first_name,o)||(p.item.first_name=o),C(o)}),n(),d(5,ei,2,1,"div",24),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.first_name),s("ngClass",y(3,O,((t=o.itemForm.get("first_name"))==null?null:t.invalid)&&(((t=o.itemForm.get("first_name"))==null?null:t.dirty)||((t=o.itemForm.get("first_name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("first_name"))==null?null:e.invalid)&&(((e=o.itemForm.get("first_name"))==null?null:e.dirty)||((e=o.itemForm.get("first_name"))==null?null:e.touched)))}}function ii(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function ni(i,l){if(i&1&&(r(0,"div",44),d(1,ii,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("last_name"))==null||t.errors==null?null:t.errors.required)}}function ri(i,l){if(i&1){let t=E();r(0,"div",47)(1,"div",21)(2,"label",50),m(3,"Last Name:"),n(),r(4,"input",51),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.last_name,o)||(p.item.last_name=o),C(o)}),n(),d(5,ni,2,1,"div",24),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.last_name),s("ngClass",y(3,O,((t=o.itemForm.get("last_name"))==null?null:t.invalid)&&(((t=o.itemForm.get("last_name"))==null?null:t.dirty)||((t=o.itemForm.get("last_name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("last_name"))==null?null:e.invalid)&&(((e=o.itemForm.get("last_name"))==null?null:e.dirty)||((e=o.itemForm.get("last_name"))==null?null:e.touched)))}}function li(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function oi(i,l){if(i&1&&(r(0,"div",44),d(1,li,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("name"))==null||t.errors==null?null:t.errors.required)}}function ai(i,l){if(i&1){let t=E();r(0,"div",47)(1,"div",21)(2,"label",52),m(3,"Name:"),n(),r(4,"input",53),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.name,o)||(p.item.name=o),C(o)}),n(),d(5,oi,2,1,"div",24),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.name),s("ngClass",y(3,O,((t=o.itemForm.get("name"))==null?null:t.invalid)&&(((t=o.itemForm.get("name"))==null?null:t.dirty)||((t=o.itemForm.get("name"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("name"))==null?null:e.invalid)&&(((e=o.itemForm.get("name"))==null?null:e.dirty)||((e=o.itemForm.get("name"))==null?null:e.touched)))}}function mi(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function si(i,l){if(i&1&&(r(0,"div",44),d(1,mi,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("alias"))==null||t.errors==null?null:t.errors.required)}}function di(i,l){if(i&1){let t=E();r(0,"div",47)(1,"div",21)(2,"label",54),m(3,"Alias:"),n(),r(4,"input",55),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.alias,o)||(p.item.alias=o),C(o)}),n(),d(5,si,2,1,"div",24),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.alias),s("ngClass",y(3,O,((t=o.itemForm.get("alias"))==null?null:t.invalid)&&(((t=o.itemForm.get("alias"))==null?null:t.dirty)||((t=o.itemForm.get("alias"))==null?null:t.touched)))),a(),s("ngIf",((e=o.itemForm.get("alias"))==null?null:e.invalid)&&(((e=o.itemForm.get("alias"))==null?null:e.dirty)||((e=o.itemForm.get("alias"))==null?null:e.touched)))}}function pi(i,l){if(i&1&&(r(0,"option",45),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function ci(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function ui(i,l){if(i&1&&(r(0,"div",46),d(1,ci,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("institution_category_id"))==null||t.errors==null?null:t.errors.required)}}function _i(i,l){if(i&1){let t=E();r(0,"div",20)(1,"div",21)(2,"label",56),m(3,"Institution Category:"),n(),r(4,"select",57),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.institution_category_id,o)||(p.item.institution_category_id=o),C(o)}),r(5,"option",27),m(6,"--- Select category ---"),n(),d(7,pi,2,2,"option",28),n(),d(8,ui,2,1,"div",29),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.institution_category_id),s("ngClass",y(4,O,((t=o.itemForm.get("institution_category_id"))==null?null:t.invalid)&&(((t=o.itemForm.get("institution_category_id"))==null?null:t.dirty)||((t=o.itemForm.get("institution_category_id"))==null?null:t.touched)))),a(3),s("ngForOf",o.mInstitutionCategories),a(),s("ngIf",((e=o.itemForm.get("institution_category_id"))==null?null:e.invalid)&&(((e=o.itemForm.get("institution_category_id"))==null?null:e.dirty)||((e=o.itemForm.get("institution_category_id"))==null?null:e.touched)))}}function vi(i,l){if(i&1&&(r(0,"option",45),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function fi(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function gi(i,l){if(i&1&&(r(0,"div",46),d(1,fi,2,0,"div",0),n()),i&2){let t,e=c(2);a(),s("ngIf",(t=e.itemForm.get("institution_id"))==null||t.errors==null?null:t.errors.required)}}function yi(i,l){if(i&1){let t=E();r(0,"div",20)(1,"div",21)(2,"label",58),m(3,"Institution:"),n(),r(4,"select",59),P("ngModelChange",function(o){h(t);let p=c();return w(p.item.institution_id,o)||(p.item.institution_id=o),C(o)}),r(5,"option",27),m(6,"--- Select organization ---"),n(),d(7,vi,2,2,"option",28),n(),d(8,gi,2,1,"div",29),n()()}if(i&2){let t,e,o=c();a(4),T("ngModel",o.item.institution_id),s("ngClass",y(4,O,((t=o.itemForm.get("institution_id"))==null?null:t.invalid)&&(((t=o.itemForm.get("institution_id"))==null?null:t.dirty)||((t=o.itemForm.get("institution_id"))==null?null:t.touched)))),a(3),s("ngForOf",o.mInstitutions),a(),s("ngIf",((e=o.itemForm.get("institution_id"))==null?null:e.invalid)&&(((e=o.itemForm.get("institution_id"))==null?null:e.dirty)||((e=o.itemForm.get("institution_id"))==null?null:e.touched)))}}function hi(i,l){if(i&1&&(r(0,"option",45),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function Ci(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function bi(i,l){if(i&1&&(r(0,"div",46),d(1,Ci,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("role_id"))==null||t.errors==null?null:t.errors.required)}}function xi(i,l){if(i&1&&(r(0,"option",45),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function Si(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Ei(i,l){if(i&1&&(r(0,"div",46),d(1,Si,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("status_id"))==null||t.errors==null?null:t.errors.required)}}function Ii(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Fi(i,l){i&1&&(r(0,"div"),m(1,"Password must be at least 6 characters long."),n())}function Ti(i,l){if(i&1&&(r(0,"div",44),d(1,Ii,2,0,"div",0)(2,Fi,2,0,"div",0),n()),i&2){let t,e,o=c();a(),s("ngIf",(t=o.itemForm.get("password"))==null||t.errors==null?null:t.errors.required),a(),s("ngIf",(e=o.itemForm.get("password"))==null||e.errors==null?null:e.errors.minlength)}}function wi(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Pi(i,l){if(i&1&&(r(0,"div",44),d(1,wi,2,0,"div",0),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("reset_password"))==null||t.errors==null?null:t.errors.required)}}var Me=class i{constructor(l,t,e,o,p,f){this.route=l;this.mUserService=t;this.router=e;this.mToastrService=o;this.mAppContextService=p;this.fb=f;this.itemForm=this.fb.group({email:["",[g.required,g.email]],account_type_id:["",g.required],first_name:["",g.nullValidator],last_name:["",g.nullValidator],name:["",g.nullValidator],alias:["",g.nullValidator],institution_category_id:["",g.nullValidator],institution_id:["",g.nullValidator],role_id:["",g.required],status_id:["",g.required],password:["",[g.nullValidator,g.minLength(6)]],reset_password:[!1,g.nullValidator]})}itemForm;mProgress=!1;mAccountTypes;mInstitutionCategories;mInstitutions;mRoles;mStatuses;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mUserService.getOneItem(this.id).subscribe({next:l=>{l&&(this.item=l,this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mUserService.unpaginatedItems().subscribe({next:l=>{l&&(this.mAccountTypes=l.data.account_types,this.mInstitutionCategories=l.data.institution_categories,this.mInstitutions=l.data.institutions,this.mRoles=l.data.roles,this.mStatuses=l.data.statuses,this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}onSubmit(l){let t={id:this.id,email:l.email,account_type_id:l.account_type_id,first_name:l.first_name,last_name:l.last_name,name:l.name,alias:l.alias,institution_category_id:l.institution_category_id,institution_id:l.institution_id,role_id:l.role_id,status_id:l.status_id,password:l.password,reset_password:l.reset_password};this.mProgress=!0,this.mUserService.updateItem(t).subscribe({next:e=>{e&&(this.mToastrService.success(e.message),this.router.navigateByUrl("/users"),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(t){return new(t||i)(v(Se),v(L),v(Ee),v(A),v(K),v(me))};static \u0275cmp=k({type:i,selectors:[["app-edit"]],standalone:!1,decls:86,vars:41,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","email",1,"form-label","required"],["type","email","formControlName","email",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","account_type_id",1,"form-label","required"],["formControlName","account_type_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["class","col-md-6",4,"ngIf"],["class","col-md-12",4,"ngIf"],["for","role_id",1,"form-label","required"],["formControlName","role_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["for","status_id",1,"form-label","required"],["formControlName","status_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["for","password",1,"form-label","required"],["type","password","formControlName","password",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"text-end"],[1,"form-check","d-inline-block"],["type","checkbox","formControlName","reset_password",1,"form-check-input",3,"ngClass"],["for","reset_password"],["routerLink","/users",1,"btn","btn-danger","me-1"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[1,"col-md-6"],["for","first_name",1,"form-label","required"],["type","text","formControlName","first_name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","last_name",1,"form-label","required"],["type","text","formControlName","last_name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","name",1,"form-label","required"],["type","text","formControlName","name",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","alias",1,"form-label","required1"],["placeholder","e.g., KRA","type","text","formControlName","alias",1,"form-control",3,"ngModelChange","ngModel","ngClass"],["for","institution_category_id",1,"form-label","required"],["formControlName","institution_category_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["for","institution_id",1,"form-label","required"],["formControlName","institution_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"]],template:function(t,e){if(t&1&&(d(0,zt,1,0,"app-progress",0),r(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Users"),n()(),r(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),m(12,"Home"),n()(),r(13,"li",9),m(14,"Users"),n(),r(15,"li",10),m(16,"Edit"),n()()()()()(),r(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15),m(24," Edit User "),n(),u(25,"div",16),n(),r(26,"div",17)(27,"form",18),I("ngSubmit",function(){return e.onSubmit(e.itemForm.value)}),r(28,"div",19)(29,"div",20)(30,"div",21)(31,"label",22),m(32,"Email:"),n(),r(33,"input",23),P("ngModelChange",function(p){return w(e.item.email,p)||(e.item.email=p),p}),n(),d(34,Yt,3,2,"div",24),n()(),r(35,"div",20)(36,"div",21)(37,"label",25),m(38,"Account Type:"),n(),r(39,"select",26),P("ngModelChange",function(p){return w(e.item.account_type_id,p)||(e.item.account_type_id=p),p}),r(40,"option",27),m(41,"--- Select account type ---"),n(),d(42,Kt,2,2,"option",28),n(),d(43,Zt,2,1,"div",29),n()(),d(44,ti,6,5,"div",30)(45,ri,6,5,"div",30)(46,ai,6,5,"div",30)(47,di,6,5,"div",30)(48,_i,9,6,"div",31)(49,yi,9,6,"div",31),r(50,"div",20)(51,"div",21)(52,"label",32),m(53,"Role:"),n(),r(54,"select",33),P("ngModelChange",function(p){return w(e.item.role_id,p)||(e.item.role_id=p),p}),r(55,"option",27),m(56,"--- Select role ---"),n(),d(57,hi,2,2,"option",28),n(),d(58,bi,2,1,"div",29),n()(),r(59,"div",20)(60,"div",21)(61,"label",34),m(62,"Status:"),n(),r(63,"select",35),P("ngModelChange",function(p){return w(e.item.status_id,p)||(e.item.status_id=p),p}),r(64,"option",27),m(65,"Status"),n(),d(66,xi,2,2,"option",28),n(),d(67,Ei,2,1,"div",29),n()(),r(68,"div",20)(69,"div",21)(70,"label",36),m(71,"Password:"),n(),r(72,"input",37),P("ngModelChange",function(p){return w(e.item.password,p)||(e.item.password=p),p}),n(),d(73,Ti,3,2,"div",24),n()(),r(74,"div",20)(75,"div",38)(76,"div",39),u(77,"input",40),r(78,"label",41),m(79," Reset user password?"),n(),d(80,Pi,2,1,"div",24),n()()()(),r(81,"div",38)(82,"a",42),m(83,"Cancel"),n(),r(84,"button",43),m(85,"Submit"),n()()()()()()()()()()),t&2){let o,p,f,b,x,S,M,V,$,ee,te,ie;s("ngIf",e.mProgress),a(27),s("formGroup",e.itemForm),a(6),T("ngModel",e.item.email),s("ngClass",y(29,O,((o=e.itemForm.get("email"))==null?null:o.invalid)&&(((o=e.itemForm.get("email"))==null?null:o.dirty)||((o=e.itemForm.get("email"))==null?null:o.touched)))),a(),s("ngIf",((p=e.itemForm.get("email"))==null?null:p.invalid)&&(((p=e.itemForm.get("email"))==null?null:p.dirty)||((p=e.itemForm.get("email"))==null?null:p.touched))),a(5),T("ngModel",e.item.account_type_id),s("ngClass",y(31,O,((f=e.itemForm.get("account_type_id"))==null?null:f.invalid)&&(((f=e.itemForm.get("account_type_id"))==null?null:f.dirty)||((f=e.itemForm.get("account_type_id"))==null?null:f.touched)))),a(3),s("ngForOf",e.mAccountTypes),a(),s("ngIf",((b=e.itemForm.get("account_type_id"))==null?null:b.invalid)&&(((b=e.itemForm.get("account_type_id"))==null?null:b.dirty)||((b=e.itemForm.get("account_type_id"))==null?null:b.touched))),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==2),a(),s("ngIf",e.itemForm.get("account_type_id").value==1),a(5),T("ngModel",e.item.role_id),s("ngClass",y(33,O,((x=e.itemForm.get("role_id"))==null?null:x.invalid)&&(((x=e.itemForm.get("role_id"))==null?null:x.dirty)||((x=e.itemForm.get("role_id"))==null?null:x.touched)))),a(3),s("ngForOf",e.mRoles),a(),s("ngIf",((S=e.itemForm.get("role_id"))==null?null:S.invalid)&&(((S=e.itemForm.get("role_id"))==null?null:S.dirty)||((S=e.itemForm.get("role_id"))==null?null:S.touched))),a(5),T("ngModel",e.item.status_id),s("ngClass",y(35,O,((M=e.itemForm.get("status_id"))==null?null:M.invalid)&&(((M=e.itemForm.get("status_id"))==null?null:M.dirty)||((M=e.itemForm.get("status_id"))==null?null:M.touched)))),a(3),s("ngForOf",e.mStatuses),a(),s("ngIf",((V=e.itemForm.get("status_id"))==null?null:V.invalid)&&(((V=e.itemForm.get("status_id"))==null?null:V.dirty)||((V=e.itemForm.get("status_id"))==null?null:V.touched))),a(5),T("ngModel",e.item.password),s("ngClass",y(37,O,(($=e.itemForm.get("password"))==null?null:$.invalid)&&((($=e.itemForm.get("password"))==null?null:$.dirty)||(($=e.itemForm.get("password"))==null?null:$.touched)))),a(),s("ngIf",((ee=e.itemForm.get("password"))==null?null:ee.invalid)&&(((ee=e.itemForm.get("password"))==null?null:ee.dirty)||((ee=e.itemForm.get("password"))==null?null:ee.touched))),a(4),s("ngClass",y(39,O,((te=e.itemForm.get("reset_password"))==null?null:te.invalid)&&(((te=e.itemForm.get("reset_password"))==null?null:te.dirty)||((te=e.itemForm.get("reset_password"))==null?null:te.touched)))),a(3),s("ngIf",((ie=e.itemForm.get("reset_password"))==null?null:ie.invalid)&&(((ie=e.itemForm.get("reset_password"))==null?null:ie.dirty)||((ie=e.itemForm.get("reset_password"))==null?null:ie.touched))),a(4),s("disabled",e.itemForm.invalid)}},dependencies:[j,R,N,B,J,oe,ae,H,Ze,le,G,z,Q,Y,q],encapsulation:2})};var dt=We(lt());var Mi=i=>({"is-invalid":i}),ki=(i,l,t)=>({"bg-warning text-dark":i,"bg-success":l,"bg-danger":t}),Ni=(i,l)=>({active:i,disabled:l});function Ai(i,l){i&1&&u(0,"app-progress")}function qi(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function Li(i,l){if(i&1&&(r(0,"div",28),d(1,qi,2,0,"div",1),n()),i&2){let t=c();a(),s("ngIf",t.search_term.errors==null?null:t.search_term.errors.required)}}function Vi(i,l){if(i&1){let t=E();r(0,"tr")(1,"td"),m(2),n(),r(3,"td"),m(4),n(),r(5,"td"),m(6),n(),r(7,"td"),m(8),n(),r(9,"td"),m(10),n(),r(11,"td"),m(12),n(),r(13,"td")(14,"span",32),m(15),n()(),r(16,"td"),m(17),D(18,"date"),n(),r(19,"td",33)(20,"button",34),u(21,"i",35),n(),r(22,"a",36),u(23,"i",37),n(),r(24,"button",38),I("click",function(){let o=h(t).$implicit,p=c(2);return C(p.onDelete(o))}),u(25,"i",39),n(),r(26,"div",40)(27,"div",41)(28,"div",42)(29,"div",43)(30,"h5",44),m(31),n(),u(32,"button",45),n(),r(33,"div",46)(34,"ol",47)(35,"li",48)(36,"div",49)(37,"div",50),m(38,"Parent:"),n()(),r(39,"span",51),m(40),n()(),r(41,"li",48)(42,"div",49)(43,"div",50),m(44,"Child:"),n()(),r(45,"span",51),m(46),n()(),r(47,"li",48)(48,"div",49)(49,"div",50),m(50,"Email Verified At:"),n()(),r(51,"span",51),m(52),D(53,"date"),n()(),r(54,"li",48)(55,"div",49)(56,"div",50),m(57,"Updated At:"),n()(),r(58,"span",51),m(59),D(60,"date"),n()()()(),r(61,"div",52)(62,"button",53),m(63,"Close"),n()()()()()()()}if(i&2){let t=l.$implicit,e=l.index;a(2),F("",e+1,"."),a(2),_(t.full_name),a(2),_(t.type==null?null:t.type.name),a(2),_(t.email),a(2),_(t.role==null?null:t.role.name),a(2),_(t.verification_code),a(2),s("ngClass",Ye(24,ki,t.status_id==1,t.status_id==2,t.status_id==3)),a(),F(" ",t.status==null?null:t.status.name,""),a(2),_(be(18,18,t.created_at)),a(3),Ue("data-bs-target","#modal1"+t.id),a(2),he("routerLink","/users/edit/",t.id,""),a(4),Ue("id","modal1"+t.id),a(5),_(t.name),a(9),_(t.parent==null?null:t.parent.name),a(6),_(t.child==null?null:t.child.name),a(6),_(be(53,20,t.email_verified_at)),a(7),_(be(60,22,t.updated_at))}}function Ui(i,l){if(i&1&&(r(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th"),m(5,"#"),n(),r(6,"th"),m(7,"Name"),n(),r(8,"th"),m(9,"Type"),n(),r(10,"th"),m(11,"Email"),n(),r(12,"th"),m(13,"Role"),n(),r(14,"th"),m(15,"Verification Code"),n(),r(16,"th"),m(17,"Status"),n(),r(18,"th"),m(19,"Created"),n(),r(20,"th"),m(21,"Action"),n()()(),r(22,"tbody"),d(23,Vi,64,28,"tr",31),n()()()),i&2){let t=c();a(23),s("ngForOf",t.mItems)}}function Bi(i,l){if(i&1){let t=E();r(0,"li",56)(1,"a",57),I("click",function(){let o=h(t).$implicit,p=c(2);return C(p.onChangePage(o.url))}),n()()}if(i&2){let t=l.$implicit;s("ngClass",Qe(2,Ni,t.active,!t.url)),a(),s("innerHTML",t.label,je)}}function Oi(i,l){if(i&1&&(r(0,"div")(1,"ul",54),d(2,Bi,2,5,"li",55),n()()),i&2){let t=c();a(2),s("ngForOf",t.links)}}function Di(i,l){i&1&&(r(0,"p",58),m(1,"No items"),n())}var ke=class i{constructor(l,t){this.mUserService=l;this.mToastrService=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new et("",g.required),this.itemForm=new $e({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mUserService.allItems().subscribe({next:l=>{l&&(this.mItems=l.data,this.links=l.links,this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}onChangePage(l){this.mProgress=!0,this.mUserService.paginateItems(l).subscribe({next:t=>{t&&(this.mItems=t.data,this.links=t.links,this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onDelete(l){dt.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&(this.mProgress=!0,this.mUserService.deleteItem(l).subscribe({next:o=>{o&&(this.mItems=this.mItems.filter(p=>p.id!==l.id),this.mToastrService.error(o.message),this.mProgress=!1)},error:o=>{o.error.message&&this.mToastrService.error(o.error.message),this.mProgress=!1}}))})}onSearch(l){this.mProgress=!0,this.mUserService.searchItems(l).subscribe({next:t=>{t&&(this.mItems=t.data,this.mToastrService.success(t.message),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}static \u0275fac=function(t){return new(t||i)(v(L),v(A))};static \u0275cmp=k({type:i,selectors:[["app-index"]],standalone:!1,decls:38,vars:9,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["routerLink","/users/create",1,"btn","btn-danger","btn-sm"],[1,"bi","bi-plus-circle-fill"],[1,"card-tools"],[3,"ngSubmit","formGroup"],[1,"input-group","input-group-sm",2,"width","150px"],["type","text","formControlName","search_term","placeholder","Search",1,"form-control","float-right",3,"ngClass"],[1,"input-group-append"],["type","submit",1,"btn","btn-success"],[1,"bi","bi-search"],["class","invalid-feedback","type","alert",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf","ngIfElse"],["type","alert",1,"invalid-feedback"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"badge","rounded-pill",3,"ngClass"],[1,"text-nowrap"],["data-bs-toggle","modal",1,"btn","btn-outline-dark","btn-sm","me-1"],[1,"bi","bi-eye-fill"],[1,"btn","btn-dark","btn-sm","me-1",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash2-fill"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-success","text-white"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"text-muted"],[1,"modal-footer","bg-dark"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-sm"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(t,e){if(t&1){let o=E();d(0,Ai,1,0,"app-progress",1),r(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),m(7,"Users"),n()(),r(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),m(12,"Home"),n()(),r(13,"li",10),m(14,"Users"),n()()()()()(),r(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"a",16),u(23,"i",17),m(24," Create "),n()(),r(25,"div",18)(26,"form",19),I("ngSubmit",function(){return h(o),C(e.onSearch(e.itemForm.value))}),r(27,"div",20),u(28,"input",21),r(29,"div",22)(30,"button",23),u(31,"i",24),n()(),d(32,Li,2,1,"div",25),n()()()(),r(33,"div",26),d(34,Ui,24,1,"div",27)(35,Oi,3,1,"div",1)(36,Di,2,0,"ng-template",null,0,re),n()()()()()()()}if(t&2){let o=ne(37);s("ngIf",e.mProgress),a(26),s("formGroup",e.itemForm),a(2),s("ngClass",y(7,Mi,e.search_term.invalid&&(e.search_term.dirty||e.search_term.touched))),a(4),s("ngIf",e.search_term.invalid&&(e.search_term.dirty||e.search_term.touched)),a(2),s("ngIf",e.mItems&&e.mItems.length>0)("ngIfElse",o),a(),s("ngIf",e.links)}},dependencies:[j,R,N,B,J,H,G,z,Q,Y,q,Ke],encapsulation:2})};var Hi=()=>["/media/watch"],Gi=i=>({video:i});function zi(i,l){i&1&&u(0,"app-progress")}function Ji(i,l){if(i&1&&(r(0,"div",6)(1,"a",7),u(2,"app-media-card",8),n()()),i&2){let t=l.$implicit;a(),s("routerLink",Ce(3,Hi))("queryParams",y(4,Gi,t.id)),a(),s("data",t)}}function Qi(i,l){if(i&1&&(r(0,"div",4),d(1,Ji,3,6,"div",5),n()),i&2){let t=c();a(),s("ngForOf",t.mItems)}}function Yi(i,l){i&1&&u(0,"app-loader")}function Ki(i,l){i&1&&(r(0,"p",9),m(1,"No items"),n())}var Ne=class i{constructor(l,t){this.mUserService=l;this.mToastrService=t}data;item;mProgress=!1;mItems=[];mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;ngOnInit(){this.item=this.data,this.item&&this.index(this.mCurrentPage)}index(l){this.mCurrentPage===1&&(this.mProgress=!0);let t=typeof l=="string"?l:`?page=${this.mCurrentPage}`;this.mUserService.mediaItems(t,this.item.id).subscribe({next:e=>{this.mCurrentPage===1?this.mItems=e.data:this.mItems=[...this.mItems,...e.data],this.mProgress=!1,this.mLinks=e.links,this.mLoadingMore=!1;let o=this.mLinks.find(p=>p.label==="Next &raquo;");this.mHasMorePages=!!o?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let l=this.mLinks.find(t=>t.label==="Next &raquo;");l?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(l)):this.mHasMorePages=!1}static \u0275fac=function(t){return new(t||i)(v(L),v(A))};static \u0275cmp=k({type:i,selectors:[["app-media"]],inputs:{data:"data"},standalone:!1,decls:8,vars:7,consts:[["noItemsTemplate",""],[4,"ngIf"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"text-decoration-none","text-reset",3,"routerLink","queryParams"],[3,"data"],[1,"p-5","text-center","text-muted"]],template:function(t,e){if(t&1){let o=E();d(0,zi,1,0,"app-progress",1),r(1,"section")(2,"div",2),I("scrolled",function(){return h(o),C(e.onLoadMore())}),d(3,Qi,2,1,"div",3),r(4,"div"),d(5,Yi,1,0,"app-loader",1),n(),d(6,Ki,2,0,"ng-template",null,0,re),n()()}if(t&2){let o=ne(7);s("ngIf",e.mProgress),a(2),s("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!e.mHasMorePages||e.mLoadingMore),a(),s("ngIf",e.mItems&&e.mItems.length>0)("ngIfElse",o),a(2),s("ngIf",e.mLoadingMore)}},dependencies:[R,N,B,q,Te,Ie,we],encapsulation:2})};var pt=We(lt());var De=i=>({"is-invalid":i}),$i=()=>["/media/watch"],en=i=>({playlist:i});function tn(i,l){i&1&&u(0,"app-progress")}function nn(i,l){if(i&1){let t=E();r(0,"div",39)(1,"span",40),u(2,"i",41),n(),r(3,"ul",42)(4,"li")(5,"a",43),I("click",function(){h(t);let o=c().$implicit,p=c(2);return C(p.onEdit(o))}),u(6,"i",44),m(7," Edit"),n()(),r(8,"li")(9,"a",45),I("click",function(){h(t);let o=c().$implicit,p=c(2);return C(p.onDelete(o))}),u(10,"i",46),m(11," Delete"),n()()()()}}function rn(i,l){if(i&1){let t=E();r(0,"div",30)(1,"a",31),u(2,"app-media-card",32),r(3,"div",33)(4,"div",34)(5,"h6",35),m(6),n(),r(7,"div",36),m(8),n()(),r(9,"div",37),I("click",function(o){return h(t),o.preventDefault(),C(o.stopPropagation())}),d(10,nn,12,0,"div",38),n()()()()}if(i&2){let t=l.$implicit,e=c(2);a(),s("routerLink",Ce(6,$i))("queryParams",y(7,en,t.id)),a(),s("data",t),a(4),_(t.name),a(2),F("",t.total_media," media"),a(2),s("ngIf",e.mCurrentUser.id==t.user_id)}}function ln(i,l){if(i&1&&(r(0,"div",28),d(1,rn,11,9,"div",29),n()),i&2){let t=c();a(),s("ngForOf",t.mItems)}}function on(i,l){i&1&&u(0,"app-loader")}function an(i,l){i&1&&(r(0,"p",47),m(1,"No items"),n())}function mn(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function sn(i,l){if(i&1&&(r(0,"div",48),d(1,mn,2,0,"div",1),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("name"))==null||t.errors==null?null:t.errors.required)}}function dn(i,l){if(i&1&&(r(0,"option",49),m(1),n()),i&2){let t=l.$implicit;U("value",t.id),a(),_(t.name)}}function pn(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function cn(i,l){if(i&1&&(r(0,"div",50),d(1,pn,2,0,"div",1),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("type_id"))==null||t.errors==null?null:t.errors.required)}}function un(i,l){i&1&&(r(0,"div"),m(1,"This field is required."),n())}function _n(i,l){if(i&1&&(r(0,"div",48),d(1,un,2,0,"div",1),n()),i&2){let t,e=c();a(),s("ngIf",(t=e.itemForm.get("description"))==null||t.errors==null?null:t.errors.required)}}var Ae=class i{constructor(l,t,e,o,p){this.mUserService=l;this.mToastrService=t;this.mAuthService=e;this.mPlaylistService=o;this.fb=p;this.itemForm=this.fb.group({name:["",g.required],type_id:["",g.required],description:["",g.nullValidator]})}data;item;itemForm;mProgress=!1;mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;mCurrentUser;mItems=[];mTypes=[];mItemToEdit={id:"",name:"",type_id:"",description:""};ngOnInit(){this.item=this.data,this.item&&this.index(this.mCurrentPage),this.mCurrentUser=this.mAuthService?.currentUser,this.unpaginatedItems()}index(l){this.mCurrentPage===1&&(this.mProgress=!0);let t=typeof l=="string"?l:`?page=${this.mCurrentPage}`;this.mUserService.playlistItems(t,this.item.id).subscribe({next:e=>{this.mCurrentPage===1?this.mItems=e.data:this.mItems=[...this.mItems,...e.data],this.mProgress=!1,this.mLinks=e.links,this.mLoadingMore=!1;let o=this.mLinks.find(p=>p.label==="Next &raquo;");this.mHasMorePages=!!o?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let l=this.mLinks.find(t=>t.label==="Next &raquo;");l?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(l)):this.mHasMorePages=!1}unpaginatedItems(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:l=>{l&&(this.mTypes=l.data.types,this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}onDelete(l){pt.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(e=>{e.isConfirmed&&(this.mProgress=!0,this.mPlaylistService.deleteItem(l).subscribe({next:o=>{o&&(this.mItems=this.mItems.filter(p=>p.id!==l.id),this.item=o.item,this.mToastrService.error(o.message),this.mProgress=!1)},error:o=>{o.error.message&&this.mToastrService.error(o.error.message),this.mProgress=!1}}))})}onEdit(l){this.mItemToEdit=Re({},l),this.itemForm.patchValue(this.mItemToEdit)}onSubmit(l){let t={id:this.mItemToEdit.id,name:l.name,type_id:l.type_id,description:l.description};this.mProgress=!0,this.mPlaylistService.updateItem(t).subscribe({next:e=>{if(e){if(e.status==="success"){let o=e.data,p=this.mItems.findIndex(f=>f.id===o.id);p>-1?this.mItems[p]=o:this.mItems=[o,...this.mItems],this.itemForm.reset(),this.mToastrService.success(e.message)}this.mProgress=!1}},error:e=>{e.error.message&&this.mToastrService.error(e.error.message)}})}static \u0275fac=function(t){return new(t||i)(v(L),v(A),v(Fe),v(at),v(me))};static \u0275cmp=k({type:i,selectors:[["app-playlist"]],inputs:{data:"data"},standalone:!1,decls:43,vars:25,consts:[["noItemsTemplate",""],[4,"ngIf"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","row row-cols-1 row-cols-sm-2 row-cols-md-4 g-4",4,"ngIf","ngIfElse"],["form","",3,"ngSubmit","formGroup"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"mb-3"],["for","name",1,"form-label","required"],["formControlName","name",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","description",1,"form-label","required1"],["formControlName","description",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-sm","me-1"],["type","submit","data-bs-dismiss","modal",1,"btn","btn-success","btn-sm",3,"disabled"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-4","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"text-decoration-none","text-reset",3,"routerLink","queryParams"],[3,"data"],[1,"d-flex","align-items-start","mb-3"],[1,"ms-2","flex-grow-1"],[1,"mb-0"],[1,"pt-0","text-muted"],[1,"ms-auto","d-flex","align-items-start",3,"click"],["class","dropdown",4,"ngIf"],[1,"dropdown"],["data-bs-toggle","dropdown","type","button",1,"p-0","border-0","bg-transparent"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu","dropdown-menu-end"],["data-bs-toggle","modal","data-bs-target","#modal",1,"dropdown-item",3,"click"],[1,"bi","bi-pencil"],[1,"dropdown-item",3,"click"],[1,"bi","bi-trash2"],[1,"p-5","text-center","text-muted"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"]],template:function(t,e){if(t&1){let o=E();d(0,tn,1,0,"app-progress",1),r(1,"section")(2,"div",2),I("scrolled",function(){return h(o),C(e.onLoadMore())}),d(3,ln,2,1,"div",3),r(4,"div"),d(5,on,1,0,"app-loader",1),n(),d(6,an,2,0,"ng-template",null,0,re),n()(),r(8,"section")(9,"form",4),I("ngSubmit",function(){return h(o),C(e.onSubmit(e.itemForm.value))}),r(10,"div",5)(11,"div",6)(12,"div",7)(13,"div",8)(14,"h5",9),m(15,"Edit Playlist"),n(),u(16,"button",10),n(),r(17,"div",11)(18,"div",12)(19,"div",13)(20,"div",14)(21,"label",15),m(22,"Name"),n(),r(23,"input",16),P("ngModelChange",function(f){return h(o),w(e.mItemToEdit.name,f)||(e.mItemToEdit.name=f),C(f)}),n(),d(24,sn,2,1,"div",17),n(),r(25,"div",14)(26,"label",18),m(27,"Type:"),n(),r(28,"select",19),P("ngModelChange",function(f){return h(o),w(e.mItemToEdit.type_id,f)||(e.mItemToEdit.type_id=f),C(f)}),r(29,"option",20),m(30,"--- Select type ---"),n(),d(31,dn,2,2,"option",21),n(),d(32,cn,2,1,"div",22),n(),r(33,"div",14)(34,"label",23),m(35,"Description"),n(),r(36,"textarea",24),P("ngModelChange",function(f){return h(o),w(e.mItemToEdit.description,f)||(e.mItemToEdit.description=f),C(f)}),n(),d(37,_n,2,1,"div",17),n()()()(),r(38,"div",25)(39,"button",26),m(40,"Cancel"),n(),r(41,"button",27),m(42,"Save"),n()()()()()()()}if(t&2){let o,p,f,b,x,S,M=ne(7);s("ngIf",e.mProgress),a(2),s("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!e.mHasMorePages||e.mLoadingMore),a(),s("ngIf",e.mItems&&e.mItems.length>0)("ngIfElse",M),a(2),s("ngIf",e.mLoadingMore),a(4),s("formGroup",e.itemForm),a(14),T("ngModel",e.mItemToEdit.name),s("ngClass",y(19,De,((o=e.itemForm.get("name"))==null?null:o.invalid)&&(((o=e.itemForm.get("name"))==null?null:o.dirty)||((o=e.itemForm.get("name"))==null?null:o.touched)))),a(),s("ngIf",((p=e.itemForm.get("name"))==null?null:p.invalid)&&(((p=e.itemForm.get("name"))==null?null:p.dirty)||((p=e.itemForm.get("name"))==null?null:p.touched))),a(4),T("ngModel",e.mItemToEdit.type_id),s("ngClass",y(21,De,((f=e.itemForm.get("type_id"))==null?null:f.invalid)&&(((f=e.itemForm.get("type_id"))==null?null:f.dirty)||((f=e.itemForm.get("type_id"))==null?null:f.touched)))),a(3),s("ngForOf",e.mTypes),a(),s("ngIf",((b=e.itemForm.get("type_id"))==null?null:b.invalid)&&(((b=e.itemForm.get("type_id"))==null?null:b.dirty)||((b=e.itemForm.get("type_id"))==null?null:b.touched))),a(4),T("ngModel",e.mItemToEdit.description),s("ngClass",y(23,De,((x=e.itemForm.get("description"))==null?null:x.invalid)&&(((x=e.itemForm.get("description"))==null?null:x.dirty)||((x=e.itemForm.get("description"))==null?null:x.touched)))),a(),s("ngIf",((S=e.itemForm.get("description"))==null?null:S.invalid)&&(((S=e.itemForm.get("description"))==null?null:S.dirty)||((S=e.itemForm.get("description"))==null?null:S.touched))),a(4),s("disabled",e.itemForm.invalid)}},dependencies:[j,R,N,B,J,oe,ae,H,le,G,z,Q,Y,q,Te,Ie,we],encapsulation:2})};var fn=["chart"];function gn(i,l){i&1&&u(0,"app-progress")}function yn(i,l){if(i&1&&(r(0,"div"),u(1,"apx-chart",39,0),n()),i&2){let t=c();a(),s("series",t.chartOptions.series)("chart",t.chartOptions.chart)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title)}}var qe=class i{constructor(l,t,e,o){this.mAppContextService=l;this.mUserService=t;this.mToastrService=e;this.mAppInfo=o}data;mProgress=!1;item;chart;chartOptions;mMediaPerMonth;mViewsPerMonth;mLikesPerMonth;mCommentsPerMonth;ngOnInit(){this.data&&(this.item=this.data,this.index())}ngAfterViewInit(){this.chartOptions&&this.chart&&this.index()}index(){this.mProgress=!0,this.mUserService.analyticsItem(this.item.id).subscribe({next:l=>{l&&(this.item=l.data,this.mMediaPerMonth=Object.values(this.item.media_per_month),this.mViewsPerMonth=Object.values(this.item.views_per_month),this.mLikesPerMonth=Object.values(this.item.likes_per_month),this.mCommentsPerMonth=Object.values(this.item.comments_per_month),this.analytics(),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}analytics(){this.chartOptions={series:[{name:"Media",data:this.mMediaPerMonth},{name:"Views",data:this.mViewsPerMonth},{name:"Likes",data:this.mLikesPerMonth},{name:"Comments",data:this.mCommentsPerMonth}],chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},title:{text:"Yearly Trend",align:"center"}}}static \u0275fac=function(t){return new(t||i)(v(K),v(L),v(A),v(rt))};static \u0275cmp=k({type:i,selectors:[["app-analytics"]],viewQuery:function(t,e){if(t&1&&He(fn,5),t&2){let o;Ge(o=ze())&&(e.chart=o.first)}},inputs:{data:"data"},standalone:!1,decls:124,vars:48,consts:[["chart",""],[4,"ngIf"],[1,"row"],[1,"col-12","col-sm-6","col-md-3"],[1,"info-box"],[1,"info-box-icon","text-bg-success","shadow-sm"],[1,"bi","bi-gear-fill"],[1,"info-box-content"],[1,"info-box-text"],[1,"info-box-number"],[1,"info-box-icon","text-bg-danger","shadow-sm"],[1,"bi","bi-hand-thumbs-up-fill"],[1,"bi","bi-collection-play-fill"],[1,"info-box-icon","text-bg-warning","shadow-sm"],[1,"bi","bi-people-fill"],[1,"col-md-12"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-8"],[1,"text-center"],["id","report-chart"],[1,"col-md-4"],[1,"progress-group"],[1,"float-end"],[1,"progress","progress-sm"],[1,"progress-bar","text-bg-success"],[1,"progress-bar","text-bg-danger"],[1,"progress-bar","text-bg-warning"],[1,"card-footer"],[1,"col-md-4","col-6"],[1,"text-center","border-end"],[1,"text-success"],[1,"bi","bi-caret-right-fill"],[1,"fw-bold","mb-0"],[1,"text-uppercase"],[1,"text-info"],[1,"text-danger"],[3,"series","chart","xaxis","title"]],template:function(t,e){t&1&&(d(0,gn,1,0,"app-progress",1),r(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),u(6,"i",6),n(),r(7,"div",7)(8,"span",8),m(9,"Memory Usage"),n(),r(10,"span",9),m(11),n()()()(),r(12,"div",3)(13,"div",4)(14,"span",10),u(15,"i",11),n(),r(16,"div",7)(17,"span",8),m(18,"Likes"),n(),r(19,"span",9),m(20),D(21,"number"),n()()()(),r(22,"div",3)(23,"div",4)(24,"span",5),u(25,"i",12),n(),r(26,"div",7)(27,"span",8),m(28,"Media"),n(),r(29,"span",9),m(30),D(31,"number"),n()()()(),r(32,"div",3)(33,"div",4)(34,"span",13),u(35,"i",14),n(),r(36,"div",7)(37,"span",8),m(38,"Total Views"),n(),r(39,"span",9),m(40),D(41,"number"),n()()()()(),r(42,"div",2)(43,"div",15)(44,"div",16)(45,"div",17)(46,"h5",18),m(47,"Recap Report"),n()(),r(48,"div",19)(49,"div",2)(50,"div",20)(51,"p",21)(52,"strong"),m(53),n()(),u(54,"div",22),d(55,yn,3,4,"div",1),n(),r(56,"div",23)(57,"p",21)(58,"strong"),m(59,"Overview"),n()(),r(60,"div",24),m(61," Memory "),r(62,"span",25)(63,"b"),m(64),n(),m(65),n(),r(66,"div",26),u(67,"div",27),n()(),r(68,"div",24),m(69," Likes "),r(70,"span",25)(71,"b"),m(72),n(),m(73),n(),r(74,"div",26),u(75,"div",27),n()(),r(76,"div",24),m(77," Media "),r(78,"span",25)(79,"b"),m(80),n(),m(81),n(),r(82,"div",26),u(83,"div",28),n()(),r(84,"div",24),m(85," Views "),r(86,"span",25)(87,"b"),m(88),n(),m(89),n(),r(90,"div",26),u(91,"div",29),n()()()()(),r(92,"div",30)(93,"div",2)(94,"div",31)(95,"div",32)(96,"span",33),u(97,"i",34),m(98),n(),r(99,"h5",35),m(100),D(101,"number"),n(),r(102,"span",36),m(103,"TOTAL COMMENTS"),n()()(),r(104,"div",31)(105,"div",32)(106,"span",37),u(107,"i",34),m(108),n(),r(109,"h5",35),m(110),D(111,"number"),n(),r(112,"span",36),m(113,"TOTAL VIEWS"),n()()(),r(114,"div",31)(115,"div",21)(116,"span",38),u(117,"i",34),m(118),n(),r(119,"h5",35),m(120),D(121,"number"),n(),r(122,"span",36),m(123,"TOTAL MEDIA"),n()()()()()()()()()),t&2&&(s("ngIf",e.mProgress),a(11),F(" ",e.mAppContextService.formatMemory(e.item==null?null:e.item.my_total_memory)," "),a(9),_(Z(21,30,e.item.my_total_likes,"1.0-0")),a(10),_(Z(31,33,e.item.my_total_media,"1.0-0")),a(10),_(Z(41,36,e.item.my_total_views,"1.0-0")),a(13),Je("Analytics: 1 Jan,",e.mAppInfo.year," - 31 Dec,",e.mAppInfo.year,""),a(2),s("ngIf",e.chartOptions),a(9),_(e.mAppContextService.formatMemory(e.item.my_total_memory)),a(),F("/",e.mAppContextService.formatMemory(e.item.total_memory),""),a(2),_e("width",e.item.total_memory_percentage,"%"),a(5),_(e.item.my_total_likes),a(),F("/",e.item.total_likes,""),a(2),_e("width",e.item.total_likes_percentage,"%"),a(5),_(e.item.my_total_media),a(),F("/",e.item.total_media,""),a(2),_e("width",e.item.total_media_percentage,"%"),a(5),_(e.item.my_total_views),a(),F("/",e.item.total_views,""),a(2),_e("width",e.item.total_views_percentage,"%"),a(7),F(" ",e.item.total_comments_percentage,"%"),a(2),_(Z(101,39,e.item.my_total_comments,"1.0-0")),a(8),F(" ",e.item.total_views_percentage,"%"),a(2),_(Z(111,42,e.item.my_total_views,"1.0-0")),a(8),F(" ",e.item.total_media_percentage,"%"),a(2),_(Z(121,45,e.item.my_total_media,"1.0-0")))},dependencies:[N,q,mt,Xe],encapsulation:2})};function Cn(i,l){i&1&&u(0,"app-progress")}function bn(i,l){i&1&&(r(0,"button",39),m(1," Analytics "),n())}function xn(i,l){if(i&1&&(r(0,"a",40),u(1,"i",41),m(2," Edit Profile "),n()),i&2){let t=c();he("routerLink","/profile/edit/",t.item.id,"")}}function Sn(i,l){if(i&1&&u(0,"app-media",42),i&2){let t=c();s("data",t.item)}}function En(i,l){if(i&1&&u(0,"app-playlist",42),i&2){let t=c();s("data",t.item)}}function In(i,l){if(i&1&&u(0,"app-analytics",42),i&2){let t=c();s("data",t.item)}}var Le=class i{constructor(l,t,e,o,p){this.mAuthService=l;this.mAppContextService=t;this.mUserService=e;this.mToastrService=o;this.route=p}mCurrentUser;id;item;mProgress=!1;showPlaylist=!1;ngOnInit(){this.mCurrentUser=this.mAuthService.currentUser,this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mUserService.getOneItem(this.id).subscribe({next:l=>{l&&(this.item=l,setTimeout(()=>this.showPlaylist=!0),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}static \u0275fac=function(t){return new(t||i)(v(Fe),v(K),v(L),v(A),v(Se))};static \u0275cmp=k({type:i,selectors:[["app-show"]],standalone:!1,decls:74,vars:10,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"user-image","rounded-circle","bg-success","text-white","fw-bold","d-inline-flex","justify-content-center","align-items-center","me-3",2,"width","64px","height","64px","font-size","1rem"],[1,"mb-0","fw-semibold"],[1,"text-muted"],["id","myTab","role","tablist",1,"nav","nav-tabs","border-0"],["role","presentation",1,"nav-item"],["id","home-tab","data-bs-toggle","tab","data-bs-target","#home","type","button","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active","border-0","text-uppercase","text-sm"],["id","media-tab","data-bs-toggle","tab","data-bs-target","#media","type","button","role","tab","aria-controls","media","aria-selected","false",1,"nav-link","border-0","text-uppercase","text-sm"],["id","playlist-tab","data-bs-toggle","tab","data-bs-target","#playlist","type","button","role","tab","aria-controls","playlist","aria-selected","false",1,"nav-link","border-0","text-uppercase","text-sm"],["class","nav-link border-0 text-uppercase text-sm","id","analytics-tab","data-bs-toggle","tab","data-bs-target","#analytics","type","button","role","tab","aria-controls","analytics","aria-selected","false",4,"ngIf"],[1,"card-tools"],["class","btn btn-danger  btn-sm",3,"routerLink",4,"ngIf"],[1,"card-body"],["id","myTabContent",1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"my-2"],[1,"mb-3"],["for","bio",1,"form-label"],["id","media","role","tabpanel","aria-labelledby","media-tab",1,"tab-pane","fade"],["for","analytics",1,"form-label"],[3,"data",4,"ngIf"],["id","playlist","role","tabpanel","aria-labelledby","media-tab",1,"tab-pane","fade"],["id","analytics","role","tabpanel","aria-labelledby","media-tab",1,"tab-pane","fade"],["id","analytics-tab","data-bs-toggle","tab","data-bs-target","#analytics","type","button","role","tab","aria-controls","analytics","aria-selected","false",1,"nav-link","border-0","text-uppercase","text-sm"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"bi","bi-pencil-fill"],[3,"data"]],template:function(t,e){t&1&&(d(0,Cn,1,0,"app-progress",0),r(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),m(7,"Users"),n()(),r(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),m(12,"Home"),n()(),r(13,"li",9),m(14,"Users"),n(),r(15,"li",10),m(16,"Show"),n()()()()()(),r(17,"div",11)(18,"div",2)(19,"div",3)(20,"div",12)(21,"div",13)(22,"div",14)(23,"div",15)(24,"div",16)(25,"span",17),m(26),n(),r(27,"div")(28,"p",18),m(29),n(),r(30,"small",19),m(31),n()()(),r(32,"ul",20)(33,"li",21)(34,"button",22),m(35," About "),n()(),r(36,"li",21)(37,"button",23),m(38," Media "),n()(),r(39,"li",21)(40,"button",24),m(41," Playlist "),n()(),r(42,"li",21),d(43,bn,2,0,"button",25),n()()(),r(44,"div",26),d(45,xn,3,2,"a",27),n()(),r(46,"div",28)(47,"div")(48,"div",29)(49,"div",30)(50,"div",31)(51,"div",32)(52,"label",33),m(53,"Biography:"),n(),r(54,"div",19),m(55),n()()()(),r(56,"div",34)(57,"div",31)(58,"div",32)(59,"label",35),m(60,"Uploads:"),n(),d(61,Sn,1,1,"app-media",36),n()()(),r(62,"div",37)(63,"div",31)(64,"div",32)(65,"label",35),m(66,"Playlist:"),n(),d(67,En,1,1,"app-playlist",36),n()()(),r(68,"div",38)(69,"div",31)(70,"div",32)(71,"label",35),m(72,"Analytics:"),n(),d(73,In,1,1,"app-analytics",36),n()()()()()()()()()()()()),t&2&&(s("ngIf",e.mProgress),a(26),F(" ",e.mAppContextService.getInitials(e.item==null?null:e.item.full_name)," "),a(3),_(e.item==null?null:e.item.full_name),a(2),_(e.item==null||e.item.role==null?null:e.item.role.name),a(12),s("ngIf",(e.item==null?null:e.item.id)==(e.mCurrentUser==null?null:e.mCurrentUser.id)),a(2),s("ngIf",(e.item==null?null:e.item.id)==(e.mCurrentUser==null?null:e.mCurrentUser.id)),a(10),_(e.item==null?null:e.item.bio),a(6),s("ngIf",e.item),a(6),s("ngIf",e.showPlaylist),a(6),s("ngIf",e.item))},dependencies:[N,B,q,Ne,Ae,qe],encapsulation:2})};var Fn=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ke,data:{title:"Index"}},{path:"create",component:Pe,data:{title:"Create"}},{path:"edit/:id",component:Me,data:{title:"Edit"}},{path:"show/:id",component:Le,data:{title:"Show"}}],Ve=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=ye({type:i});static \u0275inj=ge({imports:[xe,ve.forChild(Fn),ve]})};var ct=class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=ye({type:i});static \u0275inj=ge({imports:[xe,ve,tt,it,nt,Ve,st,ot]})};export{ct as UserModule};
