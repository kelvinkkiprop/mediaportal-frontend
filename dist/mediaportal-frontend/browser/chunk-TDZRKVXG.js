import{a as ut}from"./chunk-NL2QEAEC.js";import{a as pt}from"./chunk-24UOGDB5.js";import{a as Ye,c as et,d as tt,e as ye,f as it,g as nt,k as rt,m as ot,n as st,r as at,s as lt,t as dt}from"./chunk-FJ5YBQ2M.js";import{h as L,j}from"./chunk-ESNP5LCJ.js";import{a as ct,b as g,c as N,f as mt}from"./chunk-7GOWLBG5.js";import{$ as Ae,Aa as u,B as Fe,Ba as Y,C as ke,Ca as $,D as Z,E as K,F as De,H as W,Ha as Be,I as _,Ia as ee,J as Re,Ja as be,K as p,L as Le,M as fe,N as Ne,Oa as Ce,Q as je,Qa as Ge,T as d,W as Pe,X as b,Y as x,Ya as Qe,Z as k,Za as Je,_ as Ve,_a as D,a as xe,aa as h,ab as te,b as Q,bb as Ze,ea as c,f as ce,fa as ze,g as _e,ga as He,gb as ie,h as J,i as me,ia as ve,ja as a,jb as Ke,k as Me,ka as s,kb as We,l as we,la as f,m as ue,mb as R,n as T,nb as ne,oa as Ue,ob as Xe,p as pe,q as Ie,qa as H,qb as B,r as Te,ra as C,s as Oe,sa as $e,ta as X,u as he,v as O,va as ge,w as q,x as qe,y as F,z as y,za as U}from"./chunk-EN7VB6NI.js";import{g as G}from"./chunk-GAL4ENT6.js";var re={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},Ee=new qe("config",{providedIn:"root",factory:()=>({modules:re})});function P(i){i||(Fe(P),i=y(W));let n=new Q(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(Te(n))}var Mt=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],wt=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function It(i,n){i&1&&f(0,"div",0)}function Tt(i,n){i&1&&f(0,"div",0)}var oe=(i,n)=>i||n||"html",Ot=()=>new Q(i=>{let n=requestAnimationFrame(()=>{i.next(),i.complete()});return()=>cancelAnimationFrame(n)}),qt=(()=>{class i{constructor(){this.config=y(Ee)||{modules:re},this.quill$=we(()=>G(this,null,function*(){if(!this.Quill){let e=document.addEventListener;document.addEventListener=document.__zone_symbol__addEventListener||document.addEventListener;let{Quill:t}=yield import("./chunk-AAUYG7N6.js");document.addEventListener=e,this.Quill=t}return this.config.customOptions?.forEach(e=>{let t=this.Quill.import(e.import);t.whitelist=e.whitelist,this.Quill.register(t,!0,this.config.suppressGlobalRegisterWarning)}),new Promise(e=>{this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning).subscribe(e)})})).pipe(Ie({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(e,t,r=this.config.beforeRender){let o=[this.registerCustomModules(e,t)];return r&&o.push(r()),ue(o).pipe(me(()=>e))}registerCustomModules(e,t,r){if(!Array.isArray(t))return ce(e);let o=[];for(let l of t){let{path:m,implementation:v}=l;this.registeredModules.has(m)||(this.registeredModules.add(m),_e(v)?o.push(v.pipe(Oe(E=>{e.register(m,E,r)}))):e.register(m,v,r))}return o.length>0?ue(o).pipe(me(()=>e)):ce(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ft=(()=>{class i{constructor(){this.format=p(void 0),this.theme=p(void 0),this.modules=p(void 0),this.debug=p(!1),this.readOnly=p(!1),this.placeholder=p(void 0),this.maxLength=p(void 0),this.minLength=p(void 0),this.required=p(!1),this.formats=p(void 0),this.customToolbarPosition=p("top"),this.sanitize=p(void 0),this.beforeRender=p(void 0),this.styles=p(null),this.registry=p(void 0),this.bounds=p(void 0),this.customOptions=p([]),this.customModules=p([]),this.trackChanges=p(void 0),this.classes=p(void 0),this.trimOnValidation=p(!1),this.linkPlaceholder=p(void 0),this.compareValues=p(!1),this.filterNull=p(!1),this.debounceTime=p(void 0),this.defaultEmptyValue=p(null),this.onEditorCreated=new _,this.onEditorChanged=new _,this.onContentChanged=new _,this.onSelectionChanged=new _,this.onFocus=new _,this.onBlur=new _,this.onNativeFocus=new _,this.onNativeBlur=new _,this.disabled=!1,this.toolbarPosition=fe("top"),this.eventsSubscription=null,this.quillSubscription=null,this.elementRef=y(Le),this.cd=y(Ge),this.domSanitizer=y(Ke),this.platformId=y(Ne),this.renderer=y(Pe),this.zone=y(Re),this.service=y(qt),this.destroyRef=y(W),this.valueGetter=p(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let r=t,o=oe(this.format(),this.service.config.format);if(o==="text")r=e.getText();else if(o==="object")r=e.getContents();else if(o==="json")try{r=JSON.stringify(e.getContents())}catch{r=e.getText()}return r}),this.valueSetter=p((e,t)=>{let r=oe(this.format(),this.service.config.format);if(r==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(je.HTML,t)),e.clipboard.convert({html:t});if(r==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,r)=>{let o=this.trackChanges()||this.service.config.trackChanges,l=!e&&!!this.onModelTouched&&(r==="user"||o&&o==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!l||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:r}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:r}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:r}),l&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,r)=>{let o=this.quillEditor.getText(),l=this.quillEditor.getContents(),m=this.quillEditor.getSemanticHTML();this.isEmptyValue(m)&&(m=this.defaultEmptyValue());let v=this.trackChanges()||this.service.config.trackChanges,E=(r==="user"||v&&v==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!E||this.zone.run(()=>{if(E){let M=this.valueGetter();this.onModelChange(M(this.quillEditor))}this.onContentChanged.emit({content:l,delta:e,editor:this.quillEditor,html:m,oldDelta:t,source:r,text:o}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,r,o)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let l=this.quillEditor.getText(),m=this.quillEditor.getContents(),v=this.quillEditor.getSemanticHTML();this.isEmptyValue(v)&&(v=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:m,delta:t,editor:this.quillEditor,event:e,html:v,oldDelta:r,source:o,text:l}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:r,range:t,source:o}),this.cd.markForCheck()})},this.destroyRef.onDestroy(()=>{this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null})}static normalizeClassNames(e){return e.trim().split(" ").reduce((r,o)=>{let l=o.trim();return l&&r.push(l),r},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){Ze(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(Me(e=>this.service.beforeRender(e,this.customModules(),this.beforeRender()))).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=Object.assign({},this.modules()||this.service.config.modules);t?r.toolbar=t:r.toolbar===void 0&&(r.toolbar=re.toolbar);let o=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;o===void 0&&(o="Insert text here ...");let l=this.styles();l&&Object.keys(l).forEach(S=>{this.renderer.setStyle(this.editorElem,S,l[S])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(S=>{let w=e.import(S.import);w.whitelist=S.whitelist,e.register(w,!0)});let m=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();m||(m=this.service.config.bounds?this.service.config.bounds:document.body);let v=this.debug();!v&&v!==!1&&this.service.config.debug&&(v=this.service.config.debug);let E=this.readOnly();!E&&this.readOnly()!==!1&&(E=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let M=this.formats();if(!M&&M===void 0&&(M=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:m,debug:v,formats:M,modules:r,placeholder:o,readOnly:E,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){T(this.quillEditor.scroll.domNode,"blur").pipe(P(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));let S=this.quillEditor.getModule("toolbar");S.container&&T(S.container,"mousedown").pipe(P(this.destroyRef)).subscribe(w=>w.preventDefault())}if(this.onNativeFocus.observed&&T(this.quillEditor.scroll.domNode,"focus").pipe(P(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let w=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");w?.dataset&&(w.dataset.link=this.linkPlaceholder())}}),this.content){if(oe(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let _t=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(_t,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&Ot().pipe(P(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){let t=e.styles.currentValue,r=e.styles.previousValue;r&&Object.keys(r).forEach(o=>{this.renderer.removeStyle(this.editorElem,o)}),t&&Object.keys(t).forEach(o=>{this.renderer.setStyle(this.editorElem,o,this.styles()[o])})}if(e.classes){let t=e.classes.currentValue,r=e.classes.previousValue;r&&this.removeClasses(r),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let t=oe(this.format(),this.service.config.format),o=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let l=this.quillEditor.getContents();if(JSON.stringify(l)===JSON.stringify(o))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(o);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,r=this.quillEditor.getText(),o=this.trimOnValidation()?r.trim().length:r.length===1&&r.trim().length===0?0:r.length-1,l=this.quillEditor.getContents().ops,m=!!l&&l.length===1&&[`
`,""].includes(l[0].insert?.toString());return this.minLength()&&o&&o<this.minLength()&&(e.minLengthError={given:o,minLength:this.minLength()},t=!1),this.maxLength()&&o>this.maxLength()&&(e.maxLengthError={given:o,maxLength:this.maxLength()},t=!1),this.required()&&!o&&m&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.eventsSubscription=new xe,this.eventsSubscription.add(T(this.quillEditor,"selection-change").subscribe(([r,o,l])=>{this.selectionChangeHandler(r,o,l)}));let e=T(this.quillEditor,"text-change"),t=T(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(pe(this.debounceTime())),t=t.pipe(pe(this.debounceTime()))),this.eventsSubscription.add(e.subscribe(([r,o,l])=>{this.textChangeHandler(r,o,l)})),this.eventsSubscription.add(t.subscribe(([r,o,l,m])=>{this.editorChangeHandler(r,o,l,m)}))})}dispose(){this.eventsSubscription?.unsubscribe(),this.eventsSubscription=null}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Ve({type:i,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[ke]})}}return i})(),ht=(()=>{class i extends Ft{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=De(i)))(r||i)}})()}static{this.\u0275cmp=x({type:i,selectors:[["quill-editor"]],features:[Be([{multi:!0,provide:Ye,useExisting:he(()=>i)},{multi:!0,provide:tt,useExisting:he(()=>i)}]),Ae],ngContentSelectors:wt,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,r){t&1&&($e(Mt),h(0,It,1,0,"div",0),X(1),X(2,1),X(3,2),h(4,Tt,1,0,"div",0)),t&2&&(ve(r.toolbarPosition()!=="top"?0:-1),d(4),ve(r.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return i})();var ft=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:Ee,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=k({type:i})}static{this.\u0275inj=q({})}}return i})();var se=class i{constructor(n,e){this.mAppContextService=n;this.http=e}createItem(n){let e=`${g.base_url}/upload`;return this.http.post(e,n)}initUpload(n,e){let t=`${g.base_url}/upload/init`;return this.http.post(t,{filename:n,title:e})}uploadChunk(n,e,t){let r=new FormData;r.append("uploadId",n),r.append("chunkIndex",e.toString()),r.append("file",t,`chunk_${e}`);let o=`${g.base_url}/upload/chunk`;return this.http.post(o,r,{reportProgress:!0,observe:"events"})}completeUpload(n,e,t,r){let o=`${g.base_url}/upload/complete`;return this.http.post(o,{uploadId:n,totalChunks:e,title:t,description:r})}static \u0275fac=function(e){return new(e||i)(F(N),F(ie))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var gt=i=>({"is-invalid":i}),Lt=()=>({height:"150px"});function Nt(i,n){i&1&&f(0,"app-progress")}function jt(i,n){i&1&&(a(0,"p"),u(1,"Drag & drop a video here, or click to select"),s())}function Pt(i,n){if(i&1&&(a(0,"p"),u(1),s()),i&2){let e=C();d(),$("Selected: ",e.selectedFile.name,"")}}function Vt(i,n){i&1&&(a(0,"div"),u(1,"This field is required."),s())}function At(i,n){if(i&1&&(a(0,"div",33),h(1,Vt,2,0,"div",1),s()),i&2){let e,t=C();d(),c("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function zt(i,n){i&1&&(a(0,"div"),u(1,"This field is required."),s())}function Ht(i,n){if(i&1&&(a(0,"div",33),h(1,zt,2,0,"div",1),s()),i&2){let e,t=C();d(),c("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Ut(i,n){if(i&1&&(a(0,"div")(1,"div",34)(2,"div",35),u(3),s()()()),i&2){let e=C();d(2),ze("width",e.progress,"%"),d(),$("",e.progress,"%")}}function $t(i,n){i&1&&(a(0,"a",36),u(1,"Run in Background"),s())}var ae=class i{constructor(n,e,t,r){this.mToastrService=n;this.mUploadService=e;this.fb=t;this.router=r;this.itemForm=this.fb.group({title:["",ye.required],description:["",ye.required]})}selectedFile=null;progress=0;isDragging=!1;itemForm;mProgress=!1;onSubmit(n){this.mProgress=!0,this.upload(n.title,n.description)}onDragOver(n){n.preventDefault(),this.isDragging=!0}onDragLeave(n){n.preventDefault(),this.isDragging=!1}onDrop(n){n.preventDefault(),this.isDragging=!1,n.dataTransfer?.files.length&&(this.selectedFile=n.dataTransfer.files[0])}onFileSelected(n){this.selectedFile=n.target.files[0]}upload(n,e){return G(this,null,function*(){if(!this.selectedFile||this.itemForm.invalid){this.mToastrService.warning("Please fill out all fields and select a file.");return}let t=5*1024*1024,r=Math.ceil(this.selectedFile.size/t),l=(yield J(this.mUploadService.initUpload(this.selectedFile.name,n))).uploadId;for(let m=0;m<r;m++){let v=m*t,E=Math.min(v+t,this.selectedFile.size),M=this.selectedFile.slice(v,E);yield J(this.mUploadService.uploadChunk(l,m,M).pipe()),this.mProgress=!1,this.progress=Math.round((m+1)/r*100)}yield J(this.mUploadService.completeUpload(l,r,n,e)),this.mToastrService.success("Media uploaded complete!"),this.router.navigateByUrl("/media")})}static \u0275fac=function(e){return new(e||i)(b(L),b(se),b(at),b(R))};static \u0275cmp=x({type:i,selectors:[["app-create"]],hostBindings:function(e,t){e&1&&H("dragover",function(o){return t.onDragOver(o)})("dragleave",function(o){return t.onDragLeave(o)})("drop",function(o){return t.onDrop(o)})},standalone:!1,decls:54,vars:20,consts:[["fileInput",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],[1,"dropzone"],["type","file","hidden","","accept","video/*",3,"change"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","description",1,"form-label","required"],["formControlName","description",1,"w-100",3,"styles","ngClass"],[1,"text-end"],["routerLink","/my-media","class","btn btn-danger me-1",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger","progress-bar-striped","progress-bar-animated"],["routerLink","/my-media",1,"btn","btn-danger","me-1"]],template:function(e,t){if(e&1){let r=Ue();h(0,Nt,1,0,"app-progress",1),a(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),u(7,"Media"),s()(),a(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),u(12,"Home"),s()(),a(13,"li",10),u(14,"Media"),s(),a(15,"li",11),u(16,"Create"),s()()()()(),a(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),u(22," Create Media "),s(),f(23,"div",16),s(),a(24,"div",17)(25,"form",18),H("ngSubmit",function(){return Z(r),K(t.onSubmit(t.itemForm.value))}),a(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),h(30,jt,2,0,"p",1)(31,Pt,2,1,"p",1),a(32,"input",23,0),H("change",function(l){return Z(r),K(t.onFileSelected(l))}),s(),a(34,"button",24),H("click",function(){Z(r);let l=U(33);return K(l.click())}),u(35,"Choose File"),s()()()(),a(36,"div",20)(37,"div",21)(38,"label",25),u(39,"Title:"),s(),f(40,"input",26),h(41,At,2,1,"div",27),s()()(),a(42,"div",20)(43,"div",21)(44,"label",28),u(45,"Description:"),s(),f(46,"quill-editor",29),h(47,Ht,2,1,"div",27),s()(),a(48,"div",21),h(49,Ut,4,3,"div",1),s(),a(50,"div",30),h(51,$t,2,0,"a",31),a(52,"button",32),u(53,"Submit"),s()()()()()()()()()}if(e&2){let r,o,l,m;c("ngIf",t.mProgress),d(25),c("formGroup",t.itemForm),d(4),He("dragging",t.isDragging),d(),c("ngIf",!t.selectedFile),d(),c("ngIf",t.selectedFile),d(9),c("ngModel",t.selectedFile==null?null:t.selectedFile.name)("ngClass",be(15,gt,((r=t.itemForm.get("title"))==null?null:r.invalid)&&(((r=t.itemForm.get("title"))==null?null:r.dirty)||((r=t.itemForm.get("title"))==null?null:r.touched)))),d(),c("ngIf",((o=t.itemForm.get("title"))==null?null:o.invalid)&&(((o=t.itemForm.get("title"))==null?null:o.dirty)||((o=t.itemForm.get("title"))==null?null:o.touched))),d(5),c("styles",ee(17,Lt))("ngClass",be(18,gt,((l=t.itemForm.get("description"))==null?null:l.invalid)&&(((l=t.itemForm.get("description"))==null?null:l.dirty)||((l=t.itemForm.get("description"))==null?null:l.touched)))),d(),c("ngIf",((m=t.itemForm.get("description"))==null?null:m.invalid)&&(((m=t.itemForm.get("description"))==null?null:m.dirty)||((m=t.itemForm.get("description"))==null?null:m.touched))),d(2),c("ngIf",t.progress>0),d(2),c("ngIf",t.progress>0),d(),c("disabled",!t.selectedFile||t.itemForm.invalid)}},dependencies:[Qe,D,ne,rt,et,it,nt,ot,st,ht,j],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #bbb;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:.2s}.dropzone.dragging[_ngcontent-%COMP%]{background-color:#eef6ff;border-color:#3b82f6}"]})};var V=class i{constructor(n,e){this.mAppContextService=n;this.http=e}allItems(){let n=`${g.base_url}/media`;return this.http.get(n,this.mAppContextService.getHttpOptions())}createItem(n){let e=`${g.base_url}/media`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}getOneItem(n){let e=`${g.base_url}/media/${n}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(n){let e=`${g.base_url}/media/${n.id}`;return this.http.put(e,n,this.mAppContextService.getHttpOptions())}deleteItem(n){let e=`${g.base_url}/media/${n.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(n){return this.http.get(n,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let n=`${g.base_url}/unpaginated-items-media`;return this.http.get(n,this.mAppContextService.getHttpOptions())}searchItems(n){let e=`${g.base_url}/search-media`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}upload(n){let e=`${g.base_url}/upload`;return this.http.post(e,n)}initUpload(n,e){let t=`${g.base_url}/upload/init`;return this.http.post(t,{filename:n,title:e})}uploadChunk(n,e,t){let r=new FormData;r.append("uploadId",n),r.append("chunkIndex",e.toString()),r.append("file",t,`chunk_${e}`);let o=`${g.base_url}/upload/chunk`;return this.http.post(o,r,{reportProgress:!0,observe:"events"})}completeUpload(n,e,t,r){let o=`${g.base_url}/upload/complete`;return this.http.post(o,{uploadId:n,totalChunks:e,title:t,description:r})}static \u0275fac=function(e){return new(e||i)(F(N),F(ie))};static \u0275prov=O({token:i,factory:i.\u0275fac,providedIn:"root"})};var Bt=()=>({exact:!0});function Gt(i,n){i&1&&f(0,"app-progress")}function Qt(i,n){if(i&1&&(a(0,"div",25)(1,"div",26)(2,"label",27),u(3,"Biography:"),s(),a(4,"div",13),u(5),s()()()),i&2){let e=C();d(5),Y(e.mCurrentUser.bio)}}function Jt(i,n){if(i&1&&(a(0,"div"),f(1,"app-media-card",33),s()),i&2){let e=C().$implicit;d(),c("data",e)}}function Zt(i,n){if(i&1&&(a(0,"div",32),h(1,Jt,2,1,"div",1),s()),i&2){let e=n.$implicit;d(),c("ngIf",e)}}function Kt(i,n){if(i&1&&(a(0,"div",30),h(1,Zt,2,1,"div",31),s()),i&2){let e=C(2);d(),c("ngForOf",e.myMedia)}}function Wt(i,n){i&1&&(a(0,"p",34),u(1,"No items"),s())}function Xt(i,n){if(i&1&&(a(0,"div",25)(1,"div",26)(2,"label",28),u(3,"Uploads:"),s(),h(4,Kt,2,1,"div",29)(5,Wt,2,0,"ng-template",null,0,Ce),s()()),i&2){let e=U(6),t=C();d(4),c("ngIf",t.myMedia&&t.myMedia.length>0)("ngIfElse",e)}}function Yt(i,n){if(i&1&&(a(0,"a",36),f(1,"app-media-card",33),s()),i&2){let e=C().$implicit;ge("routerLink","/media/",e.id,"/show"),d(),c("data",e)}}function ei(i,n){if(i&1&&(a(0,"div",32),h(1,Yt,2,3,"a",35),s()),i&2){let e=n.$implicit;d(),c("ngIf",e)}}function ti(i,n){if(i&1&&(a(0,"div",30),h(1,ei,2,1,"div",31),s()),i&2){let e=C(2);d(),c("ngForOf",e.myPlaylists)}}function ii(i,n){i&1&&(a(0,"p",34),u(1,"No items"),s())}function ni(i,n){if(i&1&&(a(0,"div",25)(1,"div",26)(2,"label",27),u(3,"Playlists:"),s(),h(4,ti,2,1,"div",29)(5,ii,2,0,"ng-template",null,0,Ce),s()()),i&2){let e=U(6),t=C();d(4),c("ngIf",t.myPlaylists&&t.myPlaylists.length>0)("ngIfElse",e)}}var A=class i{constructor(n,e,t,r,o){this.mAuthService=n;this.mAppContextService=e;this.mMediaService=t;this.mToastrService=r;this.router=o}mCurrentUser;mInitials;itemForm;mProgress=!1;myMedia;myPlaylists;ngOnInit(){this.mCurrentUser=this.mAuthService.currentUser,this.mInitials=this.mCurrentUser.name.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),this.index(this.mCurrentUser.id)}index(n){this.mProgress=!0,this.mMediaService.getOneItem(n).subscribe({next:e=>{e&&(this.myMedia=e.data.my_media,this.myPlaylists=e.data.my_playlists,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(b(ut),b(N),b(V),b(L),b(R))};static \u0275cmp=x({type:i,selectors:[["app-edit"]],standalone:!1,decls:38,vars:11,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"user-image","rounded-circle","bg-success","text-white","fw-bold","d-inline-flex","justify-content-center","align-items-center","me-3",2,"width","64px","height","64px","font-size","1rem"],[1,"mb-0","fw-semibold"],[1,"text-muted"],["id","myTab","role","tablist",1,"nav","nav-tabs","border-0","text-uppercase"],["role","presentation",1,"nav-item"],["routerLink","/media/about","routerLinkActive","active","id","home-tab","data-bs-toggle","tab","data-bs-target","#home","type","button","role","tab","aria-controls","home",1,"nav-link","border-0","text-uppercase","text-sm",3,"routerLinkActiveOptions"],["routerLink","/media/index","routerLinkActive","active","id","media-tab","data-bs-toggle","tab","data-bs-target","#media","type","button","role","tab","aria-controls","media",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/my-playlist","routerLinkActive","active","id","playlist-tab","data-bs-toggle","tab","data-bs-target","#playlist","type","button","role","tab","aria-controls","playlist",1,"nav-link","border-0","text-uppercase","text-sm"],[1,"card-tools"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"card-body","p-0","m-0"],["id","myTabContent",1,"tab-content","container","py-3"],["class","tab-pane fade show active",4,"ngIf"],[1,"tab-pane","fade","show","active"],[1,"mb-3","container"],["for","bio",1,"form-label"],["for","uploads",1,"form-label"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[3,"data"],[1,"p-5","text-center","text-muted"],["class","text-decoration-none text-reset",3,"routerLink",4,"ngIf"],[1,"text-decoration-none","text-reset",3,"routerLink"]],template:function(e,t){e&1&&(h(0,Gt,1,0,"app-progress",1),a(1,"section")(2,"div",2),f(3,"div",3),s(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),u(13),s(),a(14,"div")(15,"p",12),u(16),s(),a(17,"small",13),u(18),s()()(),a(19,"ul",14)(20,"li",15)(21,"button",16),u(22," About "),s()(),a(23,"li",15)(24,"button",17),u(25," Media "),s()(),a(26,"li",15)(27,"button",18),u(28," Playlist "),s()()()(),a(29,"div",19)(30,"a",20),f(31,"i",21),u(32," Edit Profile "),s()()(),a(33,"div",22)(34,"div",23),h(35,Qt,6,1,"div",24)(36,Xt,7,2,"div",24)(37,ni,7,2,"div",24),s()()()()()()()()),e&2&&(c("ngIf",t.mProgress),d(13),$(" ",t.mAppContextService.getInitials(t.mCurrentUser.name)," "),d(3),Y(t.mCurrentUser.name),d(2),Y(t.mCurrentUser.role==null?null:t.mCurrentUser.role.name),d(3),c("routerLinkActiveOptions",ee(10,Bt)),d(9),ge("routerLink","/profile/edit/",t.mCurrentUser.id,""),d(5),c("ngIf",t.router.url==="/media/about"),d(),c("ngIf",t.router.url==="/media/index"),d(),c("ngIf",t.router.url==="/media/my-playlist"))},dependencies:[Je,D,ne,Xe,j,pt],encapsulation:2})};var z=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=x({type:i,selectors:[["app-index"]],standalone:!1,decls:1,vars:0,template:function(e,t){e&1&&f(0,"app-edit")},dependencies:[A],encapsulation:2})};function oi(i,n){i&1&&f(0,"app-progress")}function si(i,n){if(i&1&&f(0,"app-hls-player",11),i&2){let e=C();c("data",e.item)}}var le=class i{constructor(n,e,t,r){this.route=n;this.mMediaService=e;this.mToastrService=t;this.router=r}mProgress=!1;id;item={};ngOnInit(){this.route.paramMap.subscribe(n=>{let e=n.get("id");e&&(this.index(e),this.id=n.get("id"))})}index(n){this.mProgress=!0,this.mMediaService.getOneItem(n).subscribe({next:e=>{e&&(this.item=e,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(b(We),b(V),b(L),b(R))};static \u0275cmp=x({type:i,selectors:[["app-show"]],standalone:!1,decls:14,vars:2,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-8"],[3,"data",4,"ngIf"],[1,"col-md-4"],[3,"data"]],template:function(e,t){e&1&&(h(0,oi,1,0,"app-progress",0),a(1,"section")(2,"div",1),f(3,"div",2),s(),a(4,"div",3)(5,"div",2)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",4)(11,"div",8),h(12,si,1,1,"app-hls-player",9),s(),f(13,"div",10),s()()()()()()()()),e&2&&(c("ngIf",t.mProgress),d(12),c("ngIf",t.item))},dependencies:[D,j,ct],encapsulation:2})};var ai=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:z,data:{title:"Index"}},{path:"create",component:ae,data:{title:"Create"}},{path:"edit/:id",component:A,data:{title:"Edit"}},{path:":id/show",component:le,data:{title:"Show"}},{path:"about",component:z,data:{title:"Index"}},{path:"my-playlist",component:z,data:{title:"Index"}}],de=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=q({imports:[te,B.forChild(ai),B]})};var xt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=q({imports:[te,B,lt,dt,ft.forRoot(),de,mt]})};export{xt as MediaModule};
