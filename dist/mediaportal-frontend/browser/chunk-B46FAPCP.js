import{a as Je,c as Ze,d as Ke,e as he,f as We,g as Xe,k as Ye,m as et,n as tt,r as it,s as nt,t as rt}from"./chunk-FJ5YBQ2M.js";import{h as Q,j as Z}from"./chunk-ESNP5LCJ.js";import{a as ot,b as f,c as J,f as st}from"./chunk-ECUJFXRK.js";import{$ as Re,Aa as m,B as we,C as _e,Ca as me,D as z,E as H,F as qe,H as P,Ha as He,I as M,Ia as Pe,J as Oe,Ja as pe,K as c,L as Fe,M as ce,N as Ie,Q as Te,Qa as Ae,T as u,W as ke,X as E,Y as S,Ya as $e,Z as k,_ as De,_a as $,a as ve,aa as g,ab as U,b as L,bb as Ue,ea as p,f as oe,fa as Ne,g as be,ga as je,gb as B,h as V,i as se,ia as ue,ja as d,jb as Be,k as Ce,ka as l,kb as Ge,l as ye,la as v,m as le,mb as G,n as q,nb as Qe,oa as Le,p as ae,q as Ee,qa as R,qb as N,r as Se,ra as O,s as Me,sa as Ve,ta as A,u as de,v as F,w as I,x as xe,y as T,z as b,za as ze}from"./chunk-EN7VB6NI.js";import{g as j}from"./chunk-GAL4ENT6.js";var K={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},fe=new xe("config",{providedIn:"root",factory:()=>({modules:K})});function D(i){i||(we(D),i=b(P));let r=new L(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(Se(r))}var mt=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],pt=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function ht(i,r){i&1&&v(0,"div",0)}function ft(i,r){i&1&&v(0,"div",0)}var W=(i,r)=>i||r||"html",gt=()=>new L(i=>{let r=requestAnimationFrame(()=>{i.next(),i.complete()});return()=>cancelAnimationFrame(r)}),vt=(()=>{class i{constructor(){this.config=b(fe)||{modules:K},this.quill$=ye(()=>j(this,null,function*(){if(!this.Quill){let e=document.addEventListener;document.addEventListener=document.__zone_symbol__addEventListener||document.addEventListener;let{Quill:t}=yield import("./chunk-AAUYG7N6.js");document.addEventListener=e,this.Quill=t}return this.config.customOptions?.forEach(e=>{let t=this.Quill.import(e.import);t.whitelist=e.whitelist,this.Quill.register(t,!0,this.config.suppressGlobalRegisterWarning)}),new Promise(e=>{this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning).subscribe(e)})})).pipe(Ee({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(e,t,n=this.config.beforeRender){let o=[this.registerCustomModules(e,t)];return n&&o.push(n()),le(o).pipe(se(()=>e))}registerCustomModules(e,t,n){if(!Array.isArray(t))return oe(e);let o=[];for(let s of t){let{path:a,implementation:h}=s;this.registeredModules.has(a)||(this.registeredModules.add(a),be(h)?o.push(h.pipe(Me(C=>{e.register(a,C,n)}))):e.register(a,h,n))}return o.length>0?le(o).pipe(se(()=>e)):oe(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),bt=(()=>{class i{constructor(){this.format=c(void 0),this.theme=c(void 0),this.modules=c(void 0),this.debug=c(!1),this.readOnly=c(!1),this.placeholder=c(void 0),this.maxLength=c(void 0),this.minLength=c(void 0),this.required=c(!1),this.formats=c(void 0),this.customToolbarPosition=c("top"),this.sanitize=c(void 0),this.beforeRender=c(void 0),this.styles=c(null),this.registry=c(void 0),this.bounds=c(void 0),this.customOptions=c([]),this.customModules=c([]),this.trackChanges=c(void 0),this.classes=c(void 0),this.trimOnValidation=c(!1),this.linkPlaceholder=c(void 0),this.compareValues=c(!1),this.filterNull=c(!1),this.debounceTime=c(void 0),this.defaultEmptyValue=c(null),this.onEditorCreated=new M,this.onEditorChanged=new M,this.onContentChanged=new M,this.onSelectionChanged=new M,this.onFocus=new M,this.onBlur=new M,this.onNativeFocus=new M,this.onNativeBlur=new M,this.disabled=!1,this.toolbarPosition=ce("top"),this.eventsSubscription=null,this.quillSubscription=null,this.elementRef=b(Fe),this.cd=b(Ae),this.domSanitizer=b(Be),this.platformId=b(Ie),this.renderer=b(ke),this.zone=b(Oe),this.service=b(vt),this.destroyRef=b(P),this.valueGetter=c(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let n=t,o=W(this.format(),this.service.config.format);if(o==="text")n=e.getText();else if(o==="object")n=e.getContents();else if(o==="json")try{n=JSON.stringify(e.getContents())}catch{n=e.getText()}return n}),this.valueSetter=c((e,t)=>{let n=W(this.format(),this.service.config.format);if(n==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(Te.HTML,t)),e.clipboard.convert({html:t});if(n==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,n)=>{let o=this.trackChanges()||this.service.config.trackChanges,s=!e&&!!this.onModelTouched&&(n==="user"||o&&o==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!s||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:n}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:n}),s&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,n)=>{let o=this.quillEditor.getText(),s=this.quillEditor.getContents(),a=this.quillEditor.getSemanticHTML();this.isEmptyValue(a)&&(a=this.defaultEmptyValue());let h=this.trackChanges()||this.service.config.trackChanges,C=(n==="user"||h&&h==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!C||this.zone.run(()=>{if(C){let x=this.valueGetter();this.onModelChange(x(this.quillEditor))}this.onContentChanged.emit({content:s,delta:e,editor:this.quillEditor,html:a,oldDelta:t,source:n,text:o}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,n,o)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let s=this.quillEditor.getText(),a=this.quillEditor.getContents(),h=this.quillEditor.getSemanticHTML();this.isEmptyValue(h)&&(h=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:a,delta:t,editor:this.quillEditor,event:e,html:h,oldDelta:n,source:o,text:s}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:n,range:t,source:o}),this.cd.markForCheck()})},this.destroyRef.onDestroy(()=>{this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null})}static normalizeClassNames(e){return e.trim().split(" ").reduce((n,o)=>{let s=o.trim();return s&&n.push(s),n},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){Ue(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(Ce(e=>this.service.beforeRender(e,this.customModules(),this.beforeRender()))).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules()||this.service.config.modules);t?n.toolbar=t:n.toolbar===void 0&&(n.toolbar=K.toolbar);let o=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;o===void 0&&(o="Insert text here ...");let s=this.styles();s&&Object.keys(s).forEach(y=>{this.renderer.setStyle(this.editorElem,y,s[y])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(y=>{let w=e.import(y.import);w.whitelist=y.whitelist,e.register(w,!0)});let a=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();a||(a=this.service.config.bounds?this.service.config.bounds:document.body);let h=this.debug();!h&&h!==!1&&this.service.config.debug&&(h=this.service.config.debug);let C=this.readOnly();!C&&this.readOnly()!==!1&&(C=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let x=this.formats();if(!x&&x===void 0&&(x=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:a,debug:h,formats:x,modules:n,placeholder:o,readOnly:C,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){q(this.quillEditor.scroll.domNode,"blur").pipe(D(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));let y=this.quillEditor.getModule("toolbar");y.container&&q(y.container,"mousedown").pipe(D(this.destroyRef)).subscribe(w=>w.preventDefault())}if(this.onNativeFocus.observed&&q(this.quillEditor.scroll.domNode,"focus").pipe(D(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let w=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");w?.dataset&&(w.dataset.link=this.linkPlaceholder())}}),this.content){if(W(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let ut=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(ut,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&gt().pipe(D(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){let t=e.styles.currentValue,n=e.styles.previousValue;n&&Object.keys(n).forEach(o=>{this.renderer.removeStyle(this.editorElem,o)}),t&&Object.keys(t).forEach(o=>{this.renderer.setStyle(this.editorElem,o,this.styles()[o])})}if(e.classes){let t=e.classes.currentValue,n=e.classes.previousValue;n&&this.removeClasses(n),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let t=W(this.format(),this.service.config.format),o=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let s=this.quillEditor.getContents();if(JSON.stringify(s)===JSON.stringify(o))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(o);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,n=this.quillEditor.getText(),o=this.trimOnValidation()?n.trim().length:n.length===1&&n.trim().length===0?0:n.length-1,s=this.quillEditor.getContents().ops,a=!!s&&s.length===1&&[`
`,""].includes(s[0].insert?.toString());return this.minLength()&&o&&o<this.minLength()&&(e.minLengthError={given:o,minLength:this.minLength()},t=!1),this.maxLength()&&o>this.maxLength()&&(e.maxLengthError={given:o,maxLength:this.maxLength()},t=!1),this.required()&&!o&&a&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.eventsSubscription=new ve,this.eventsSubscription.add(q(this.quillEditor,"selection-change").subscribe(([n,o,s])=>{this.selectionChangeHandler(n,o,s)}));let e=q(this.quillEditor,"text-change"),t=q(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(ae(this.debounceTime())),t=t.pipe(ae(this.debounceTime()))),this.eventsSubscription.add(e.subscribe(([n,o,s])=>{this.textChangeHandler(n,o,s)})),this.eventsSubscription.add(t.subscribe(([n,o,s,a])=>{this.editorChangeHandler(n,o,s,a)}))})}dispose(){this.eventsSubscription?.unsubscribe(),this.eventsSubscription=null}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=De({type:i,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[_e]})}}return i})(),lt=(()=>{class i extends bt{static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=qe(i)))(n||i)}})()}static{this.\u0275cmp=S({type:i,selectors:[["quill-editor"]],features:[He([{multi:!0,provide:Je,useExisting:de(()=>i)},{multi:!0,provide:Ke,useExisting:de(()=>i)}]),Re],ngContentSelectors:pt,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,n){t&1&&(Ve(mt),g(0,ht,1,0,"div",0),A(1),A(2,1),A(3,2),g(4,ft,1,0,"div",0)),t&2&&(ue(n.toolbarPosition()!=="top"?0:-1),u(4),ue(n.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return i})();var at=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:fe,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=k({type:i})}static{this.\u0275inj=I({})}}return i})();var X=class i{constructor(r,e){this.mAppContextService=r;this.http=e}createItem(r){let e=`${f.base_url}/upload`;return this.http.post(e,r)}initUpload(r,e){let t=`${f.base_url}/upload/init`;return this.http.post(t,{filename:r,title:e})}uploadChunk(r,e,t){let n=new FormData;n.append("uploadId",r),n.append("chunkIndex",e.toString()),n.append("file",t,`chunk_${e}`);let o=`${f.base_url}/upload/chunk`;return this.http.post(o,n,{reportProgress:!0,observe:"events"})}completeUpload(r,e,t,n){let o=`${f.base_url}/upload/complete`;return this.http.post(o,{uploadId:r,totalChunks:e,title:t,description:n})}static \u0275fac=function(e){return new(e||i)(T(J),T(B))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};var dt=i=>({"is-invalid":i}),qt=()=>({height:"150px"});function Ot(i,r){i&1&&v(0,"app-progress")}function Ft(i,r){i&1&&(d(0,"p"),m(1,"Drag & drop a video here, or click to select"),l())}function It(i,r){if(i&1&&(d(0,"p"),m(1),l()),i&2){let e=O();u(),me("Selected: ",e.selectedFile.name,"")}}function Tt(i,r){i&1&&(d(0,"div"),m(1,"This field is required."),l())}function kt(i,r){if(i&1&&(d(0,"div",33),g(1,Tt,2,0,"div",1),l()),i&2){let e,t=O();u(),p("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function Dt(i,r){i&1&&(d(0,"div"),m(1,"This field is required."),l())}function Rt(i,r){if(i&1&&(d(0,"div",33),g(1,Dt,2,0,"div",1),l()),i&2){let e,t=O();u(),p("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Nt(i,r){if(i&1&&(d(0,"div")(1,"div",34)(2,"div",35),m(3),l()()()),i&2){let e=O();u(2),Ne("width",e.progress,"%"),u(),me("",e.progress,"%")}}function jt(i,r){i&1&&(d(0,"a",36),m(1,"Run in Background"),l())}var Y=class i{constructor(r,e,t,n){this.mToastrService=r;this.mUploadService=e;this.fb=t;this.router=n;this.itemForm=this.fb.group({title:["",he.required],description:["",he.required]})}selectedFile=null;progress=0;isDragging=!1;itemForm;mProgress=!1;onSubmit(r){this.mProgress=!0,this.upload(r.title,r.description)}onDragOver(r){r.preventDefault(),this.isDragging=!0}onDragLeave(r){r.preventDefault(),this.isDragging=!1}onDrop(r){r.preventDefault(),this.isDragging=!1,r.dataTransfer?.files.length&&(this.selectedFile=r.dataTransfer.files[0])}onFileSelected(r){this.selectedFile=r.target.files[0]}upload(r,e){return j(this,null,function*(){if(!this.selectedFile||this.itemForm.invalid){this.mToastrService.warning("Please fill out all fields and select a file.");return}let t=5*1024*1024,n=Math.ceil(this.selectedFile.size/t),s=(yield V(this.mUploadService.initUpload(this.selectedFile.name,r))).uploadId;for(let a=0;a<n;a++){let h=a*t,C=Math.min(h+t,this.selectedFile.size),x=this.selectedFile.slice(h,C);yield V(this.mUploadService.uploadChunk(s,a,x).pipe()),this.mProgress=!1,this.progress=Math.round((a+1)/n*100)}yield V(this.mUploadService.completeUpload(s,n,r,e)),this.mToastrService.success("Media uploaded complete!"),this.router.navigateByUrl("/media")})}static \u0275fac=function(e){return new(e||i)(E(Q),E(X),E(it),E(G))};static \u0275cmp=S({type:i,selectors:[["app-create"]],hostBindings:function(e,t){e&1&&R("dragover",function(o){return t.onDragOver(o)})("dragleave",function(o){return t.onDragLeave(o)})("drop",function(o){return t.onDrop(o)})},standalone:!1,decls:54,vars:20,consts:[["fileInput",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],[1,"dropzone"],["type","file","hidden","","accept","video/*",3,"change"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","description",1,"form-label","required"],["formControlName","description",1,"w-100",3,"styles","ngClass"],[1,"text-end"],["routerLink","/my-media","class","btn btn-danger me-1",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger","progress-bar-striped","progress-bar-animated"],["routerLink","/my-media",1,"btn","btn-danger","me-1"]],template:function(e,t){if(e&1){let n=Le();g(0,Ot,1,0,"app-progress",1),d(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),m(7,"Media"),l()(),d(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),m(12,"Home"),l()(),d(13,"li",10),m(14,"Media"),l(),d(15,"li",11),m(16,"Create"),l()()()()(),d(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),m(22," Create Media "),l(),v(23,"div",16),l(),d(24,"div",17)(25,"form",18),R("ngSubmit",function(){return z(n),H(t.onSubmit(t.itemForm.value))}),d(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),g(30,Ft,2,0,"p",1)(31,It,2,1,"p",1),d(32,"input",23,0),R("change",function(s){return z(n),H(t.onFileSelected(s))}),l(),d(34,"button",24),R("click",function(){z(n);let s=ze(33);return H(s.click())}),m(35,"Choose File"),l()()()(),d(36,"div",20)(37,"div",21)(38,"label",25),m(39,"Title:"),l(),v(40,"input",26),g(41,kt,2,1,"div",27),l()()(),d(42,"div",20)(43,"div",21)(44,"label",28),m(45,"Description:"),l(),v(46,"quill-editor",29),g(47,Rt,2,1,"div",27),l()(),d(48,"div",21),g(49,Nt,4,3,"div",1),l(),d(50,"div",30),g(51,jt,2,0,"a",31),d(52,"button",32),m(53,"Submit"),l()()()()()()()()()}if(e&2){let n,o,s,a;p("ngIf",t.mProgress),u(25),p("formGroup",t.itemForm),u(4),je("dragging",t.isDragging),u(),p("ngIf",!t.selectedFile),u(),p("ngIf",t.selectedFile),u(9),p("ngModel",t.selectedFile==null?null:t.selectedFile.name)("ngClass",pe(15,dt,((n=t.itemForm.get("title"))==null?null:n.invalid)&&(((n=t.itemForm.get("title"))==null?null:n.dirty)||((n=t.itemForm.get("title"))==null?null:n.touched)))),u(),p("ngIf",((o=t.itemForm.get("title"))==null?null:o.invalid)&&(((o=t.itemForm.get("title"))==null?null:o.dirty)||((o=t.itemForm.get("title"))==null?null:o.touched))),u(5),p("styles",Pe(17,qt))("ngClass",pe(18,dt,((s=t.itemForm.get("description"))==null?null:s.invalid)&&(((s=t.itemForm.get("description"))==null?null:s.dirty)||((s=t.itemForm.get("description"))==null?null:s.touched)))),u(),p("ngIf",((a=t.itemForm.get("description"))==null?null:a.invalid)&&(((a=t.itemForm.get("description"))==null?null:a.dirty)||((a=t.itemForm.get("description"))==null?null:a.touched))),u(2),p("ngIf",t.progress>0),u(2),p("ngIf",t.progress>0),u(),p("disabled",!t.selectedFile||t.itemForm.invalid)}},dependencies:[$e,$,Qe,Ye,Ze,We,Xe,et,tt,lt,Z],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #bbb;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:.2s}.dropzone.dragging[_ngcontent-%COMP%]{background-color:#eef6ff;border-color:#3b82f6}"]})};var ee=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-edit"]],standalone:!1,decls:2,vars:0,template:function(e,t){e&1&&(d(0,"p"),m(1,"edit works!"),l())},encapsulation:2})};var te=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=S({type:i,selectors:[["app-index"]],standalone:!1,decls:2,vars:0,template:function(e,t){e&1&&(d(0,"p"),m(1,"index works!"),l())},encapsulation:2})};var ie=class i{constructor(r,e){this.mAppContextService=r;this.http=e}allItems(){let r=`${f.base_url}/media`;return this.http.get(r,this.mAppContextService.getHttpOptions())}createItem(r){let e=`${f.base_url}/media`;return this.http.post(e,r,this.mAppContextService.getHttpOptions())}getOneItem(r){let e=`${f.base_url}/media/${r}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(r){let e=`${f.base_url}/media/${r.id}`;return this.http.put(e,r,this.mAppContextService.getHttpOptions())}deleteItem(r){let e=`${f.base_url}/media/${r.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(r){return this.http.get(r,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let r=`${f.base_url}/unpaginated-items-media`;return this.http.get(r,this.mAppContextService.getHttpOptions())}searchItems(r){let e=`${f.base_url}/search-media`;return this.http.post(e,r,this.mAppContextService.getHttpOptions())}upload(r){let e=`${f.base_url}/upload`;return this.http.post(e,r)}initUpload(r,e){let t=`${f.base_url}/upload/init`;return this.http.post(t,{filename:r,title:e})}uploadChunk(r,e,t){let n=new FormData;n.append("uploadId",r),n.append("chunkIndex",e.toString()),n.append("file",t,`chunk_${e}`);let o=`${f.base_url}/upload/chunk`;return this.http.post(o,n,{reportProgress:!0,observe:"events"})}completeUpload(r,e,t,n){let o=`${f.base_url}/upload/complete`;return this.http.post(o,{uploadId:r,totalChunks:e,title:t,description:n})}static \u0275fac=function(e){return new(e||i)(T(J),T(B))};static \u0275prov=F({token:i,factory:i.\u0275fac,providedIn:"root"})};function Vt(i,r){i&1&&v(0,"app-progress")}function zt(i,r){if(i&1&&v(0,"app-hls-player",11),i&2){let e=O();p("data",e.item)}}var ne=class i{constructor(r,e,t,n){this.route=r;this.mMediaService=e;this.mToastrService=t;this.router=n}mProgress=!1;id;item={};ngOnInit(){this.route.paramMap.subscribe(r=>{let e=r.get("id");e&&(this.index(e),this.id=r.get("id"))})}index(r){this.mProgress=!0,this.mMediaService.getOneItem(r).subscribe({next:e=>{e&&(this.item=e,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(E(Ge),E(ie),E(Q),E(G))};static \u0275cmp=S({type:i,selectors:[["app-show"]],standalone:!1,decls:14,vars:2,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-8"],[3,"data",4,"ngIf"],[1,"col-md-4"],[3,"data"]],template:function(e,t){e&1&&(g(0,Vt,1,0,"app-progress",0),d(1,"section")(2,"div",1),v(3,"div",2),l(),d(4,"div",3)(5,"div",2)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",4)(11,"div",8),g(12,zt,1,1,"app-hls-player",9),l(),v(13,"div",10),l()()()()()()()()),e&2&&(p("ngIf",t.mProgress),u(12),p("ngIf",t.item))},dependencies:[$,Z,ot],encapsulation:2})};var Ht=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:te,data:{title:"Index"}},{path:"create",component:Y,data:{title:"Create"}},{path:"edit/:id",component:ee,data:{title:"Edit"}},{path:"show/:id",component:ne,data:{title:"Show"}}],re=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=I({imports:[U,N.forChild(Ht),N]})};var ct=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=k({type:i});static \u0275inj=I({imports:[U,N,nt,rt,at.forRoot(),re,st]})};export{ct as MediaModule};
