import{a as Vt,b as Nt}from"./chunk-6HFKKRLM.js";import{a as Rt}from"./chunk-CJOEXYT6.js";import{a as it,b as At,c as Lt}from"./chunk-GID7WHAN.js";import{a as Pt}from"./chunk-VPQOGWMS.js";import{a as et,b as tt,c as Ot}from"./chunk-QATCEHAB.js";import{a as Ze}from"./chunk-47TLDLVH.js";import{b as Je,c as Y,e as E,f as B,g as U,h as Ve,i as Ne,j as Ke,k as $,m as W,n as G,o as fe,p as ge,q as _e,r as J,s as Tt,t as kt}from"./chunk-WFVHQ7TB.js";import{h as T,j as V}from"./chunk-UI2K4JF2.js";import{a as Xe,b as Re,c as y,d as He,e as k,h as Mt}from"./chunk-AROLPOSW.js";import{$ as v,Aa as q,Ab as Ft,B as K,Ba as Pe,Ca as Oe,Cb as qe,Da as Ae,F as We,G as x,Ga as X,H as S,Ha as l,Ia as f,Ja as h,Ka as ze,La as It,Ma as N,Na as R,Oa as H,Qa as D,Ra as C,Sa as le,Ta as Le,V as Z,Va as ee,W as z,Wa as Qe,X as o,Xa as Ce,Ya as ae,ba as F,ca as Ge,fa as p,gb as M,hb as O,i as Ue,ia as gt,ib as P,ja as s,jb as Et,ka as be,kb as wt,la as St,lb as Ye,oa as a,pa as r,qa as c,sb as ue,ta as w,va as _,wa as u,wb as ve,y as ce,yb as Q,z as $e,za as oe,zb as A}from"./chunk-JPXP45KO.js";import{a as Ct,f as Be,g as xt}from"./chunk-GAL4ENT6.js";var nt=class n{constructor(i,e){this.mAppContextService=i;this.http=e}createItem(i){let e=`${y.base_url}/upload`;return this.http.post(e,i)}initUpload(i,e){let t=`${y.base_url}/upload/init`;return this.http.post(t,{filename:i,title:e})}uploadChunk(i,e,t){let m=new FormData;m.append("uploadId",i),m.append("chunkIndex",e.toString()),m.append("file",t,`chunk_${e}`);let d=`${y.base_url}/upload/chunk`;return this.http.post(d,m,{reportProgress:!0,observe:"events"})}completeUpload(i,e,t,m){let d=`${y.base_url}/upload/complete`;return this.http.post(d,{uploadId:i,totalChunks:e,title:t,description:m})}static \u0275fac=function(e){return new(e||n)(K(k),K(ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xt=n=>({"is-invalid":n});function Zt(n,i){n&1&&c(0,"app-progress")}function ei(n,i){n&1&&(a(0,"p"),l(1,"Drag & drop a video here, or click to select"),r())}function ti(n,i){if(n&1&&(a(0,"p"),l(1),r()),n&2){let e=u();o(),h("Selected: ",e.selectedFile.name,"")}}function ii(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function ni(n,i){if(n&1&&(a(0,"div",31),p(1,ii,2,0,"div",1),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function ri(n,i){if(n&1&&(a(0,"div")(1,"div",32)(2,"div",33),l(3),r()()()),n&2){let e=u();o(2),be("width",e.progress,"%"),o(),h("",e.progress,"%")}}function ai(n,i){n&1&&(a(0,"a",34),l(1,"Run in Background"),r())}var rt=class n{constructor(i,e,t,m){this.mToastrService=i;this.mUploadService=e;this.fb=t;this.router=m;this.itemForm=this.fb.group({title:["",E.required]})}itemForm;mProgress=!1;selectedFile=null;progress=0;isDragging=!1;ngOnInit(){}onSubmit(i){this.mProgress=!0,this.upload(i.title,i.description)}onDragOver(i){i.preventDefault(),this.isDragging=!0}onDragLeave(i){i.preventDefault(),this.isDragging=!1}onDrop(i){i.preventDefault(),this.isDragging=!1,i.dataTransfer?.files.length&&(this.selectedFile=i.dataTransfer.files[0])}onFileSelected(i){this.selectedFile=i.target.files[0]}upload(i,e){return xt(this,null,function*(){if(!this.selectedFile||this.itemForm.invalid){this.mToastrService.error("Please fill out all fields and select a file.");return}let t=5*1024*1024,m=Math.ceil(this.selectedFile.size/t),b=(yield Ue(this.mUploadService.initUpload(this.selectedFile.name,i))).uploadId;for(let I=0;I<m;I++){let g=I*t,de=Math.min(g+t,this.selectedFile.size),pe=this.selectedFile.slice(g,de);yield Ue(this.mUploadService.uploadChunk(b,I,pe).pipe()),this.mProgress=!1,this.progress=Math.round((I+1)/m*100)}yield Ue(this.mUploadService.completeUpload(b,m,i)),this.mToastrService.success("Media uploaded complete!"),this.router.navigateByUrl("/media")})}static \u0275fac=function(e){return new(e||n)(v(T),v(nt),v(J),v(Q))};static \u0275cmp=F({type:n,selectors:[["app-create"]],hostBindings:function(e,t){e&1&&_("dragover",function(d){return t.onDragOver(d)})("dragleave",function(d){return t.onDragLeave(d)})("drop",function(d){return t.onDrop(d)})},standalone:!1,decls:49,vars:14,consts:[["fileInput",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],[1,"dropzone"],["type","file","hidden","","accept","video/*",3,"change"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/my-media","class","btn btn-warning  me-1",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning","progress-bar-striped","progress-bar-animated"],["routerLink","/my-media",1,"btn","btn-warning","me-1"]],template:function(e,t){if(e&1){let m=w();p(0,Zt,1,0,"app-progress",1),a(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),l(7,"Media"),r()(),a(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),l(12,"Home"),r()(),a(13,"li",10),l(14,"Media"),r(),a(15,"li",11),l(16,"Create"),r()()()()(),a(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),l(22," Create Media "),r(),c(23,"div",16),r(),a(24,"div",17)(25,"form",18),_("ngSubmit",function(){return x(m),S(t.onSubmit(t.itemForm.value))}),a(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),p(30,ei,2,0,"p",1)(31,ti,2,1,"p",1),a(32,"input",23,0),_("change",function(b){return x(m),S(t.onFileSelected(b))}),r(),a(34,"button",24),_("click",function(){x(m);let b=X(33);return S(b.click())}),l(35,"Choose File"),r()()()(),a(36,"div",20)(37,"div",21)(38,"label",25),l(39,"Title:"),r(),c(40,"input",26),p(41,ni,2,1,"div",27),r()(),a(42,"div",20)(43,"div",21),p(44,ri,4,3,"div",1),r()()(),a(45,"div",28),p(46,ai,2,0,"a",29),a(47,"button",30),l(48,"Submit"),r()()()()()()()()()}if(e&2){let m,d;s("ngIf",t.mProgress),o(25),s("formGroup",t.itemForm),o(4),St("dragging",t.isDragging),o(),s("ngIf",!t.selectedFile),o(),s("ngIf",t.selectedFile),o(9),s("ngModel",t.selectedFile==null?null:t.selectedFile.name)("ngClass",C(12,Xt,((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched)))),o(),s("ngIf",((d=t.itemForm.get("title"))==null?null:d.invalid)&&(((d=t.itemForm.get("title"))==null?null:d.dirty)||((d=t.itemForm.get("title"))==null?null:d.touched))),o(3),s("ngIf",t.progress>0),o(2),s("ngIf",t.progress>0),o(),s("disabled",!t.selectedFile||t.itemForm.invalid)}},dependencies:[M,P,A,$,Y,B,U,W,G,V],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #bbb;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:.2s}.dropzone.dragging[_ngcontent-%COMP%]{background-color:#eef6ff;border-color:#3b82f6}"]})};var L=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${y.base_url}/media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${y.base_url}/media`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}getOneItem(i){let e=`${y.base_url}/media/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${y.base_url}/media/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${y.base_url}/media/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${y.base_url}/unpaginated-items-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${y.base_url}/search-media`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}relatedItems(i,e){let t=`${y.base_url}/related-media/${e}`;return this.http.get(t+i,this.mAppContextService.getHttpOptions())}myMedia(i){let e=`${y.base_url}/my-media/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}likedMediaItems(){let i=`${y.base_url}/liked-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}historyMediaItems(){let i=`${y.base_url}/history-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}reactItem(i){let e=`${y.base_url}/media/${i.id}/react`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}commentItem(i){let e=`${y.base_url}/media/${i.id}/comment`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}processItem(i){let e=`${y.base_url}/media/${i.id}/process`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}playlistMediaItem(i){let e=`${y.base_url}/media/${i}/playlist`;return this.http.get(e,this.mAppContextService.getHttpOptions())}categoryMediaItem(i){let e=`${y.base_url}/media/${i}/category`;return this.http.get(e,this.mAppContextService.getHttpOptions())}upload(i){let e=`${y.base_url}/upload`;return this.http.post(e,i)}initUpload(i,e){let t=`${y.base_url}/upload/init`;return this.http.post(t,{filename:i,title:e})}uploadChunk(i,e,t){let m=new FormData;m.append("uploadId",i),m.append("chunkIndex",e.toString()),m.append("file",t,`chunk_${e}`);let d=`${y.base_url}/upload/chunk`;return this.http.post(d,m,{reportProgress:!0,observe:"events"})}completeUpload(i,e,t,m){let d=`${y.base_url}/upload/complete`;return this.http.post(d,{uploadId:i,totalChunks:e,title:t,description:m})}static \u0275fac=function(e){return new(e||n)(K(k),K(ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Se=n=>({"is-invalid":n}),oi=()=>({height:"150px"});function li(n,i){n&1&&c(0,"app-progress")}function mi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function si(n,i){if(n&1&&(a(0,"div",46),p(1,mi,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function di(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function pi(n,i){if(n&1&&(a(0,"div",46),p(1,di,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function ci(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function ui(n,i){if(n&1&&(a(0,"div",46),p(1,ci,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("date_produced"))==null||e.errors==null?null:e.errors.required)}}function vi(n,i){if(n&1){let e=w();a(0,"div",47)(1,"div",48)(2,"input",49),_("change",function(m){let d=x(e).$implicit,b=u();return S(b.onCategoryChange(m,d.id))}),r(),a(3,"label",50),l(4),r()()()}if(n&2){let e=i.$implicit,t=u();o(2),s("id","category_"+e.id)("value",e.id)("checked",t.isInList(e.id,t.item.media_categories)),o(),s("for","category_"+e.id),o(),f(e.name)}}function fi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function gi(n,i){if(n&1&&(a(0,"div",46),p(1,fi,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("tags"))==null||e.errors==null?null:e.errors.required)}}function _i(n,i){if(n&1&&(a(0,"option",51),l(1),r()),n&2){let e=i.$implicit;oe("value",e.id),o(),f(e.name)}}function hi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function yi(n,i){if(n&1&&(a(0,"div",52),p(1,hi,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function bi(n,i){if(n&1&&(a(0,"option",51),l(1),r()),n&2){let e=i.$implicit;oe("value",e.id),o(),f(e.name)}}function Ci(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function xi(n,i){if(n&1&&(a(0,"div",52),p(1,Ci,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("user_id"))==null||e.errors==null?null:e.errors.required)}}function Si(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Ii(n,i){if(n&1&&(a(0,"div",46),p(1,Si,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("allow_comments"))==null||e.errors==null?null:e.errors.required)}}var at=class n{constructor(i,e,t,m,d){this.mToastrService=i;this.mMediaService=e;this.fb=t;this.router=m;this.route=d;this.itemForm=this.fb.group({title:["",E.required],description:["",E.required],date_produced:["",E.required],category_id:["",E.nullValidator],tags:["",E.nullValidator],type_id:["",E.required],user_id:["",E.required],allow_comments:[!1,E.nullValidator]})}mContentCategories;mMediaTypes;mUsers;mSelectedCategories=[];itemForm;mProgress=!1;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.item.media_categories&&Array.isArray(this.item.media_categories)&&this.mSelectedCategories.push(...this.item.media_categories.map(e=>e.category_id)),this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{i&&(this.mContentCategories=i.data.content_categories,this.mMediaTypes=i.data.media_types,this.mUsers=i.data.users,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onSubmit(i){let e={id:this.id,title:i.title,description:i.description,date_produced:i.date_produced,category_id:this.mSelectedCategories,tags:i.tags,type_id:i.type_id,user_id:i.user_id,allow_comments:i.allow_comments};this.mProgress=!0,this.mMediaService.updateItem(e).subscribe({next:t=>{t&&(this.mToastrService.success(t.message),this.router.navigateByUrl("/media"),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onCategoryChange(i,e){if(i.target.checked)this.mSelectedCategories.push(e);else{let t=this.mSelectedCategories.indexOf(e);t>-1&&this.mSelectedCategories.splice(t,1)}}isInList(i,e){return e?.some(t=>t.category_id===i)??!1}static \u0275fac=function(e){return new(e||n)(v(T),v(L),v(J),v(Q),v(ve))};static \u0275cmp=F({type:n,selectors:[["app-edit"]],standalone:!1,decls:90,vars:43,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","description",1,"form-label","required"],["formControlName","description",1,"w-100",3,"ngModelChange","ngModel","styles","ngClass"],["for","date_produced",1,"form-label","required"],["type","datetime-local","formControlName","date_produced",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"form-label","required"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],["for","tags",1,"form-label","required"],["type","text","formControlName","tags",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"col-md-6"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","user_id",1,"form-label","required"],["formControlName","user_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],[1,"form-check","d-inline-block"],["type","checkbox","formControlName","allow_comments",1,"form-check-input",3,"ngModelChange","ngModel","ngClass"],["for","allow_comments"],[1,"text-end"],["routerLink","/media",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"col-6","col-md-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"]],template:function(e,t){if(e&1&&(p(0,li,1,0,"app-progress",0),a(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),l(7,"Media"),r()(),a(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),l(12,"Home"),r()(),a(13,"li",9),l(14,"Media"),r(),a(15,"li",10),l(16,"Create"),r()()()()(),a(17,"div",3)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14),l(22," Create Media "),r(),c(23,"div",15),r(),a(24,"div",16)(25,"form",17),_("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),a(26,"div",18)(27,"div",19)(28,"div",20)(29,"label",21),l(30,"Title:"),r(),c(31,"input",22),p(32,si,2,1,"div",23),r()(),a(33,"div",19)(34,"div",20)(35,"label",24),l(36,"Description:"),r(),a(37,"quill-editor",25),H("ngModelChange",function(d){return R(t.item.description,d)||(t.item.description=d),d}),r(),p(38,pi,2,1,"div",23),r()(),a(39,"div",19)(40,"div",20)(41,"label",26),l(42,"Date Produced:"),r(),a(43,"input",27),H("ngModelChange",function(d){return R(t.item.date_produced,d)||(t.item.date_produced=d),d}),r(),p(44,ui,2,1,"div",23),r()(),a(45,"div",19)(46,"div",20)(47,"label",28),l(48,"Category:"),r(),a(49,"div",3),p(50,vi,5,5,"div",29),r()()(),a(51,"div",19)(52,"div",20)(53,"label",30),l(54,"Tags "),a(55,"small"),l(56,"- a comma separated list of tags"),r(),l(57,":"),r(),a(58,"input",31),H("ngModelChange",function(d){return R(t.item.tags,d)||(t.item.tags=d),d}),r(),p(59,gi,2,1,"div",23),r()(),a(60,"div",32)(61,"div",20)(62,"label",33),l(63,"Type:"),r(),a(64,"select",34),H("ngModelChange",function(d){return R(t.item.type_id,d)||(t.item.type_id=d),d}),a(65,"option",35),l(66,"--- Select type ---"),r(),p(67,_i,2,2,"option",36),r(),p(68,yi,2,1,"div",37),r()(),a(69,"div",32)(70,"div",20)(71,"label",38),l(72,"User:"),r(),a(73,"select",39),H("ngModelChange",function(d){return R(t.item.user_id,d)||(t.item.user_id=d),d}),a(74,"option",35),l(75,"--- Select user ---"),r(),p(76,bi,2,2,"option",36),r(),p(77,xi,2,1,"div",37),r()(),a(78,"div",19)(79,"div",20)(80,"div",40)(81,"input",41),H("ngModelChange",function(d){return R(t.item.allow_comments,d)||(t.item.allow_comments=d),d}),r(),a(82,"label",42),l(83," Allow comments"),r(),p(84,Ii,2,1,"div",23),r()()()(),a(85,"div",43)(86,"a",44),l(87,"Cancel"),r(),a(88,"button",45),l(89,"Submit"),r()()()()()()()()()),e&2){let m,d,b,I,g,de,pe,Ie,Ee,we,Fe,Te,ke,Me;s("ngIf",t.mProgress),o(25),s("formGroup",t.itemForm),o(6),s("ngModel",t.item.title)("ngClass",C(28,Se,((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched)))),o(),s("ngIf",((d=t.itemForm.get("title"))==null?null:d.invalid)&&(((d=t.itemForm.get("title"))==null?null:d.dirty)||((d=t.itemForm.get("title"))==null?null:d.touched))),o(5),N("ngModel",t.item.description),s("styles",D(30,oi))("ngClass",C(31,Se,((b=t.itemForm.get("description"))==null?null:b.invalid)&&(((b=t.itemForm.get("description"))==null?null:b.dirty)||((b=t.itemForm.get("description"))==null?null:b.touched)))),o(),s("ngIf",((I=t.itemForm.get("description"))==null?null:I.invalid)&&(((I=t.itemForm.get("description"))==null?null:I.dirty)||((I=t.itemForm.get("description"))==null?null:I.touched))),o(5),N("ngModel",t.item.date_produced),s("ngClass",C(33,Se,((g=t.itemForm.get("date_produced"))==null?null:g.invalid)&&(((g=t.itemForm.get("date_produced"))==null?null:g.dirty)||((g=t.itemForm.get("date_produced"))==null?null:g.touched)))),o(),s("ngIf",((de=t.itemForm.get("date_produced"))==null?null:de.invalid)&&(((de=t.itemForm.get("date_produced"))==null?null:de.dirty)||((de=t.itemForm.get("date_produced"))==null?null:de.touched))),o(6),s("ngForOf",t.mContentCategories),o(8),N("ngModel",t.item.tags),s("ngClass",C(35,Se,((pe=t.itemForm.get("tags"))==null?null:pe.invalid)&&(((pe=t.itemForm.get("tags"))==null?null:pe.dirty)||((pe=t.itemForm.get("tags"))==null?null:pe.touched)))),o(),s("ngIf",((Ie=t.itemForm.get("tags"))==null?null:Ie.invalid)&&(((Ie=t.itemForm.get("tags"))==null?null:Ie.dirty)||((Ie=t.itemForm.get("tags"))==null?null:Ie.touched))),o(5),N("ngModel",t.item.type_id),s("ngClass",C(37,Se,((Ee=t.itemForm.get("type_id"))==null?null:Ee.invalid)&&(((Ee=t.itemForm.get("type_id"))==null?null:Ee.dirty)||((Ee=t.itemForm.get("type_id"))==null?null:Ee.touched)))),o(3),s("ngForOf",t.mMediaTypes),o(),s("ngIf",((we=t.itemForm.get("type_id"))==null?null:we.invalid)&&(((we=t.itemForm.get("type_id"))==null?null:we.dirty)||((we=t.itemForm.get("type_id"))==null?null:we.touched))),o(5),N("ngModel",t.item.user_id),s("ngClass",C(39,Se,((Fe=t.itemForm.get("user_id"))==null?null:Fe.invalid)&&(((Fe=t.itemForm.get("user_id"))==null?null:Fe.dirty)||((Fe=t.itemForm.get("user_id"))==null?null:Fe.touched)))),o(3),s("ngForOf",t.mUsers),o(),s("ngIf",((Te=t.itemForm.get("user_id"))==null?null:Te.invalid)&&(((Te=t.itemForm.get("user_id"))==null?null:Te.dirty)||((Te=t.itemForm.get("user_id"))==null?null:Te.touched))),o(4),N("ngModel",t.item.allow_comments),s("ngClass",C(41,Se,((ke=t.itemForm.get("allow_comments"))==null?null:ke.invalid)&&(((ke=t.itemForm.get("allow_comments"))==null?null:ke.dirty)||((ke=t.itemForm.get("allow_comments"))==null?null:ke.touched)))),o(3),s("ngIf",((Me=t.itemForm.get("allow_comments"))==null?null:Me.invalid)&&(((Me=t.itemForm.get("allow_comments"))==null?null:Me.dirty)||((Me=t.itemForm.get("allow_comments"))==null?null:Me.touched))),o(4),s("disabled",t.itemForm.invalid)}},dependencies:[M,O,P,A,$,ge,_e,Y,Je,fe,B,U,W,G,Vt,V],encapsulation:2})};var Ht=Be(Ze());var Ei=n=>({"is-invalid":n}),wi=()=>["/media/watch"],Fi=n=>({video:n}),Ti=(n,i,e)=>({"alert-warning":n,"alert-primary":i,"alert-danger":e}),ki=(n,i,e)=>({"bg-warning text-dark":n,"bg-primary":i,"bg-danger":e}),Mi=(n,i)=>({active:n,disabled:i});function Pi(n,i){n&1&&c(0,"app-progress")}function Oi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Ai(n,i){if(n&1&&(a(0,"div",28),p(1,Oi,2,0,"div",1),r()),n&2){let e=u();o(),s("ngIf",e.search_term.errors==null?null:e.search_term.errors.required)}}function Li(n,i){n&1&&(a(0,"span"),l(1,","),r())}function Vi(n,i){if(n&1&&(a(0,"a",58),l(1),p(2,Li,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;q("routerLink","/categories/show/",e.category_id,""),o(),h(" ",e.name,""),o(),s("ngIf",!t)}}function Ni(n,i){if(n&1){let e=w();a(0,"tr")(1,"td"),l(2),r(),a(3,"td"),l(4),r(),a(5,"td"),l(6),r(),a(7,"td")(8,"a",32),c(9,"i",33),r()(),a(10,"td"),l(11),r(),a(12,"td")(13,"span",34),l(14),r()(),a(15,"td"),l(16),ee(17,"date"),r(),a(18,"td")(19,"a",35),l(20),r()(),a(21,"td"),l(22),ee(23,"date"),r(),a(24,"td")(25,"div",36)(26,"button",37),c(27,"i",33),r(),a(28,"a",38),c(29,"i",39),r(),a(30,"button",40),_("click",function(){let m=x(e).$implicit,d=u(2);return S(d.onDelete(m))}),c(31,"i",41),r()(),a(32,"div",42)(33,"div",43)(34,"div",44)(35,"div",45)(36,"h5",46),l(37),r(),c(38,"button",47),r(),a(39,"div",48)(40,"ol",49)(41,"li",50)(42,"div",51)(43,"div",52),l(44,"Description: "),r()(),c(45,"span",53),r(),a(46,"li",50)(47,"div",51)(48,"div",52),l(49,"Categories: "),r()(),p(50,Vi,3,4,"a",54),r(),a(51,"li",50)(52,"div",51)(53,"div",52),l(54,"Updated At: "),r()(),a(55,"span",55),l(56),ee(57,"date"),r()(),a(58,"li",50)(59,"div",51)(60,"div",52),l(61,"Server Link:"),r()(),a(62,"span",55),l(63),r()(),a(64,"li",50)(65,"div",51)(66,"div",52),l(67,"Stream Key:"),r()(),a(68,"span",55),l(69),r()()()(),a(70,"div",56)(71,"button",57),l(72,"Close"),r()()()()()()()}if(n&2){let e=i.$implicit,t=i.index;o(2),h("",t+1,"."),o(2),f(e.title),o(2),f(e.media_type==null?null:e.media_type.name),o(2),s("routerLink",D(30,wi))("queryParams",C(31,Fi,e.id)),o(3),f(e.user==null?null:e.user.name),o(2),s("ngClass",Le(33,Ti,e.media_status_id==1,e.media_status_id==2,e.media_status_id==3)),o(),f(e.media_status==null?null:e.media_status.name),o(2),f(Qe(17,24,e.date_produced)),o(3),q("routerLink","/media/process/",e.id,""),s("ngClass",Le(37,ki,e.status_id==1,e.status_id==2,e.status_id==3)),o(),h(" ",e.status==null?null:e.status.name,""),o(2),f(Qe(23,26,e.created_at)),o(4),gt("data-bs-target","#modal1"+e.id),o(2),q("routerLink","/media/edit/",e.id,""),o(4),gt("id","modal1"+e.id),o(5),f(e.title),o(8),s("innerHTML",e.description,Z),o(5),s("ngForOf",e.media_categories),o(6),f(Qe(57,28,e.updated_at)),o(7),f(e.server_link),o(6),f(e.stream_key)}}function Ri(n,i){if(n&1&&(a(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th"),l(5,"#"),r(),a(6,"th"),l(7,"Title"),r(),a(8,"th"),l(9,"Type"),r(),a(10,"th"),l(11,"Watch"),r(),a(12,"th"),l(13,"User"),r(),a(14,"th"),l(15,"Media Status"),r(),a(16,"th"),l(17,"Produced On"),r(),a(18,"th"),l(19,"Status"),r(),a(20,"th"),l(21,"Created"),r(),a(22,"th"),l(23,"Action"),r()()(),a(24,"tbody"),p(25,Ni,73,41,"tr",31),r()()()),n&2){let e=u();o(25),s("ngForOf",e.mItems)}}function Hi(n,i){if(n&1){let e=w();a(0,"li",61)(1,"a",62),_("click",function(){let m=x(e).$implicit,d=u(2);return S(d.onChangePage(m.url))}),r()()}if(n&2){let e=i.$implicit;s("ngClass",le(2,Mi,e.active,!e.url)),o(),s("innerHTML",e.label,Z)}}function Di(n,i){if(n&1&&(a(0,"div")(1,"ul",59),p(2,Hi,2,5,"li",60),r()()),n&2){let e=u();o(2),s("ngForOf",e.links)}}function ji(n,i){n&1&&(a(0,"p",63),l(1,"No items"),r())}var ot=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ne("",E.required),this.itemForm=new Ve({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.allItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}onDelete(i){Ht.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mMediaService.deleteItem(i).subscribe({next:m=>{m&&(this.mItems=this.mItems.filter(d=>d.id!==i.id),this.mToastrService.error(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}}))})}onSearch(i){this.mProgress=!0,this.mMediaService.searchItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.mToastrService.success(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(v(L),v(T),v(k))};static \u0275cmp=F({type:n,selectors:[["app-index"]],standalone:!1,decls:38,vars:9,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["routerLink","/media/create",1,"btn","btn-warning","btn-sm"],[1,"bi","bi-plus-circle-fill"],[1,"card-tools"],[3,"ngSubmit","formGroup"],[1,"input-group","input-group-sm",2,"width","150px"],["type","text","formControlName","search_term","placeholder","Search",1,"form-control","float-right",3,"ngClass"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-search"],["class","invalid-feedback","type","alert",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf","ngIfElse"],["type","alert",1,"invalid-feedback"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener",1,"text-decoration-none1",3,"routerLink","queryParams"],[1,"bi","bi-eye-fill"],[1,"alert","py-0","m-0","text-center","rounded-5",3,"ngClass"],["target","_blank","rel","noopener",1,"text-decoration-none","badge","rounded-pill",3,"routerLink","ngClass"],[1,"text-nowrap"],["data-bs-toggle","modal",1,"btn","btn-outline-dark","btn-sm","me-1"],[1,"btn","btn-dark","btn-sm","me-1",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash2-fill"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"text-muted",3,"innerHTML"],["class","text-decoration-none","data-bs-dismiss","modal",3,"routerLink",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"modal-footer","bg-dark"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-sm"],["data-bs-dismiss","modal",1,"text-decoration-none",3,"routerLink"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1){let m=w();p(0,Pi,1,0,"app-progress",1),a(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),l(7,"Media"),r()(),a(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),l(12,"Home"),r()(),a(13,"li",10),l(14,"Media"),r()()()()()(),a(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"a",16),c(23,"i",17),l(24," Create "),r()(),a(25,"div",18)(26,"form",19),_("ngSubmit",function(){return x(m),S(t.onSearch(t.itemForm.value))}),a(27,"div",20),c(28,"input",21),a(29,"div",22)(30,"button",23),c(31,"i",24),r()(),p(32,Ai,2,1,"div",25),r()()()(),a(33,"div",26),p(34,Ri,26,1,"div",27)(35,Di,3,1,"div",1)(36,ji,2,0,"ng-template",null,0,ae),r()()()()()()()}if(e&2){let m=X(37);s("ngIf",t.mProgress),o(26),s("formGroup",t.itemForm),o(2),s("ngClass",C(7,Ei,t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched))),o(4),s("ngIf",t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched)),o(2),s("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",m),o(),s("ngIf",t.links)}},dependencies:[M,O,P,A,$,Y,B,U,W,G,V,Et],encapsulation:2})};var qt=Be(Ze());var Ui=n=>({"is-invalid":n}),$i=()=>["/media/watch"],Wi=n=>({video:n});function Gi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function zi(n,i){if(n&1&&(a(0,"div",10),p(1,Gi,2,0,"div",0),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("autoplay"))==null||e.errors==null?null:e.errors.required)}}function Qi(n,i){if(n&1&&(a(0,"div",11)(1,"a",12),c(2,"app-media-card",13),r()()),n&2){let e=i.$implicit;o(),s("routerLink",D(3,$i))("queryParams",C(4,Wi,e.id)),o(),s("data",e)}}function Yi(n,i){n&1&&c(0,"app-loader")}function Ji(n,i){if(n&1){let e=w();a(0,"div")(1,"form",1),_("ngSubmit",function(){x(e);let m=u();return S(m.onSubmit(m.itemForm.value))}),a(2,"div",2)(3,"h6",3),l(4,"Up next"),r(),a(5,"div",4)(6,"label",5),l(7,"AUTOPLAY"),r(),a(8,"input",6),H("ngModelChange",function(m){x(e);let d=u();return R(d.mCurrentUser.autoplay,m)||(d.mCurrentUser.autoplay=m),S(m)}),_("change",function(){x(e);let m=u();return S(m.onSubmit(m.itemForm.value))}),r(),p(9,zi,2,1,"div",7),r()()(),a(10,"div",8),_("scrolled",function(){x(e);let m=u();return S(m.onLoadMore())}),p(11,Qi,3,6,"div",9),r(),a(12,"div"),p(13,Yi,1,0,"app-loader",0),r()()}if(n&2){let e,t,m=u();o(),s("formGroup",m.itemForm),o(7),N("ngModel",m.mCurrentUser.autoplay),s("checked",m.mCurrentUser.autoplay)("ngClass",C(10,Ui,((e=m.itemForm.get("autoplay"))==null?null:e.invalid)&&(((e=m.itemForm.get("autoplay"))==null?null:e.dirty)||((e=m.itemForm.get("autoplay"))==null?null:e.touched)))),o(),s("ngIf",((t=m.itemForm.get("autoplay"))==null?null:t.invalid)&&(((t=m.itemForm.get("autoplay"))==null?null:t.dirty)||((t=m.itemForm.get("autoplay"))==null?null:t.touched))),o(),s("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!m.mHasMorePages||m.mLoadingMore),o(),s("ngForOf",m.mItems),o(2),s("ngIf",m.mLoadingMore)}}var De=class n{constructor(i,e,t,m,d,b){this.mMediaService=i;this.mProfileService=e;this.mToastrService=t;this.fb=m;this.mAuthService=d;this.router=b;this.itemForm=this.fb.group({autoplay:["",E.required]})}data;item;itemForm;mProgress=!1;mItems=[];mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;mCurrentUser;mCurrentIndex=0;ngOnInit(){this.item=this.data,this.mCurrentUser=this.mAuthService?.currentUser}ngOnChanges(i){i.data&&this.data&&(this.item=this.data,this.mItems=[],this.index(this.mCurrentPage))}index(i){let e=typeof i=="string"?i:`?page=${this.mCurrentPage}`;this.mMediaService.relatedItems(e,this.item.id).subscribe({next:t=>{this.mCurrentPage===1?this.mItems=t.data:this.mItems=[...this.mItems,...t.data],this.mLinks=t.links,this.mLoadingMore=!1;let m=this.mLinks.find(d=>d.label==="Next &raquo;");this.mHasMorePages=!!m?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let i=this.mLinks.find(e=>e.label==="Next &raquo;");i?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(i)):this.mHasMorePages=!1}onSubmit(i){let e={user_id:this.mCurrentUser.id,autoplay:i.autoplay};this.mProgress=!0,this.mProfileService.updateAutoplay(e).subscribe({next:t=>{t&&(this.mAuthService.saveUserLocally(t),this.mToastrService.success(t.message),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}playNextVideo(){if(this.mCurrentUser?.autoplay===!0){let i=this.mItems[this.mCurrentIndex];if(!i)return;this.router.navigate(["/media/watch"],{queryParams:{video:i.id}})}else qt.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-primary"},buttonsStyling:!1}).fire({title:"Video Finished!",text:`${this.item.title} ended!`,icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Home"}).then(e=>{e.isConfirmed&&this.router.navigate(["/dashboard"])})}static \u0275fac=function(e){return new(e||n)(v(L),v(Rt),v(T),v(J),v(He),v(Q))};static \u0275cmp=F({type:n,selectors:[["app-related"]],inputs:{data:"data"},standalone:!1,features:[We],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-start","justify-content-between","mb-3"],[1,"mb-0"],[1,"form-check","form-switch"],["for","switchCheckDefault",1,"form-check-label","text-muted"],["type","checkbox","formControlName","autoplay",1,"form-check-input",3,"ngModelChange","change","ngModel","checked","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","mb-3",4,"ngFor","ngForOf"],["role","alert",1,"invalid-feedback","d-block"],[1,"mb-3"],[1,"text-decoration-none","text-reset",3,"routerLink","queryParams"],[3,"data"]],template:function(e,t){e&1&&p(0,Ji,14,12,"div",0),e&2&&s("ngIf",t.mItems&&t.mItems.length>0)},dependencies:[M,O,P,A,$,Je,B,U,W,G,et,Re,tt],encapsulation:2})};var Ut=Be(Ze());var lt=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${y.base_url}/media-comments`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${y.base_url}/media-comments`;return this.http.post(e,i)}getOneItem(i){let e=`${y.base_url}/media-comments/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${y.base_url}/media-comments/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${y.base_url}/media-comments/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${y.base_url}/unpaginated-items-media-comments`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${y.base_url}/search-media-comments`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}filteredItems(i,e){let t=`${y.base_url}/filtered-media-comments/${e}`;return this.http.get(t+i,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||n)(K(k),K(ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var $t=n=>({"is-invalid":n});function Xi(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Zi(n,i){if(n&1&&(a(0,"div",13),p(1,Xi,2,0,"div",12),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("text"))==null||e.errors==null?null:e.errors.required)}}function en(n,i){if(n&1&&(a(0,"div"),l(1),r()),n&2){let e=u(2).$implicit;o(),h(" ",e.text," ")}}function tn(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function nn(n,i){if(n&1&&(a(0,"div",13),p(1,tn,2,0,"div",12),r()),n&2){let e,t=u(5);o(),s("ngIf",(e=t.mItemForm.get("comment_text"))==null||e.errors==null?null:e.errors.required)}}function rn(n,i){if(n&1){let e=w();a(0,"div")(1,"form",2),_("ngSubmit",function(){x(e);let m=u(2).$implicit,d=u(2);return S(d.onUpdate(d.mItemForm.value,m.id))}),a(2,"input",21),H("ngModelChange",function(m){x(e);let d=u(2).$implicit;return R(d.text,m)||(d.text=m),S(m)}),r(),p(3,nn,2,1,"div",9),a(4,"div",10)(5,"button",22),_("click",function(){x(e);let m=u(4);return S(m.onCancelEdit())}),l(6,"Cancel"),r(),a(7,"button",11),l(8,"Save"),r()()()()}if(n&2){let e,t,m=u(2).$implicit,d=u(2);o(),s("formGroup",d.mItemForm),o(),N("ngModel",m.text),s("ngClass",C(5,$t,((e=d.mItemForm.get("comment_text"))==null?null:e.invalid)&&(((e=d.mItemForm.get("comment_text"))==null?null:e.dirty)||((e=d.mItemForm.get("comment_text"))==null?null:e.touched)))),o(),s("ngIf",((t=d.mItemForm.get("comment_text"))==null?null:t.invalid)&&(((t=d.mItemForm.get("comment_text"))==null?null:t.dirty)||((t=d.mItemForm.get("comment_text"))==null?null:t.touched))),o(4),s("disabled",d.mItemForm.invalid)}}function an(n,i){if(n&1&&(a(0,"div"),p(1,en,2,1,"div",12)(2,rn,9,7,"div",12),r()),n&2){let e=u().index,t=u(2);o(),s("ngIf",t.mEditIndex!==e),o(),s("ngIf",t.mEditIndex===e)}}function on(n,i){if(n&1&&(a(0,"div")(1,"h6",23),l(2),a(3,"span",24),l(4),r()(),a(5,"div",25),l(6),r()()),n&2){let e=u().$implicit;o(2),h("",e==null||e.user==null?null:e.user.name," "),o(2),f(e.readable_date),o(2),f(e.text)}}function ln(n,i){if(n&1){let e=w();a(0,"div",26)(1,"span",27),c(2,"i",28),r(),a(3,"ul",29)(4,"li")(5,"a",30),_("click",function(){x(e);let m=u().index,d=u(2);return S(d.onStartEdit(m))}),c(6,"i",31),l(7," Edit"),r()(),a(8,"li")(9,"a",30),_("click",function(){x(e);let m=u().$implicit,d=u(2);return S(d.onDelete(m))}),c(10,"i",32),l(11," Delete"),r()()()()}}function mn(n,i){if(n&1&&(a(0,"div",16)(1,"div",17),l(2),r(),a(3,"div",18),p(4,an,3,2,"div",12)(5,on,7,3,"div",12),r(),a(6,"div",19),p(7,ln,12,0,"div",20),r()()),n&2){let e=i.$implicit,t=i.index,m=u(2);o(2),h(" ",m.mAppContextService.getInitials(e.user==null?null:e.user.name)," "),o(2),s("ngIf",m.mEditIndex!==null),o(),s("ngIf",m.mEditIndex!==t),o(2),s("ngIf",m.mCurrentUser.id==(e.user==null?null:e.user.id))}}function sn(n,i){n&1&&c(0,"app-loader")}function dn(n,i){if(n&1){let e=w();a(0,"div")(1,"div",14),_("scrolled",function(){x(e);let m=u();return S(m.onLoadMore())}),p(2,mn,8,4,"div",15),r(),a(3,"div"),p(4,sn,1,0,"app-loader",12),r()()}if(n&2){let e=u();o(),s("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!e.mHasMorePages||e.mLoadingMore),o(),s("ngForOf",e.mItems),o(2),s("ngIf",e.mLoadingMore)}}var je=class n{constructor(i,e,t,m,d){this.mCommentService=i;this.mToastrService=e;this.mAppContextService=t;this.mAuthService=m;this.fb=d;this.itemForm=this.fb.group({text:["",E.required]}),this.mItemForm=this.fb.group({comment_text:["",E.required]})}data;item;mItems=[];mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;itemForm;mProgress=!1;mItemForm;mEditIndex=null;mCurrentUser;ngOnInit(){this.item=this.data,this.mCurrentUser=this.mAuthService?.currentUser}ngOnChanges(i){i.data&&this.data&&(this.item=this.data,this.mItems=[],this.mCurrentPage=1,this.index(this.mCurrentPage))}index(i){let e=typeof i=="string"?i:`?page=${this.mCurrentPage}`;this.mCommentService.filteredItems(e,this.item.id).subscribe({next:t=>{this.mCurrentPage===1?this.mItems=t.data:this.mItems=[...this.mItems,...t.data],this.mLinks=t.links,this.mLoadingMore=!1;let m=this.mLinks.find(d=>d.label==="Next &raquo;");this.mHasMorePages=!!m?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let i=this.mLinks.find(e=>e.label==="Next &raquo;");i?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(i)):this.mHasMorePages=!1}onSubmit(i){let e={media_id:this.item.id,text:i.text};this.mProgress=!0,this.mCommentService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.item=t.data.item,this.mItems=[Ct({},t.data.comment),...this.mItems],this.itemForm.reset(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message)}})}onDelete(i){Ut.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mCommentService.deleteItem(i).subscribe({next:m=>{m&&(this.mItems=this.mItems.filter(d=>d.id!==i.id),this.item=m.item.media,this.mToastrService.error(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}}))})}onStartEdit(i){this.mEditIndex=i}onCancelEdit(){this.mEditIndex=null}onUpdate(i,e){this.mEditIndex=null;let t={id:e,text:i.comment_text};this.mProgress=!0,this.mCommentService.updateItem(t).subscribe({next:m=>{m&&(m.status==="success"&&(this.mItems=this.mItems.map(d=>d.id===t.id?m.data:d),this.mToastrService.success(m.message)),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message)}})}static \u0275fac=function(e){return new(e||n)(v(lt),v(T),v(k),v(He),v(J))};static \u0275cmp=F({type:n,selectors:[["app-comments"]],inputs:{data:"data"},standalone:!1,features:[We],decls:17,vars:9,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"row","g-2","align-items-start"],["for","text",1,"form-label","required1"],[1,"col-auto"],[1,"rounded-circle","bg-warning","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"col"],["formControlName","text",1,"form-control",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end","my-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],[4,"ngIf"],["role","alert",1,"invalid-feedback","d-block"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","d-flex align-items-start mb-3",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","mb-3"],[1,"rounded-circle","bg-secondary","text-light","d-flex","justify-content-center","align-items-center","fw-medium",2,"width","32px","height","32px"],[1,"ms-2","flex-grow-1"],[1,"ms-auto","d-flex","align-items-start"],["class","dropdown",4,"ngIf"],["formControlName","comment_text",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted"],[1,"mt-0","text-muted","justify-text"],[1,"dropdown"],["data-bs-toggle","dropdown","type","button",1,"p-0","border-0","bg-transparent"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash2"]],template:function(e,t){if(e&1&&(a(0,"div",0)(1,"div",1)(2,"form",2),_("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),a(3,"div",3)(4,"label",4),l(5),r(),a(6,"div",5)(7,"div",6),l(8),r()(),a(9,"div",7),c(10,"input",8),p(11,Zi,2,1,"div",9),a(12,"div",10)(13,"button",11),l(14,"Submit"),r()()()()()(),a(15,"div",1),p(16,dn,5,5,"div",12),r()()),e&2){let m,d;o(2),s("formGroup",t.itemForm),o(3),f(t.item.total_comments),o(3),h(" ",t.mAppContextService.getInitials(t.mCurrentUser==null?null:t.mCurrentUser.name)," "),o(2),s("ngClass",C(7,$t,((m=t.itemForm.get("text"))==null?null:m.invalid)&&(((m=t.itemForm.get("text"))==null?null:m.dirty)||((m=t.itemForm.get("text"))==null?null:m.touched)))),o(),s("ngIf",((d=t.itemForm.get("text"))==null?null:d.invalid)&&(((d=t.itemForm.get("text"))==null?null:d.dirty)||((d=t.itemForm.get("text"))==null?null:d.touched))),o(2),s("disabled",t.itemForm.invalid),o(3),s("ngIf",t.mItems&&t.mItems.length>0)}},dependencies:[M,O,P,$,Y,B,U,W,G,et,tt],encapsulation:2})};var un=["mRelatedComponent"],vn=n=>({"text-primary":n}),fn=n=>({"text-warning":n}),ht=n=>({"is-invalid":n});function gn(n,i){n&1&&c(0,"app-progress")}function _n(n,i){if(n&1){let e=w();a(0,"app-hls-player",58),_("mVideoEnded",function(){x(e);let m=u();return S(m.onVideoEnded())}),r()}if(n&2){let e=u();s("data",e.item)}}function hn(n,i){n&1&&(a(0,"span"),l(1,","),r())}function yn(n,i){if(n&1&&(a(0,"a",59),l(1),p(2,hn,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;q("routerLink","/categories/show/",e.category_id,""),o(),h(" ",e.name,""),o(),s("ngIf",!t)}}function bn(n,i){if(n&1&&c(0,"app-comments",60),n&2){let e=u();s("data",e.item)}}function Cn(n,i){if(n&1&&c(0,"app-related",60,0),n&2){let e=u();s("data",e.item)}}function xn(n,i){if(n&1){let e=w();a(0,"div",63)(1,"input",64),_("change",function(m){let d=x(e).$implicit,b=u(2);return S(b.onSave(d,m))}),r(),a(2,"label",65),l(3),r()()}if(n&2){let e=i.$implicit,t=u(2);o(),s("checked",t.isInList(e.id,t.item==null?null:t.item.media_playlists)),o(2),f(e.name)}}function Sn(n,i){if(n&1&&(a(0,"div",61),p(1,xn,4,2,"div",62),r()),n&2){let e=u();o(),s("ngForOf",e.mPlaylists)}}function In(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function En(n,i){if(n&1&&(a(0,"div",80),p(1,In,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function wn(n,i){if(n&1&&(a(0,"option",81),l(1),r()),n&2){let e=i.$implicit;oe("value",e.id),o(),f(e.name)}}function Fn(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Tn(n,i){if(n&1&&(a(0,"div",82),p(1,Fn,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function kn(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Mn(n,i){if(n&1&&(a(0,"div",80),p(1,kn,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Pn(n,i){if(n&1){let e=w();a(0,"form",66),_("ngSubmit",function(){x(e);let m=u();return S(m.onSubmit(m.itemForm.value))}),a(1,"div",5)(2,"div",10)(3,"div",61)(4,"label",67),l(5,"Name:"),r(),c(6,"input",68),p(7,En,2,1,"div",69),r(),a(8,"div",61)(9,"label",70),l(10,"Type:"),r(),a(11,"select",71)(12,"option",72),l(13,"--- Select type ---"),r(),p(14,wn,2,2,"option",73),r(),p(15,Tn,2,1,"div",74),r(),a(16,"div",61)(17,"label",75),l(18,"Description:"),r(),c(19,"textarea",76),p(20,Mn,2,1,"div",69),r()()(),a(21,"div",77)(22,"button",78),_("click",function(){x(e);let m=u();return S(m.onCancelCreate())}),l(23,"Cancel"),r(),a(24,"button",79),l(25,"Create"),r()()()}if(n&2){let e,t,m,d,b,I,g=u();s("formGroup",g.itemForm),o(6),s("ngClass",C(9,ht,((e=g.itemForm.get("name"))==null?null:e.invalid)&&(((e=g.itemForm.get("name"))==null?null:e.dirty)||((e=g.itemForm.get("name"))==null?null:e.touched)))),o(),s("ngIf",((t=g.itemForm.get("name"))==null?null:t.invalid)&&(((t=g.itemForm.get("name"))==null?null:t.dirty)||((t=g.itemForm.get("name"))==null?null:t.touched))),o(4),s("ngClass",C(11,ht,((m=g.itemForm.get("type_id"))==null?null:m.invalid)&&(((m=g.itemForm.get("type_id"))==null?null:m.dirty)||((m=g.itemForm.get("type_id"))==null?null:m.touched)))),o(3),s("ngForOf",g.mTypes),o(),s("ngIf",((d=g.itemForm.get("type_id"))==null?null:d.invalid)&&(((d=g.itemForm.get("type_id"))==null?null:d.dirty)||((d=g.itemForm.get("type_id"))==null?null:d.touched))),o(4),s("ngClass",C(13,ht,((b=g.itemForm.get("description"))==null?null:b.invalid)&&(((b=g.itemForm.get("description"))==null?null:b.dirty)||((b=g.itemForm.get("description"))==null?null:b.touched)))),o(),s("ngIf",((I=g.itemForm.get("description"))==null?null:I.invalid)&&(((I=g.itemForm.get("description"))==null?null:I.dirty)||((I=g.itemForm.get("description"))==null?null:I.touched))),o(4),s("disabled",g.itemForm.invalid)}}function On(n,i){if(n&1){let e=w();a(0,"div")(1,"p",83),_("click",function(){x(e);let m=u();return S(m.onShowCreate())}),c(2,"i",84),l(3,"Create a new playlist"),r()()}}var mt=class n{constructor(i,e,t,m,d,b,I){this.route=i;this.mMediaService=e;this.mPlaylistService=t;this.mToastrService=m;this.mAppContextService=d;this.router=b;this.fb=I;this.itemForm=this.fb.group({name:["",E.required],type_id:["",E.required],description:["",E.nullValidator]}),this.myPlaylists(),this.index()}id;item={};mCurrentUrl="";mItem="";mCreateIndex=0;itemForm;mEditIndex=null;mProgress=!1;mRelatedComponent;mPlaylists=[];mTypes=[];ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.mItem=this.item,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.mCurrentUrl=window.location.origin+this.router.url}index(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mTypes=i.data.types,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}toggleReact(i,e){let t={id:i.id,type_id:e};this.mMediaService.reactItem(t).subscribe({next:m=>{m&&(m.status==="success"&&(e==1?this.mToastrService.success(m.message):this.mToastrService.error(m.message),this.mItem=m.data),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}copyUrl(){navigator.clipboard.writeText(this.mCurrentUrl).then(()=>{this.mToastrService.success("Link copied to clipboard!")})}onVideoEnded(){this.mRelatedComponent&&this.mRelatedComponent.playNextVideo()}onSubmit(i){let e={name:i.name,type_id:i.type_id,description:i.description};this.mProgress=!0,this.mPlaylistService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.mPlaylists=[t.item,...this.mPlaylists??[]],this.itemForm.reset(),this.onCancelCreate(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onShowCreate(){this.mCreateIndex=1}onCancelCreate(){this.mCreateIndex=0}myPlaylists(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mPlaylists=i.data.playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}isInList(i,e){return e?.some(t=>t.playlist_id===i)??!1}onSave(i,e){if(e.target.checked){let m={media_id:this.item.id,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.addItem(m).subscribe({next:d=>{d&&(d.status==="success"&&this.mToastrService.success(d.message),this.mProgress=!1)},error:d=>{d.error.message&&this.mToastrService.error(d.error.message),this.mProgress=!1}})}else{let m={media_id:this.item.id,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.removeItem(m).subscribe({next:d=>{d&&(d.status==="success"&&this.mToastrService.error(d.message),this.mProgress=!1)},error:d=>{d.error.message&&this.mToastrService.error(d.error.message),this.mProgress=!1}})}}static \u0275fac=function(e){return new(e||n)(v(ve),v(L),v(it),v(T),v(k),v(Q),v(J))};static \u0275cmp=F({type:n,selectors:[["app-show"]],viewQuery:function(e,t){if(e&1&&Pe(un,5),e&2){let m;Oe(m=Ae())&&(t.mRelatedComponent=m.first)}},standalone:!1,decls:102,vars:32,consts:[["mRelatedComponent",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-9","order-md-1"],[1,"col-md-12"],[3,"data","mVideoEnded",4,"ngIf"],[1,"fw-bold1","card-title1"],[1,"col-6"],[1,"d-flex","justify-content-end"],[1,"mx-2","btn",3,"click"],[3,"ngClass"],[1,"bi","me-2",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#modal",1,"mx-2","btn"],[1,"bi","bi-bookmark-fill","me-2"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"mx-2","btn"],[1,"bi","bi-share-fill","me-2"],[1,"text-decoration-none","text-reset1","d-flex","align-items-center",3,"routerLink"],[1,"rounded-circle","bg-primary","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"ms-2"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted","mt-0"],[1,"py-2"],[1,"justify-text",2,"word-break","break-word","white-space","normal",3,"innerHTML"],["for","categories",1,"text-muted","me-2"],["class","text-decoration-none",3,"routerLink",4,"ngFor","ngForOf"],["for","tags",1,"text-muted","me-2"],["href","#",1,"text-decoration-none",3,"click"],[3,"data",4,"ngIf"],[1,"col-md-3","order-md-2"],["id","myModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-flex","justify-content-center","gap-3"],["target","_blank",1,"btn","btn-outline-primary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-facebook","fs-4"],["target","_blank",1,"btn","btn-outline-info","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-twitter","fs-4"],["target","_blank",1,"btn","btn-outline-secondary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-linkedin","fs-4"],[1,"bi","bi-whatsapp","fs-4"],[1,"modal-footer"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text","text-primary",3,"click"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["class","mb-3",4,"ngIf"],[1,"modal-footer","d-block"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"mVideoEnded","data"],[1,"text-decoration-none",3,"routerLink"],[3,"data"],[1,"mb-3"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"me-1"],[3,"ngSubmit","formGroup"],["for","name",1,"form-label","required"],["formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","description",1,"form-label","required1"],["formControlName","description",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[3,"click"],[1,"bi","bi-plus-lg","me-2"]],template:function(e,t){e&1&&(p(0,gn,1,0,"app-progress",1),a(1,"section")(2,"div",2),c(3,"div",3),r(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",5)(11,"div",9)(12,"div",5)(13,"div",10),p(14,_n,1,1,"app-hls-player",11),r(),a(15,"div",10)(16,"h6",12),l(17),r()(),a(18,"div",13),l(19),r(),a(20,"div",13)(21,"div",14)(22,"span",15),_("click",function(){return t.toggleReact(t.item,1)}),a(23,"span",16),c(24,"i",17),l(25),r()(),a(26,"span",15),_("click",function(){return t.toggleReact(t.item,2)}),a(27,"span",16),c(28,"i",17),l(29),r()(),a(30,"span",18),c(31,"i",19),a(32,"span"),l(33,"SAVE"),r()(),a(34,"span",20),c(35,"i",21),a(36,"span"),l(37,"SHARE"),r()()()(),a(38,"div",10),c(39,"hr"),r(),a(40,"div",10)(41,"a",22)(42,"div",23),l(43),r(),a(44,"div",24)(45,"h6",25),l(46),r(),a(47,"div",26),l(48),r()()()(),a(49,"div",10)(50,"div",27),c(51,"p",28),a(52,"div")(53,"label",29),l(54,"Categories:"),r(),p(55,yn,3,4,"a",30),r(),a(56,"div")(57,"label",31),l(58,"Tags:"),r(),a(59,"a",32),_("click",function(d){return d.preventDefault()}),l(60),r()()()(),a(61,"div",10),c(62,"hr"),r(),a(63,"div",10),p(64,bn,1,1,"app-comments",33),r()()(),a(65,"div",34),p(66,Cn,2,1,"app-related",33),r()()()()()()()()(),a(67,"section")(68,"div",35)(69,"div",36)(70,"div",37)(71,"div",38)(72,"h5",39),l(73,"Share media"),r(),c(74,"button",40),r(),a(75,"div",41)(76,"div",42)(77,"a",43),c(78,"i",44),r(),a(79,"a",45),c(80,"i",46),r(),a(81,"a",47),c(82,"i",48),r(),a(83,"a",43),c(84,"i",49),r()()(),a(85,"div",50)(86,"div",51)(87,"input",52),H("ngModelChange",function(d){return R(t.mCurrentUrl,d)||(t.mCurrentUrl=d),d}),r(),a(88,"div",53),_("click",function(){return t.copyUrl()}),l(89,"COPY"),r()()()()()(),a(90,"div",54)(91,"div",36)(92,"div",37)(93,"div",38)(94,"h5",39),l(95,"Save to..."),r(),c(96,"button",40),r(),a(97,"div",41),p(98,Sn,2,1,"div",55),r(),a(99,"div",56),p(100,Pn,26,15,"form",57)(101,On,4,0,"div",1),r()()()()()),e&2&&(s("ngIf",t.mProgress),o(14),s("ngIf",t.item),o(3),f(t.item.title),o(2),h(" ",t.item.total_views," "),o(4),s("ngClass",C(28,vn,t.mItem.is_liked)),o(),s("ngClass",t.mItem.is_liked?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"),o(),h("",t.mItem.likes_count," "),o(2),s("ngClass",C(30,fn,t.mItem.is_disliked)),o(),s("ngClass",t.mItem.is_disliked?"bi-hand-thumbs-down-fill":"bi-hand-thumbs-down"),o(),h("",t.mItem.dislikes_count," "),o(12),q("routerLink","/users/show/",t.item.user==null?null:t.item.user.id,""),o(2),h(" ",t.mAppContextService.getInitials(t.item.user==null?null:t.item.user.name)," "),o(3),f(t.item.user==null?null:t.item.user.name),o(2),h("Published ",t.item.readable_date,""),o(3),s("innerHTML",t.item.description,Z),o(4),s("ngForOf",t.item.media_categories),o(5),f(t.item.tags),o(4),s("ngIf",t.item),o(2),s("ngIf",t.item),o(11),s("href","https://www.facebook.com/sharer/sharer.php?u="+t.mCurrentUrl,z),o(2),s("href","https://twitter.com/intent/tweet?url="+t.mCurrentUrl,z),o(2),s("href","https://www.linkedin.com/shareArticle?url="+t.mCurrentUrl,z),o(2),s("href","https://wa.me/?text="+t.mCurrentUrl,z),o(4),N("ngModel",t.mCurrentUrl),o(11),s("ngIf",t.mPlaylists&&t.mPlaylists.length>0),o(2),s("ngIf",t.mCreateIndex===1),o(),s("ngIf",t.mCreateIndex===0))},dependencies:[M,O,P,A,$,ge,_e,Y,fe,B,U,Ke,W,G,V,Xe,De,je],encapsulation:2})};var An=()=>["/media/watch"],Ln=n=>({video:n}),Vn=(n,i)=>({active:n,disabled:i});function Nn(n,i){n&1&&c(0,"app-progress")}function Rn(n,i){if(n&1&&(a(0,"div")(1,"a",13)(2,"div",14),c(3,"img",15),r(),a(4,"div",16)(5,"h6",17),l(6),r(),a(7,"div",18)(8,"span"),l(9),r(),l(10,"\xA0\u2022 "),a(11,"span"),l(12),r(),l(13,"\xA0\u2022 "),a(14,"span"),l(15),r()()()()()),n&2){let e=i.$implicit;o(),s("routerLink",D(7,An))("queryParams",C(8,Ln,e.media==null?null:e.media.id)),o(2),s("src",e.media.thumbnail_url,z),o(3),f(e.media==null?null:e.media.title),o(3),f(e.media==null||e.media.user==null?null:e.media.user.name),o(3),f(e.media==null?null:e.media.total_views),o(3),f(e.media==null?null:e.media.readable_date)}}function Hn(n,i){if(n&1&&(a(0,"div"),p(1,Rn,16,10,"div",12),r()),n&2){let e=u();o(),s("ngForOf",e.mItems)}}function Dn(n,i){if(n&1){let e=w();a(0,"li",21)(1,"a",22),_("click",function(){let m=x(e).$implicit,d=u(2);return S(d.onChangePage(m.url))}),r()()}if(n&2){let e=i.$implicit;s("ngClass",le(2,Vn,e.active,!e.url)),o(),s("innerHTML",e.label,Z)}}function jn(n,i){if(n&1&&(a(0,"div")(1,"ul",19),p(2,Dn,2,5,"li",20),r()()),n&2){let e=u();o(2),s("ngForOf",e.links)}}function qn(n,i){n&1&&(a(0,"p",23),l(1,"No items"),r())}var st=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ne("",E.required),this.itemForm=new Ve({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.likedMediaItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(v(L),v(T),v(k))};static \u0275cmp=F({type:n,selectors:[["app-liked"]],standalone:!1,decls:17,vars:5,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-decoration-none","text-reset","me-1",3,"routerLink","queryParams"],[1,"col-md-2"],["width","100%","height","auto","alt","Thumbnail",1,"img-fluid","rounded","ratio","ratio-16x9",3,"src"],[1,"col-md-10"],[1,"mb-1"],[1,"text-muted","text-xs"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1&&(p(0,Nn,1,0,"app-progress",1),a(1,"section")(2,"div",2),c(3,"div",3),r(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),l(11),r()(),a(12,"div",10),p(13,Hn,2,1,"div",11)(14,jn,3,1,"div",1)(15,qn,2,0,"ng-template",null,0,ae),r()()()()()()()),e&2){let m=X(16);s("ngIf",t.mProgress),o(11),h(" Liked media (",t.mItems.length,") "),o(2),s("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",m),o(),s("ngIf",t.links)}},dependencies:[M,O,P,A,V],encapsulation:2})};var Bn=()=>["/media/watch"],Un=n=>({video:n}),$n=(n,i)=>({active:n,disabled:i});function Wn(n,i){n&1&&c(0,"app-progress")}function Gn(n,i){if(n&1&&(a(0,"div")(1,"a",13)(2,"div",14),c(3,"img",15),r(),a(4,"div",16)(5,"h6",17),l(6),r(),a(7,"div",18)(8,"span"),l(9),r(),l(10,"\xA0\u2022 "),a(11,"span"),l(12),r(),l(13,"\xA0\u2022 "),a(14,"span"),l(15),r()()()()()),n&2){let e=i.$implicit;o(),s("routerLink",D(7,Bn))("queryParams",C(8,Un,e.media==null?null:e.media.id)),o(2),s("src",e.media.thumbnail_url,z),o(3),f(e.media==null?null:e.media.title),o(3),f(e.media==null||e.media.user==null?null:e.media.user.name),o(3),f(e.media==null?null:e.media.total_views),o(3),f(e.media==null?null:e.media.readable_date)}}function zn(n,i){if(n&1&&(a(0,"div"),p(1,Gn,16,10,"div",12),r()),n&2){let e=u();o(),s("ngForOf",e.mItems)}}function Qn(n,i){if(n&1){let e=w();a(0,"li",21)(1,"a",22),_("click",function(){let m=x(e).$implicit,d=u(2);return S(d.onChangePage(m.url))}),r()()}if(n&2){let e=i.$implicit;s("ngClass",le(2,$n,e.active,!e.url)),o(),s("innerHTML",e.label,Z)}}function Yn(n,i){if(n&1&&(a(0,"div")(1,"ul",19),p(2,Qn,2,5,"li",20),r()()),n&2){let e=u();o(2),s("ngForOf",e.links)}}function Jn(n,i){n&1&&(a(0,"p",23),l(1,"No items"),r())}var dt=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ne("",E.required),this.itemForm=new Ve({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.historyMediaItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(v(L),v(T),v(k))};static \u0275cmp=F({type:n,selectors:[["app-history"]],standalone:!1,decls:17,vars:5,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-decoration-none","text-reset","me-1",3,"routerLink","queryParams"],[1,"col-md-2"],["width","100%","height","auto","alt","Thumbnail",1,"img-fluid","rounded","ratio","ratio-16x9",3,"src"],[1,"col-md-10"],[1,"mb-1"],[1,"text-muted","text-xs"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1&&(p(0,Wn,1,0,"app-progress",1),a(1,"section")(2,"div",2),c(3,"div",3),r(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),l(11),r()(),a(12,"div",10),p(13,zn,2,1,"div",11)(14,Yn,3,1,"div",1)(15,Jn,2,0,"ng-template",null,0,ae),r()()()()()()()),e&2){let m=X(16);s("ngIf",t.mProgress),o(11),h(" History (",t.mItems.length,") "),o(2),s("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",m),o(),s("ngIf",t.links)}},dependencies:[M,O,P,A,V],encapsulation:2})};var Gt=n=>({"is-invalid":n});function Kn(n,i){n&1&&c(0,"app-progress")}function Xn(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Zn(n,i){if(n&1&&(a(0,"div",32),p(1,Xn,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function er(n,i){if(n&1&&(a(0,"option",33),l(1),r()),n&2){let e=i.$implicit;oe("value",e.id),o(),f(e.alias)}}function tr(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function ir(n,i){if(n&1&&(a(0,"div",34),p(1,tr,2,0,"div",0),r()),n&2){let e,t=u();o(),s("ngIf",(e=t.itemForm.get("status_id"))==null||e.errors==null?null:e.errors.required)}}var pt=class n{constructor(i,e,t,m,d){this.mToastrService=i;this.mMediaService=e;this.fb=t;this.router=m;this.route=d;this.itemForm=this.fb.group({title:["",E.required],status_id:["",E.required]})}mStatus;itemForm;mProgress=!1;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{i&&(this.mStatus=i.data.approval_status,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onSubmit(i){let e={id:this.id,title:i.title,status_id:i.status_id};this.mProgress=!0,this.mMediaService.processItem(e).subscribe({next:t=>{t&&(this.mToastrService.success(t.message),this.router.navigateByUrl("/media"),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(v(T),v(L),v(J),v(Q),v(ve))};static \u0275cmp=F({type:n,selectors:[["app-process"]],standalone:!1,decls:47,vars:14,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","title",1,"form-label","required"],["type","text","formControlName","title","readonly","",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","status_id",1,"form-label","required"],["formControlName","status_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/media",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"]],template:function(e,t){if(e&1&&(p(0,Kn,1,0,"app-progress",0),a(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),l(7,"Media"),r()(),a(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),l(12,"Home"),r()(),a(13,"li",9),l(14,"Media"),r(),a(15,"li",10),l(16,"Process"),r()()()()(),a(17,"div",3)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14),l(22," Process Media "),r(),c(23,"div",15),r(),a(24,"div",16)(25,"form",17),_("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),a(26,"div",18)(27,"div",19)(28,"div",20)(29,"label",21),l(30,"Title:"),r(),c(31,"input",22),p(32,Zn,2,1,"div",23),r()(),a(33,"div",19)(34,"div",20)(35,"label",24),l(36,"Status:"),r(),a(37,"select",25),H("ngModelChange",function(d){return R(t.item.status_id,d)||(t.item.status_id=d),d}),a(38,"option",26),l(39,"--- Select status ---"),r(),p(40,er,2,2,"option",27),r(),p(41,ir,2,1,"div",28),r()()(),a(42,"div",29)(43,"a",30),l(44,"Cancel"),r(),a(45,"button",31),l(46,"Submit"),r()()()()()()()()()),e&2){let m,d,b,I;s("ngIf",t.mProgress),o(25),s("formGroup",t.itemForm),o(6),s("ngModel",t.item.title)("ngClass",C(10,Gt,((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched)))),o(),s("ngIf",((d=t.itemForm.get("title"))==null?null:d.invalid)&&(((d=t.itemForm.get("title"))==null?null:d.dirty)||((d=t.itemForm.get("title"))==null?null:d.touched))),o(5),N("ngModel",t.item.status_id),s("ngClass",C(12,Gt,((b=t.itemForm.get("status_id"))==null?null:b.invalid)&&(((b=t.itemForm.get("status_id"))==null?null:b.dirty)||((b=t.itemForm.get("status_id"))==null?null:b.touched)))),o(3),s("ngForOf",t.mStatus),o(),s("ngIf",((I=t.itemForm.get("status_id"))==null?null:I.invalid)&&(((I=t.itemForm.get("status_id"))==null?null:I.dirty)||((I=t.itemForm.get("status_id"))==null?null:I.touched))),o(4),s("disabled",t.itemForm.invalid)}},dependencies:[M,O,P,A,$,ge,_e,Y,fe,B,U,W,G,V],encapsulation:2})};var zt=Be(Ze());var ct=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${y.base_url}/reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${y.base_url}/reports`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}getOneItem(i){let e=`${y.base_url}/reports/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${y.base_url}/reports/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${y.base_url}/reports/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${y.base_url}/unpaginated-items-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${y.base_url}/search-reports`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}insightsItems(){let i=`${y.base_url}/insights-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}analyticsItems(){let i=`${y.base_url}/analytics-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||n)(K(k),K(ue))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var rr=["chart"],ut=class n{constructor(i,e,t,m){this.mContext=i;this.mReportService=e;this.mToastrService=t;this.mAppInfo=m}mProgress=!1;item;chart;chartOptions;mMediaPerMonth;mViewsPerMonth;mLikesPerMonth;mCommentsPerMonth;ngOnInit(){this.index()}index(){this.mProgress=!0,this.mReportService.analyticsItems().subscribe({next:i=>{i&&(this.item=i.data,this.mMediaPerMonth=Object.values(this.item.media_per_month),this.mViewsPerMonth=Object.values(this.item.views_per_month),this.mLikesPerMonth=Object.values(this.item.likes_per_month),this.mCommentsPerMonth=Object.values(this.item.comments_per_month),this.reports())},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}reports(){this.chartOptions={series:[{name:"Media",data:this.mMediaPerMonth},{name:"Views",data:this.mViewsPerMonth},{name:"Likes",data:this.mLikesPerMonth},{name:"Comments",data:this.mCommentsPerMonth}],chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},title:{text:"Yearly Trend",align:"center"}}}static \u0275fac=function(e){return new(e||n)(v(k),v(ct),v(T),v(Pt))};static \u0275cmp=F({type:n,selectors:[["app-analytics"]],viewQuery:function(e,t){if(e&1&&Pe(rr,5),e&2){let m;Oe(m=Ae())&&(t.chart=m.first)}},standalone:!1,decls:125,vars:50,consts:[["chart",""],[1,"row"],[1,"col-12","col-sm-6","col-md-3"],[1,"info-box"],[1,"info-box-icon","text-bg-primary","shadow-sm"],[1,"bi","bi-gear-fill"],[1,"info-box-content"],[1,"info-box-text"],[1,"info-box-number"],[1,"info-box-icon","text-bg-danger","shadow-sm"],[1,"bi","bi-hand-thumbs-up-fill"],[1,"info-box-icon","text-bg-success","shadow-sm"],[1,"bi","bi-collection-play-fill"],[1,"info-box-icon","text-bg-warning","shadow-sm"],[1,"bi","bi-people-fill"],[1,"col-md-12"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-8"],[1,"text-center"],["id","report-chart"],[3,"series","chart","xaxis","title"],[1,"col-md-4"],[1,"progress-group"],[1,"float-end"],[1,"progress","progress-sm"],[1,"progress-bar","text-bg-primary"],[1,"progress-bar","text-bg-success"],[1,"progress-bar","text-bg-danger"],[1,"progress-bar","text-bg-warning"],[1,"card-footer"],[1,"col-md-4","col-6"],[1,"text-center","border-end"],[1,"text-success"],[1,"bi","bi-caret-right-fill"],[1,"fw-bold","mb-0"],[1,"text-uppercase"],[1,"text-info"],[1,"text-danger"]],template:function(e,t){e&1&&(a(0,"section")(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),c(5,"i",5),r(),a(6,"div",6)(7,"span",7),l(8,"Memory Usage"),r(),a(9,"span",8),l(10),r()()()(),a(11,"div",2)(12,"div",3)(13,"span",9),c(14,"i",10),r(),a(15,"div",6)(16,"span",7),l(17,"Likes"),r(),a(18,"span",8),l(19),ee(20,"number"),r()()()(),a(21,"div",2)(22,"div",3)(23,"span",11),c(24,"i",12),r(),a(25,"div",6)(26,"span",7),l(27,"Media"),r(),a(28,"span",8),l(29),ee(30,"number"),r()()()(),a(31,"div",2)(32,"div",3)(33,"span",13),c(34,"i",14),r(),a(35,"div",6)(36,"span",7),l(37,"Total Views"),r(),a(38,"span",8),l(39),ee(40,"number"),r()()()()(),a(41,"div",1)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h5",18),l(46,"Recap Report"),r()(),a(47,"div",19)(48,"div",1)(49,"div",20)(50,"p",21)(51,"strong"),l(52),r()(),c(53,"div",22),a(54,"div"),c(55,"apx-chart",23,0),r()(),a(57,"div",24)(58,"p",21)(59,"strong"),l(60,"Overview"),r()(),a(61,"div",25),l(62," Memory "),a(63,"span",26)(64,"b"),l(65),r(),l(66),r(),a(67,"div",27),c(68,"div",28),r()(),a(69,"div",25),l(70," Likes "),a(71,"span",26)(72,"b"),l(73),r(),l(74),r(),a(75,"div",27),c(76,"div",29),r()(),a(77,"div",25),l(78," Media "),a(79,"span",26)(80,"b"),l(81),r(),l(82),r(),a(83,"div",27),c(84,"div",30),r()(),a(85,"div",25),l(86," Views "),a(87,"span",26)(88,"b"),l(89),r(),l(90),r(),a(91,"div",27),c(92,"div",31),r()()()()(),a(93,"div",32)(94,"div",1)(95,"div",33)(96,"div",34)(97,"span",35),c(98,"i",36),l(99),r(),a(100,"h5",37),l(101),ee(102,"number"),r(),a(103,"span",38),l(104,"TOTAL COMMENTS"),r()()(),a(105,"div",33)(106,"div",34)(107,"span",39),c(108,"i",36),l(109),r(),a(110,"h5",37),l(111),ee(112,"number"),r(),a(113,"span",38),l(114,"TOTAL VIEWS"),r()()(),a(115,"div",33)(116,"div",21)(117,"span",40),c(118,"i",36),l(119),r(),a(120,"h5",37),l(121),ee(122,"number"),r(),a(123,"span",38),l(124,"TOTAL MEDIA"),r()()()()()()()()()),e&2&&(o(10),h(" ",t.mContext.formatMemory(t.item==null?null:t.item.my_total_memory)," "),o(9),f(Ce(20,32,t.item.my_total_likes,"1.0-0")),o(10),f(Ce(30,35,t.item.my_total_media,"1.0-0")),o(10),f(Ce(40,38,t.item.my_total_views,"1.0-0")),o(13),ze("Analytics: 1 Jan,",t.mAppInfo.year," - 31 Dec,",t.mAppInfo.year,""),o(3),s("series",t.chartOptions.series)("chart",t.chartOptions.chart)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title),o(10),f(t.mContext.formatMemory(t.item.my_total_memory)),o(),h("/",t.mContext.formatMemory(t.item.total_memory),""),o(2),be("width",t.item.total_memory_percentage,"%"),o(5),f(t.item.my_total_likes),o(),h("/",t.item.total_likes,""),o(2),be("width",t.item.total_likes_percentage,"%"),o(5),f(t.item.my_total_media),o(),h("/",t.item.total_media,""),o(2),be("width",t.item.total_media_percentage,"%"),o(5),f(t.item.my_total_views),o(),h("/",t.item.total_views,""),o(2),be("width",t.item.total_views_percentage,"%"),o(7),h(" ",t.item.total_comments_percentage,"%"),o(2),f(Ce(102,41,t.item.my_total_comments,"1.0-0")),o(8),h(" ",t.item.total_views_percentage,"%"),o(2),f(Ce(112,44,t.item.my_total_views,"1.0-0")),o(8),h(" ",t.item.total_media_percentage,"%"),o(2),f(Ce(122,47,t.item.my_total_media,"1.0-0")))},dependencies:[At,wt],encapsulation:2})};var or=()=>({exact:!0}),lr=(n,i,e)=>({"bg-warning text-dark":n,"bg-primary":i,"bg-danger":e}),mr=(n,i,e)=>({"bg-secondary":n,"bg-warning text-dark":i,"bg-dark":e}),sr=()=>[1,2,4];function dr(n,i){n&1&&c(0,"app-progress")}function pr(n,i){if(n&1&&(a(0,"div",27)(1,"div",28)(2,"label",29),l(3,"Biography:"),r(),a(4,"div",13),l(5),r()()()),n&2){let e=u();o(5),f(e.mCurrentUser.bio)}}function cr(n,i){if(n&1&&(a(0,"div",43)(1,"a",44),c(2,"i",45),l(3," Process "),r()()),n&2){let e=u(2).$implicit;o(),q("routerLink","/media/process/",e.id,"")}}function ur(n,i){if(n&1){let e=w();a(0,"div")(1,"div",35)(2,"a",36),l(3,"Show"),r(),a(4,"a",37),l(5,"Edit"),r(),a(6,"button",38),_("click",function(){x(e);let m=u().$implicit,d=u(3);return S(d.onDelete(m))}),l(7,"Delete"),r()(),c(8,"app-media-card",39),a(9,"div",40)(10,"span",41),l(11),r(),a(12,"span",41),l(13),r()(),p(14,cr,4,2,"div",42),r()}if(n&2){let e=u().$implicit,t=u(3);o(2),q("routerLink","/media/show/",e.id,""),o(2),q("routerLink","/media/edit/",e.id,""),o(4),s("data",e),o(2),s("ngClass",Le(10,lr,e.status_id==1,e.status_id==2,e.status_id==3)),o(),h(" ",e.status==null?null:e.status.name,""),o(),s("ngClass",Le(14,mr,e.media_status_id==1,e.media_status_id==2,e.media_status_id==3)),o(),h(" ",e.media_status==null?null:e.media_status.name,""),o(),s("ngIf",t.mAppContextService.hasRoles(D(18,sr)))}}function vr(n,i){if(n&1&&(a(0,"div",34),p(1,ur,15,19,"div",1),r()),n&2){let e=i.$implicit;o(),s("ngIf",e)}}function fr(n,i){if(n&1&&(a(0,"div",32),p(1,vr,2,1,"div",33),r()),n&2){let e=u(2);o(),s("ngForOf",e.myMedia)}}function gr(n,i){n&1&&(a(0,"p",46),l(1,"No items"),r())}function _r(n,i){if(n&1&&(a(0,"div",27)(1,"div",28)(2,"label",30),l(3,"Uploads:"),r(),p(4,fr,2,1,"div",31)(5,gr,2,0,"ng-template",null,0,ae),r()()),n&2){let e=X(6),t=u();o(4),s("ngIf",t.myMedia&&t.myMedia.length>0)("ngIfElse",e)}}function hr(n,i){if(n&1&&(a(0,"a",48),c(1,"app-media-card",39),r()),n&2){let e=u().$implicit;q("routerLink","/media/show/",e.id,""),o(),s("data",e)}}function yr(n,i){if(n&1&&(a(0,"div",34),p(1,hr,2,3,"a",47),r()),n&2){let e=i.$implicit;o(),s("ngIf",e)}}function br(n,i){if(n&1&&(a(0,"div",32),p(1,yr,2,1,"div",33),r()),n&2){let e=u(2);o(),s("ngForOf",e.myPlaylists)}}function Cr(n,i){n&1&&(a(0,"p",46),l(1,"No items"),r())}function xr(n,i){if(n&1&&(a(0,"div",27)(1,"div",28)(2,"label",29),l(3,"Playlists:"),r(),p(4,br,2,1,"div",31)(5,Cr,2,0,"ng-template",null,0,ae),r()()),n&2){let e=X(6),t=u();o(4),s("ngIf",t.myPlaylists&&t.myPlaylists.length>0)("ngIfElse",e)}}function Sr(n,i){if(n&1&&(a(0,"a",48),c(1,"app-media-card",39),r()),n&2){let e=u().$implicit;q("routerLink","/media/show/",e.id,""),o(),s("data",e)}}function Ir(n,i){if(n&1&&(a(0,"div",34),p(1,Sr,2,3,"a",47),a(2,"div",49)(3,"small"),l(4,"Server Link: "),a(5,"span",13),l(6),r()(),c(7,"br"),a(8,"small"),l(9,"Stream Key: "),a(10,"span",13),l(11),r()()()()),n&2){let e=i.$implicit;o(),s("ngIf",e),o(5),f(e.server_link),o(5),f(e.stream_key)}}function Er(n,i){if(n&1&&(a(0,"div",32),p(1,Ir,12,3,"div",33),r()),n&2){let e=u(2);o(),s("ngForOf",e.mLiveStreams)}}function wr(n,i){n&1&&(a(0,"p",46),l(1,"No items"),r())}function Fr(n,i){if(n&1&&(a(0,"div",27)(1,"div",28)(2,"label",29),l(3,"Live Streams:"),r(),p(4,Er,2,1,"div",31)(5,wr,2,0,"ng-template",null,0,ae),r()()),n&2){let e=X(6),t=u();o(4),s("ngIf",t.mLiveStreams&&t.mLiveStreams.length>0)("ngIfElse",e)}}function Tr(n,i){n&1&&(a(0,"div",27)(1,"div",28)(2,"label",50),l(3,"Analytics:"),r(),c(4,"app-analytics"),r()())}var ye=class n{constructor(i,e,t,m,d){this.mAuthService=i;this.mAppContextService=e;this.mMediaService=t;this.mToastrService=m;this.router=d}mCurrentUser;mInitials;itemForm;mProgress=!1;myMedia=[];myPlaylists=[];mLiveStreams=[];ngOnInit(){this.mCurrentUser=this.mAuthService.currentUser,this.mInitials=this.mCurrentUser.name.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),this.index(this.mCurrentUser.id)}index(i){this.mProgress=!0,this.mMediaService.myMedia(i).subscribe({next:e=>{e&&(this.myMedia=e.data.my_media,this.myPlaylists=e.data.my_playlists,this.myPlaylists=e.data.my_playlists,this.mLiveStreams=e.data.live_streams,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}onDelete(i){zt.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mMediaService.deleteItem(i).subscribe({next:m=>{m&&(this.myMedia=this.myMedia.filter(d=>d.id!==i.id),this.mToastrService.error(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}}))})}static \u0275fac=function(e){return new(e||n)(v(He),v(k),v(L),v(T),v(Q))};static \u0275cmp=F({type:n,selectors:[["app-read"]],standalone:!1,decls:46,vars:13,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"user-image","rounded-circle","bg-primary","text-white","fw-bold","d-inline-flex","justify-content-center","align-items-center","me-3",2,"width","64px","height","64px","font-size","1rem"],[1,"mb-0","fw-semibold"],[1,"text-muted"],["id","myTab","role","tablist",1,"nav","nav-tabs","border-0","text-uppercase"],["role","presentation",1,"nav-item"],["routerLink","/media/about","routerLinkActive","active","id","home-tab","data-bs-toggle","tab","data-bs-target","#home","type","button","role","tab","aria-controls","home",1,"nav-link","border-0","text-uppercase","text-sm",3,"routerLinkActiveOptions"],["routerLink","/media/my-media","routerLinkActive","active","id","media-tab","data-bs-toggle","tab","data-bs-target","#media","type","button","role","tab","aria-controls","media",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/my-playlist","routerLinkActive","active","id","playlist-tab","data-bs-toggle","tab","data-bs-target","#playlist","type","button","role","tab","aria-controls","playlist",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/live-streams","routerLinkActive","active","id","live-streams-tab","data-bs-toggle","tab","data-bs-target","#live-streams","type","button","role","tab","aria-controls","live-streams",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/analytics","routerLinkActive","active","id","analytics-tab","data-bs-toggle","tab","data-bs-target","#analytics","type","button","role","tab","aria-controls","analytics",1,"nav-link","border-0","text-uppercase","text-sm"],[1,"card-tools"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"card-body","p-0","m-0"],["id","myTabContent",1,"tab-content","container-fluid","p-3"],["class","tab-pane fade show active",4,"ngIf"],[1,"tab-pane","fade","show","active"],[1,"mb-3"],["for","bio",1,"form-label"],["for","uploads",1,"form-label"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],["role","group","aria-label","Basic mixed styles example",1,"btn-group","w-100","mb-1"],[1,"btn","btn-dark","btn-sm",3,"routerLink"],[1,"btn","btn-primary","btn-sm",3,"routerLink"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[3,"data"],[1,"d-flex","align-items-center1","gap-2"],[1,"badge","rounded-pill",3,"ngClass"],["class","my-1",4,"ngIf"],[1,"my-1"],[1,"btn","btn-primary","btn-sm","w-100",3,"routerLink"],[1,"bi","bi-pencil-square"],[1,"p-5","text-center","text-muted"],["class","text-decoration-none text-reset",3,"routerLink",4,"ngIf"],[1,"text-decoration-none","text-reset",3,"routerLink"],[1,"no-wrap"],["for","analytics",1,"form-label"]],template:function(e,t){e&1&&(p(0,dr,1,0,"app-progress",1),a(1,"section")(2,"div",2),c(3,"div",3),r(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),l(13),r(),a(14,"div")(15,"p",12),l(16),r(),a(17,"small",13),l(18),r()()(),a(19,"ul",14)(20,"li",15)(21,"button",16),l(22," About "),r()(),a(23,"li",15)(24,"button",17),l(25," My Media "),r()(),a(26,"li",15)(27,"button",18),l(28," Playlist "),r()(),a(29,"li",15)(30,"button",19),l(31," Live Streams "),r()(),a(32,"li",15)(33,"button",20),l(34," Analytics "),r()()()(),a(35,"div",21)(36,"a",22),c(37,"i",23),l(38," Edit Profile "),r()()(),a(39,"div",24)(40,"div",25),p(41,pr,6,1,"div",26)(42,_r,7,2,"div",26)(43,xr,7,2,"div",26)(44,Fr,7,2,"div",26)(45,Tr,5,0,"div",26),r()()()()()()()()),e&2&&(s("ngIf",t.mProgress),o(13),h(" ",t.mAppContextService.getInitials(t.mCurrentUser.name)," "),o(3),f(t.mCurrentUser.name),o(2),f(t.mCurrentUser.role==null?null:t.mCurrentUser.role.name),o(3),s("routerLinkActiveOptions",D(12,or)),o(15),q("routerLink","/profile/edit/",t.mCurrentUser.id,""),o(5),s("ngIf",t.router.url==="/media/about"),o(),s("ngIf",t.router.url==="/media/my-media"),o(),s("ngIf",t.router.url==="/media/my-playlist"),o(),s("ngIf",t.router.url==="/media/live-streams"),o(),s("ngIf",t.router.url==="/media/analytics"))},dependencies:[M,O,P,A,Ft,V,Re,ut],encapsulation:2})};var kr=["mRelatedComponent"],Mr=n=>({"text-primary":n}),Pr=n=>({"text-warning":n}),bt=()=>["/media/watch"],Or=n=>({category:n}),Qt=n=>({"active bg-warning bg-opacity-10":n}),Yt=(n,i)=>({video:n,playlist:i}),yt=n=>({"is-invalid":n});function Ar(n,i){n&1&&c(0,"app-progress")}function Lr(n,i){if(n&1){let e=w();a(0,"app-hls-player",59),_("mVideoEnded",function(){x(e);let m=u();return S(m.onVideoEnded())}),r()}if(n&2){let e=u();s("data",e.item)}}function Vr(n,i){n&1&&(a(0,"span"),l(1,","),r())}function Nr(n,i){if(n&1&&(a(0,"a",60),l(1),p(2,Vr,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;s("routerLink",D(4,bt))("queryParams",C(5,Or,e.category_id)),o(),h(" ",e.name,""),o(),s("ngIf",!t)}}function Rr(n,i){if(n&1&&c(0,"app-comments",61),n&2){let e=u();s("data",e.item)}}function Hr(n,i){if(n&1&&(a(0,"a",73)(1,"div",74),c(2,"app-media-card",61),r()()),n&2){let e=i.$implicit,t=u(2);s("ngClass",C(4,Qt,e.media.id===t.mVideoId))("routerLink",D(6,bt))("queryParams",le(7,Yt,e.media.id,t.mPlaylistId)),o(2),s("data",e.media)}}function Dr(n,i){if(n&1&&(a(0,"div",62)(1,"div",63)(2,"h2",64)(3,"button",65)(4,"div",66)(5,"span",67),l(6),r(),c(7,"br"),a(8,"small",68),l(9),r()()()(),a(10,"div",69)(11,"div",70)(12,"div",71),p(13,Hr,3,10,"a",72),r()()()()()),n&2){let e=u();o(6),h(" ",e.mPlaylist==null?null:e.mPlaylist.name," "),o(3),It(" ",e.mPlaylist==null||e.mPlaylist.user==null?null:e.mPlaylist.user.name," - ",e.mCurrentMediaPlaylistIndex+1,"/",e.mPlaylist==null?null:e.mPlaylist.total_media," "),o(4),s("ngForOf",e.mMediaPlaylist)}}function jr(n,i){if(n&1&&(a(0,"a",73)(1,"div",74),c(2,"div",76)(3,"app-media-card",61),r()()),n&2){let e=i.$implicit,t=u(2);s("ngClass",C(4,Qt,e.media.id===t.mVideoId))("routerLink",D(6,bt))("queryParams",le(7,Yt,e.media.id,t.mPlaylistId)),o(3),s("data",e.media)}}function qr(n,i){if(n&1&&(a(0,"div",62)(1,"div",63)(2,"h2",64)(3,"button",65)(4,"div",66)(5,"span",67),l(6),r(),c(7,"br"),a(8,"small",68),l(9),r()()()(),a(10,"div",69)(11,"div",75)(12,"div",71),p(13,jr,4,10,"a",72),r()()()()()),n&2){let e=u();o(6),h(" ",e.mCategory==null?null:e.mCategory.name," "),o(3),ze(" ",e.mCurrentCategorylistIndex+1,"/",e.mCategory==null?null:e.mCategory.total_media," "),o(4),s("ngForOf",e.mCategorylist)}}function Br(n,i){if(n&1&&c(0,"app-related",61,0),n&2){let e=u();s("data",e.item)}}function Ur(n,i){if(n&1){let e=w();a(0,"div",79)(1,"input",80),_("change",function(m){let d=x(e).$implicit,b=u(2);return S(b.onSave(d,m))}),r(),a(2,"label",81),l(3),r()()}if(n&2){let e=i.$implicit,t=u(2);o(),s("checked",t.isInList(e.id,t.item.media_playlists)),o(2),f(e.name)}}function $r(n,i){if(n&1&&(a(0,"div",77),p(1,Ur,4,2,"div",78),r()),n&2){let e=u();o(),s("ngForOf",e.mMyPlaylists)}}function Wr(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Gr(n,i){if(n&1&&(a(0,"div",96),p(1,Wr,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function zr(n,i){if(n&1&&(a(0,"option",97),l(1),r()),n&2){let e=i.$implicit;oe("value",e.id),o(),f(e.name)}}function Qr(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Yr(n,i){if(n&1&&(a(0,"div",98),p(1,Qr,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function Jr(n,i){n&1&&(a(0,"div"),l(1,"This field is required."),r())}function Kr(n,i){if(n&1&&(a(0,"div",96),p(1,Jr,2,0,"div",1),r()),n&2){let e,t=u(2);o(),s("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Xr(n,i){if(n&1){let e=w();a(0,"form",82),_("ngSubmit",function(){x(e);let m=u();return S(m.onSubmit(m.itemForm.value))}),a(1,"div",5)(2,"div",10)(3,"div",77)(4,"label",83),l(5,"Name:"),r(),c(6,"input",84),p(7,Gr,2,1,"div",85),r(),a(8,"div",77)(9,"label",86),l(10,"Type:"),r(),a(11,"select",87)(12,"option",88),l(13,"--- Select type ---"),r(),p(14,zr,2,2,"option",89),r(),p(15,Yr,2,1,"div",90),r(),a(16,"div",77)(17,"label",91),l(18,"Description:"),r(),c(19,"textarea",92),p(20,Kr,2,1,"div",85),r()()(),a(21,"div",93)(22,"button",94),_("click",function(){x(e);let m=u();return S(m.onCancelCreate())}),l(23,"Cancel"),r(),a(24,"button",95),l(25,"Create"),r()()()}if(n&2){let e,t,m,d,b,I,g=u();s("formGroup",g.itemForm),o(6),s("ngClass",C(9,yt,((e=g.itemForm.get("name"))==null?null:e.invalid)&&(((e=g.itemForm.get("name"))==null?null:e.dirty)||((e=g.itemForm.get("name"))==null?null:e.touched)))),o(),s("ngIf",((t=g.itemForm.get("name"))==null?null:t.invalid)&&(((t=g.itemForm.get("name"))==null?null:t.dirty)||((t=g.itemForm.get("name"))==null?null:t.touched))),o(4),s("ngClass",C(11,yt,((m=g.itemForm.get("type_id"))==null?null:m.invalid)&&(((m=g.itemForm.get("type_id"))==null?null:m.dirty)||((m=g.itemForm.get("type_id"))==null?null:m.touched)))),o(3),s("ngForOf",g.mTypes),o(),s("ngIf",((d=g.itemForm.get("type_id"))==null?null:d.invalid)&&(((d=g.itemForm.get("type_id"))==null?null:d.dirty)||((d=g.itemForm.get("type_id"))==null?null:d.touched))),o(4),s("ngClass",C(13,yt,((b=g.itemForm.get("description"))==null?null:b.invalid)&&(((b=g.itemForm.get("description"))==null?null:b.dirty)||((b=g.itemForm.get("description"))==null?null:b.touched)))),o(),s("ngIf",((I=g.itemForm.get("description"))==null?null:I.invalid)&&(((I=g.itemForm.get("description"))==null?null:I.dirty)||((I=g.itemForm.get("description"))==null?null:I.touched))),o(4),s("disabled",g.itemForm.invalid)}}function Zr(n,i){if(n&1){let e=w();a(0,"div")(1,"p",99),_("click",function(){x(e);let m=u();return S(m.onShowCreate())}),c(2,"i",100),l(3,"Create a new playlist"),r()()}}var vt=class n{constructor(i,e,t,m,d,b,I){this.route=i;this.router=e;this.mMediaService=t;this.mToastrService=m;this.mPlaylistService=d;this.mAppContextService=b;this.fb=I;this.itemForm=this.fb.group({name:["",E.required],type_id:["",E.required],description:["",E.nullValidator]}),this.myMediaPlaylists(),this.index(),this.mCurrentUrl=window.location.origin+this.router.url}id;item={};mCurrentUrl="";mItem="";mCreateIndex=0;itemForm;mEditIndex=null;mProgress=!1;mMyPlaylists=[];mMyMediaPlaylists=[];mTypes=[];mRelatedComponent;mVideoId;mVideo;mPlaylistId;mPlaylist;mMediaPlaylist=[];mCurrentMediaPlaylistIndex=0;mCategoryId;mCategory;mCategorylist=[];mCurrentCategorylistIndex=0;ngOnInit(){this.route.queryParamMap.subscribe(i=>{this.mVideoId=i.get("video"),this.mPlaylistId=i.get("playlist"),this.mCategoryId=i.get("category"),this.mPlaylistId?this.loadPlaylistMediaAndIndex(()=>{this.mVideoId&&this.loadVideo(this.mVideoId)}):this.mCategoryId?this.loadCategoryMediaAndIndex(()=>{this.mVideoId&&this.loadVideo(this.mVideoId)}):this.mVideoId&&this.loadVideo(this.mVideoId)})}loadVideo(i){this.mProgress=!0,this.mMediaService.getOneItem(i).subscribe({next:e=>{e&&(this.item=e,this.mItem=this.item,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}toggleReact(i,e){let t={id:i.id,type_id:e};this.mMediaService.reactItem(t).subscribe({next:m=>{m&&(m.status==="success"&&(e==1?this.mToastrService.success(m.message):this.mToastrService.error(m.message),this.mItem=m.data),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}copyUrl(){navigator.clipboard.writeText(this.mCurrentUrl).then(()=>{this.mToastrService.success("Link copied to clipboard!")})}onSubmit(i){let e={name:i.name,type_id:i.type_id,description:i.description};this.mProgress=!0,this.mPlaylistService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.mMyPlaylists=[t.item,...this.mMyPlaylists??[]],this.itemForm.reset(),this.onCancelCreate(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{console.log(i),i&&(this.mTypes=i.data.media_types,this.mMyMediaPlaylists=i.data.media_playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onShowCreate(){this.mCreateIndex=1}onCancelCreate(){this.mCreateIndex=0}myMediaPlaylists(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mMyPlaylists=i.data.playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}isInList(i,e){return!i||!e?!1:e?.some(t=>t.playlist_id===i)??!1}onSave(i,e){if(e.preventDefault(),e.target.checked){let m={media_id:this.mVideoId,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.addItem(m).subscribe({next:d=>{d&&(d.status==="success"&&this.mToastrService.success(d.message),this.mProgress=!1)},error:d=>{d.error.message&&this.mToastrService.error(d.error.message),this.mProgress=!1}})}else{let m={media_id:this.mVideoId,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.removeItem(m).subscribe({next:d=>{d&&(d.status==="success"&&this.mToastrService.error(d.message),this.mProgress=!1)},error:d=>{d.error.message&&this.mToastrService.error(d.error.message),this.mProgress=!1}})}}onVideoEnded(){if(this.mPlaylistId&&this.mCurrentMediaPlaylistIndex<this.mMediaPlaylist.length-1){this.mCurrentMediaPlaylistIndex++;let i=this.mMediaPlaylist[this.mCurrentMediaPlaylistIndex];this.mVideoId=i.media.id,this.router.navigate(["/media/watch"],{queryParams:{video:this.mVideoId,playlist:this.mPlaylistId}})}else this.mVideoId&&this.mRelatedComponent&&this.mRelatedComponent.playNextVideo()}loadPlaylistMediaAndIndex(i){this.mProgress=!0,this.mMediaService.playlistMediaItem(this.mPlaylistId).subscribe({next:e=>{this.mPlaylist=e,this.mMediaPlaylist=e.media_playlist,this.mCurrentMediaPlaylistIndex=this.mMediaPlaylist.findIndex(t=>t.media.id===this.mVideoId),this.mCurrentMediaPlaylistIndex===-1&&this.mMediaPlaylist.length>0&&(this.mCurrentMediaPlaylistIndex=0,this.mVideoId=this.mMediaPlaylist[0].media.id),this.mProgress=!1,i&&i()},error:e=>{e.error?.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}loadCategoryMediaAndIndex(i){this.mProgress=!0,this.mMediaService.categoryMediaItem(this.mCategoryId).subscribe({next:e=>{this.mCategory=e,this.mCategorylist=e.media_category,this.mCurrentCategorylistIndex=this.mCategorylist.findIndex(t=>t.media.id===this.mVideoId),this.mCurrentCategorylistIndex===-1&&this.mCategorylist.length>0&&(this.mCurrentCategorylistIndex=0,this.mVideoId=this.mCategorylist[0].media.id),this.mProgress=!1,i&&i()},error:e=>{e.error?.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(v(ve),v(Q),v(L),v(T),v(it),v(k),v(J))};static \u0275cmp=F({type:n,selectors:[["app-watch"]],viewQuery:function(e,t){if(e&1&&Pe(kr,5),e&2){let m;Oe(m=Ae())&&(t.mRelatedComponent=m.first)}},standalone:!1,decls:105,vars:34,consts:[["mRelatedComponent",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-9","order-md-1"],[1,"col-md-12"],[3,"data","mVideoEnded",4,"ngIf"],[1,"fw-bold1","card-title1"],[1,"col-6"],[1,"d-flex","justify-content-end"],[1,"mx-2","btn",3,"click"],[3,"ngClass"],[1,"bi","me-2",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#modal",1,"mx-2","btn"],[1,"bi","bi-bookmark-fill","me-2"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"mx-2","btn"],[1,"bi","bi-share-fill","me-2"],[1,"text-decoration-none","text-reset1","d-flex","align-items-center",3,"routerLink"],[1,"rounded-circle","bg-primary","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"ms-2"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted","mt-0"],[1,"py-2"],[1,"justify-text",2,"word-break","break-word","white-space","normal",3,"innerHTML"],["for","categories",1,"text-muted","me-2"],["class","text-decoration-none",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["for","tags",1,"text-muted","me-2"],["href","#",1,"text-decoration-none",3,"click"],[3,"data",4,"ngIf"],[1,"col-md-3","order-md-2"],["class","accordion mb-3","id","accordionPanelsStayOpenExample",4,"ngIf"],["id","myModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-flex","justify-content-center","gap-3"],["target","_blank",1,"btn","btn-outline-primary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-facebook","fs-4"],["target","_blank",1,"btn","btn-outline-info","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-twitter","fs-4"],["target","_blank",1,"btn","btn-outline-secondary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-linkedin","fs-4"],[1,"bi","bi-whatsapp","fs-4"],[1,"modal-footer"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text","text-primary",3,"click"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["class","mb-3",4,"ngIf"],[1,"modal-footer","d-block"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"mVideoEnded","data"],[1,"text-decoration-none",3,"routerLink","queryParams"],[3,"data"],["id","accordionPanelsStayOpenExample",1,"accordion","mb-3"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne","aria-expanded","true","aria-controls","panelsStayOpen-collapseOne",1,"accordion-button"],[1,"align-items-start"],[1,"fw-semibold","text-truncate"],[1,"text-muted","text-xs"],["id","panelsStayOpen-collapseOne",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"list-group","list-group-numbered"],["class","list-group-item border-0 d-flex justify-content-between align-items-start text-decoration-none text-reset","queryParamsHandling","merge",3,"ngClass","routerLink","queryParams",4,"ngFor","ngForOf"],["queryParamsHandling","merge",1,"list-group-item","border-0","d-flex","justify-content-between","align-items-start","text-decoration-none","text-reset",3,"ngClass","routerLink","queryParams"],[1,"ms-2","me-auto","flex-grow-1"],[1,"accordion-body","p-0"],[1,"text-wrap",2,"word-break","break-word","white-space","normal"],[1,"mb-3"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"me-1"],[3,"ngSubmit","formGroup"],["for","name",1,"form-label","required"],["formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","description",1,"form-label","required1"],["formControlName","description",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[3,"click"],[1,"bi","bi-plus-lg","me-2"]],template:function(e,t){e&1&&(p(0,Ar,1,0,"app-progress",1),a(1,"section")(2,"div",2),c(3,"div",3),r(),a(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",5)(11,"div",9)(12,"div",5)(13,"div",10),p(14,Lr,1,1,"app-hls-player",11),r(),a(15,"div",10)(16,"h6",12),l(17),r()(),a(18,"div",13),l(19),r(),a(20,"div",13)(21,"div",14)(22,"span",15),_("click",function(){return t.toggleReact(t.item,1)}),a(23,"span",16),c(24,"i",17),l(25),r()(),a(26,"span",15),_("click",function(){return t.toggleReact(t.item,2)}),a(27,"span",16),c(28,"i",17),l(29),r()(),a(30,"span",18),c(31,"i",19),a(32,"span"),l(33,"SAVE"),r()(),a(34,"span",20),c(35,"i",21),a(36,"span"),l(37,"SHARE"),r()()()(),a(38,"div",10),c(39,"hr"),r(),a(40,"div",10)(41,"a",22)(42,"div",23),l(43),r(),a(44,"div",24)(45,"h6",25),l(46),r(),a(47,"div",26),l(48),r()()()(),a(49,"div",10)(50,"div",27),c(51,"p",28),a(52,"div")(53,"label",29),l(54,"Categories:"),r(),p(55,Nr,3,7,"a",30),r(),a(56,"div")(57,"label",31),l(58,"Tags:"),r(),a(59,"a",32),_("click",function(d){return d.preventDefault()}),l(60),r()()()(),a(61,"div",10),c(62,"hr"),r(),a(63,"div",10),p(64,Rr,1,1,"app-comments",33),r()()(),a(65,"div",34),p(66,Dr,14,5,"div",35)(67,qr,14,4,"div",35),a(68,"div"),p(69,Br,2,1,"app-related",33),r()()()()()()()()()(),a(70,"section")(71,"div",36)(72,"div",37)(73,"div",38)(74,"div",39)(75,"h5",40),l(76,"Share media"),r(),c(77,"button",41),r(),a(78,"div",42)(79,"div",43)(80,"a",44),c(81,"i",45),r(),a(82,"a",46),c(83,"i",47),r(),a(84,"a",48),c(85,"i",49),r(),a(86,"a",44),c(87,"i",50),r()()(),a(88,"div",51)(89,"div",52)(90,"input",53),H("ngModelChange",function(d){return R(t.mCurrentUrl,d)||(t.mCurrentUrl=d),d}),r(),a(91,"div",54),_("click",function(){return t.copyUrl()}),l(92,"COPY"),r()()()()()(),a(93,"div",55)(94,"div",37)(95,"div",38)(96,"div",39)(97,"h5",40),l(98,"Save to..."),r(),c(99,"button",41),r(),a(100,"div",42),p(101,$r,2,1,"div",56),r(),a(102,"div",57),p(103,Xr,26,15,"form",58)(104,Zr,4,0,"div",1),r()()()()()),e&2&&(s("ngIf",t.mProgress),o(14),s("ngIf",t.item),o(3),f(t.item.title),o(2),h(" ",t.item.total_views," "),o(4),s("ngClass",C(30,Mr,t.mItem.is_liked)),o(),s("ngClass",t.mItem.is_liked?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"),o(),h("",t.mItem.likes_count," "),o(2),s("ngClass",C(32,Pr,t.mItem.is_disliked)),o(),s("ngClass",t.mItem.is_disliked?"bi-hand-thumbs-down-fill":"bi-hand-thumbs-down"),o(),h("",t.mItem.dislikes_count," "),o(12),q("routerLink","/users/show/",t.item.user==null?null:t.item.user.id,""),o(2),h(" ",t.mAppContextService.getInitials(t.item.user==null?null:t.item.user.name)," "),o(3),f(t.item.user==null?null:t.item.user.name),o(2),h("Published ",t.item.readable_date,""),o(3),s("innerHTML",t.item.description,Z),o(4),s("ngForOf",t.item.media_categories),o(5),f(t.item.tags),o(4),s("ngIf",t.item),o(2),s("ngIf",t.mMediaPlaylist&&t.mPlaylist),o(),s("ngIf",t.mCategorylist&&t.mCategory),o(2),s("ngIf",t.item),o(11),s("href","https://www.facebook.com/sharer/sharer.php?u="+t.mCurrentUrl,z),o(2),s("href","https://twitter.com/intent/tweet?url="+t.mCurrentUrl,z),o(2),s("href","https://www.linkedin.com/shareArticle?url="+t.mCurrentUrl,z),o(2),s("href","https://wa.me/?text="+t.mCurrentUrl,z),o(4),N("ngModel",t.mCurrentUrl),o(11),s("ngIf",t.mMyPlaylists&&t.mMyPlaylists.length>0),o(2),s("ngIf",t.mCreateIndex===1),o(),s("ngIf",t.mCreateIndex===0))},dependencies:[M,O,P,A,$,ge,_e,Y,fe,B,U,Ke,W,G,V,Re,Xe,De,je],encapsulation:2})};var ea=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:ot,data:{title:"Index"}},{path:"create",component:rt,data:{title:"Create"}},{path:"edit/:id",component:at,data:{title:"Edit"}},{path:"show/:id",component:mt,data:{title:"Show"}},{path:"watch",component:vt,data:{title:"Watch"}},{path:"liked",component:st,data:{title:"Liked"}},{path:"history",component:dt,data:{title:"History"}},{path:"about",component:ye,data:{title:"Read"}},{path:"my-media",component:ye,data:{title:"Read"}},{path:"my-playlist",component:ye,data:{title:"Read"}},{path:"live-streams",component:ye,data:{title:"Index"}},{path:"analytics",component:ye,data:{title:"Index"}},{path:"process/:id",component:pt,data:{title:"Show"}}],ft=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ge({type:n});static \u0275inj=$e({imports:[Ye,qe.forChild(ea),qe]})};var Jt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Ge({type:n});static \u0275inj=$e({imports:[Ye,qe,Tt,kt,Nt.forRoot(),ft,Mt,Lt,Ot]})};export{Jt as MediaModule};
