import{a as xi}from"./chunk-FKZAS6O5.js";import{a as ct,b as bi,c as Ci}from"./chunk-I54EF5DA.js";import{a as _i}from"./chunk-EYF6IPMG.js";import{a as st,b as mt,c as dt,d as yi}from"./chunk-XSFCSYRR.js";import{a as ui,b as ot,c as ee,d as fi,e as E,f as W,g as z,h as Be,i as Ue,j as at,k as G,m as Q,n as J,o as Ce,p as xe,q as Se,r as te,s as vi,t as hi}from"./chunk-CMX3PDXK.js";import{h as F,j as q}from"./chunk-EQW2EAGM.js";import{a as lt,b as $e,c as b,d as We,e as k,h as gi}from"./chunk-LAPJ52ER.js";import{$ as h,A as Qt,Aa as $,Ab as Ye,B as ie,Ba as Ne,C as ne,Ca as De,Da as je,E as Jt,F as qe,G as S,Ga as oe,H as I,Ha as s,I as Yt,Ia as g,Ja as C,K as tt,Ka as Je,L as ue,La as j,M as Kt,Ma as H,Na as B,O as T,Oa as ai,P as Zt,Pa as U,Q as Lt,Qa as x,R as Xt,Ra as ve,Sa as He,Ta as ae,U as ei,Ua as nt,V as re,Va as Fe,W as Z,Wa as pe,X as a,Ya as li,_ as ti,a as Ht,b as Xe,ba as M,ca as Re,da as ii,ea as ni,eb as P,fa as c,fb as L,g as Mt,gb as O,h as Bt,hb as si,i as et,ia as At,ib as mi,j as Ft,ja as d,jb as rt,ka as Me,l as Ut,la as ri,lb as di,m as $t,n as kt,na as Vt,o as Te,oa as o,pa as r,qa as p,qb as ye,r as Pt,s as Wt,t as zt,ta as w,tb as ci,u as Gt,ub as be,va as y,wa as u,wb as X,x as Ot,xa as oi,xb as A,y as ce,ya as it,yb as pi,z as Ve,za as fe}from"./chunk-JHEHWCLN.js";import{a as Tt,f as Ke,g as Ze}from"./chunk-GAL4ENT6.js";var pt={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},qt=new Qt("config",{providedIn:"root",factory:()=>({modules:pt})});function ze(n){n||(Jt(ze),n=ne(tt));let i=new Xe(e=>n.onDestroy(e.next.bind(e)));return e=>e.pipe(zt(i))}var Ni=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],Di=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function ji(n,i){n&1&&p(0,"div",0)}function Hi(n,i){n&1&&p(0,"div",0)}var ut=(n,i)=>n||i||"html",Bi=()=>new Xe(n=>{let i=requestAnimationFrame(()=>{n.next(),n.complete()});return()=>cancelAnimationFrame(i)}),Ui=(()=>{class n{constructor(){this.config=ne(qt)||{modules:pt},this.quill$=$t(()=>Ze(this,null,function*(){if(!this.Quill){let e=document.addEventListener;document.addEventListener=document.__zone_symbol__addEventListener||document.addEventListener;let{Quill:t}=yield import("./chunk-AAUYG7N6.js");document.addEventListener=e,this.Quill=t}return this.config.customOptions?.forEach(e=>{let t=this.Quill.import(e.import);t.whitelist=e.whitelist,this.Quill.register(t,!0,this.config.suppressGlobalRegisterWarning)}),new Promise(e=>{this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning).subscribe(e)})})).pipe(Wt({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(e,t,l=this.config.beforeRender){let m=[this.registerCustomModules(e,t)];return l&&m.push(l()),kt(m).pipe(Ft(()=>e))}registerCustomModules(e,t,l){if(!Array.isArray(t))return Mt(e);let m=[];for(let f of t){let{path:_,implementation:v}=f;this.registeredModules.has(_)||(this.registeredModules.add(_),Bt(v)?m.push(v.pipe(Gt(N=>{e.register(_,N,l)}))):e.register(_,v,l))}return m.length>0?kt(m).pipe(Ft(()=>e)):Mt(e)}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$i=(()=>{class n{constructor(){this.format=T(void 0),this.theme=T(void 0),this.modules=T(void 0),this.debug=T(!1),this.readOnly=T(!1),this.placeholder=T(void 0),this.maxLength=T(void 0),this.minLength=T(void 0),this.required=T(!1),this.formats=T(void 0),this.customToolbarPosition=T("top"),this.sanitize=T(void 0),this.beforeRender=T(void 0),this.styles=T(null),this.registry=T(void 0),this.bounds=T(void 0),this.customOptions=T([]),this.customModules=T([]),this.trackChanges=T(void 0),this.classes=T(void 0),this.trimOnValidation=T(!1),this.linkPlaceholder=T(void 0),this.compareValues=T(!1),this.filterNull=T(!1),this.debounceTime=T(void 0),this.defaultEmptyValue=T(null),this.onEditorCreated=new ue,this.onEditorChanged=new ue,this.onContentChanged=new ue,this.onSelectionChanged=new ue,this.onFocus=new ue,this.onBlur=new ue,this.onNativeFocus=new ue,this.onNativeBlur=new ue,this.disabled=!1,this.toolbarPosition=Lt("top"),this.eventsSubscription=null,this.quillSubscription=null,this.elementRef=ne(Zt),this.cd=ne(li),this.domSanitizer=ne(ci),this.platformId=ne(Xt),this.renderer=ne(ti),this.zone=ne(Kt),this.service=ne(Ui),this.destroyRef=ne(tt),this.valueGetter=T(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let l=t,m=ut(this.format(),this.service.config.format);if(m==="text")l=e.getText();else if(m==="object")l=e.getContents();else if(m==="json")try{l=JSON.stringify(e.getContents())}catch{l=e.getText()}return l}),this.valueSetter=T((e,t)=>{let l=ut(this.format(),this.service.config.format);if(l==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(ei.HTML,t)),e.clipboard.convert({html:t});if(l==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,l)=>{let m=this.trackChanges()||this.service.config.trackChanges,f=!e&&!!this.onModelTouched&&(l==="user"||m&&m==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!f||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:l}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:l}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:l}),f&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,l)=>{let m=this.quillEditor.getText(),f=this.quillEditor.getContents(),_=this.quillEditor.getSemanticHTML();this.isEmptyValue(_)&&(_=this.defaultEmptyValue());let v=this.trackChanges()||this.service.config.trackChanges,N=(l==="user"||v&&v==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!N||this.zone.run(()=>{if(N){let Y=this.valueGetter();this.onModelChange(Y(this.quillEditor))}this.onContentChanged.emit({content:f,delta:e,editor:this.quillEditor,html:_,oldDelta:t,source:l,text:m}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,l,m)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let f=this.quillEditor.getText(),_=this.quillEditor.getContents(),v=this.quillEditor.getSemanticHTML();this.isEmptyValue(v)&&(v=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:_,delta:t,editor:this.quillEditor,event:e,html:v,oldDelta:l,source:m,text:f}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:l,range:t,source:m}),this.cd.markForCheck()})},this.destroyRef.onDestroy(()=>{this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null})}static normalizeClassNames(e){return e.trim().split(" ").reduce((l,m)=>{let f=m.trim();return f&&l.push(f),l},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){di(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(Ut(e=>this.service.beforeRender(e,this.customModules(),this.beforeRender()))).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),l=Object.assign({},this.modules()||this.service.config.modules);t?l.toolbar=t:l.toolbar===void 0&&(l.toolbar=pt.toolbar);let m=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;m===void 0&&(m="Insert text here ...");let f=this.styles();f&&Object.keys(f).forEach(D=>{this.renderer.setStyle(this.editorElem,D,f[D])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(D=>{let K=e.import(D.import);K.whitelist=D.whitelist,e.register(K,!0)});let _=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();_||(_=this.service.config.bounds?this.service.config.bounds:document.body);let v=this.debug();!v&&v!==!1&&this.service.config.debug&&(v=this.service.config.debug);let N=this.readOnly();!N&&this.readOnly()!==!1&&(N=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let Y=this.formats();if(!Y&&Y===void 0&&(Y=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:_,debug:v,formats:Y,modules:l,placeholder:m,readOnly:N,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){Te(this.quillEditor.scroll.domNode,"blur").pipe(ze(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));let D=this.quillEditor.getModule("toolbar");D.container&&Te(D.container,"mousedown").pipe(ze(this.destroyRef)).subscribe(K=>K.preventDefault())}if(this.onNativeFocus.observed&&Te(this.quillEditor.scroll.domNode,"focus").pipe(ze(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let K=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");K?.dataset&&(K.dataset.link=this.linkPlaceholder())}}),this.content){if(ut(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let _e=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(_e,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&Bi().pipe(ze(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){let t=e.styles.currentValue,l=e.styles.previousValue;l&&Object.keys(l).forEach(m=>{this.renderer.removeStyle(this.editorElem,m)}),t&&Object.keys(t).forEach(m=>{this.renderer.setStyle(this.editorElem,m,this.styles()[m])})}if(e.classes){let t=e.classes.currentValue,l=e.classes.previousValue;l&&this.removeClasses(l),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){n.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){n.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let t=ut(this.format(),this.service.config.format),m=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let f=this.quillEditor.getContents();if(JSON.stringify(f)===JSON.stringify(m))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(m);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,l=this.quillEditor.getText(),m=this.trimOnValidation()?l.trim().length:l.length===1&&l.trim().length===0?0:l.length-1,f=this.quillEditor.getContents().ops,_=!!f&&f.length===1&&[`
`,""].includes(f[0].insert?.toString());return this.minLength()&&m&&m<this.minLength()&&(e.minLengthError={given:m,minLength:this.minLength()},t=!1),this.maxLength()&&m>this.maxLength()&&(e.maxLengthError={given:m,maxLength:this.maxLength()},t=!1),this.required()&&!m&&_&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.eventsSubscription=new Ht,this.eventsSubscription.add(Te(this.quillEditor,"selection-change").subscribe(([l,m,f])=>{this.selectionChangeHandler(l,m,f)}));let e=Te(this.quillEditor,"text-change"),t=Te(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(Pt(this.debounceTime())),t=t.pipe(Pt(this.debounceTime()))),this.eventsSubscription.add(e.subscribe(([l,m,f])=>{this.textChangeHandler(l,m,f)})),this.eventsSubscription.add(t.subscribe(([l,m,f,_])=>{this.editorChangeHandler(l,m,f,_)}))})}dispose(){this.eventsSubscription?.unsubscribe(),this.eventsSubscription=null}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275dir=ii({type:n,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[qe]})}}return n})(),Si=(()=>{class n extends $i{static{this.\u0275fac=(()=>{let e;return function(l){return(e||(e=Yt(n)))(l||n)}})()}static{this.\u0275cmp=M({type:n,selectors:[["quill-editor"]],features:[ai([{multi:!0,provide:ui,useExisting:Ot(()=>n)},{multi:!0,provide:fi,useExisting:Ot(()=>n)}]),ni],ngContentSelectors:Di,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,l){t&1&&(oi(Ni),c(0,ji,1,0,"div",0),it(1),it(2,1),it(3,2),c(4,Hi,1,0,"div",0)),t&2&&(Vt(l.toolbarPosition()!=="top"?0:-1),a(4),Vt(l.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return n})();var Ii=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:qt,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=Re({type:n})}static{this.\u0275inj=Ve({})}}return n})();var ft=class n{constructor(i,e){this.mAppContextService=i;this.http=e}createItem(i){let e=`${b.base_url}/upload`;return this.http.post(e,i)}initUpload(i,e){let t=`${b.base_url}/upload/init`;return this.http.post(t,{filename:i,title:e})}uploadChunk(i,e,t){let l=new FormData;l.append("uploadId",i),l.append("chunkIndex",e.toString()),l.append("file",t,`chunk_${e}`);let m=`${b.base_url}/upload/chunk`;return this.http.post(m,l,{reportProgress:!0,observe:"events"})}completeUpload(i,e,t,l){let m=`${b.base_url}/upload/complete`;return this.http.post(m,{uploadId:i,totalChunks:e,title:t,description:l})}static \u0275fac=function(e){return new(e||n)(ie(k),ie(ye))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Gi=n=>({"is-invalid":n});function Qi(n,i){n&1&&p(0,"app-progress")}function Ji(n,i){n&1&&(o(0,"p"),s(1,"Drag & drop a video here, or click to select"),r())}function Yi(n,i){if(n&1&&(o(0,"p"),s(1),r()),n&2){let e=u();a(),C("Selected: ",e.selectedFile.name,"")}}function Ki(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Zi(n,i){if(n&1&&(o(0,"div",31),c(1,Ki,2,0,"div",1),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function Xi(n,i){if(n&1&&(o(0,"div")(1,"div",32)(2,"div",33),s(3),r()()()),n&2){let e=u();a(2),Me("width",e.progress,"%"),a(),C("",e.progress,"%")}}function en(n,i){n&1&&(o(0,"a",34),s(1,"Run in Background"),r())}var vt=class n{constructor(i,e,t,l){this.mToastrService=i;this.mUploadService=e;this.fb=t;this.router=l;this.itemForm=this.fb.group({title:["",E.required]})}itemForm;mProgress=!1;selectedFile=null;progress=0;isDragging=!1;ngOnInit(){}onSubmit(i){this.mProgress=!0,this.upload(i.title,i.description)}onDragOver(i){i.preventDefault(),this.isDragging=!0}onDragLeave(i){i.preventDefault(),this.isDragging=!1}onDrop(i){i.preventDefault(),this.isDragging=!1,i.dataTransfer?.files.length&&(this.selectedFile=i.dataTransfer.files[0])}onFileSelected(i){this.selectedFile=i.target.files[0]}upload(i,e){return Ze(this,null,function*(){if(!this.selectedFile||this.itemForm.invalid){this.mToastrService.error("Please fill out all fields and select a file.");return}let t=5*1024*1024,l=Math.ceil(this.selectedFile.size/t),f=(yield et(this.mUploadService.initUpload(this.selectedFile.name,i))).uploadId;for(let _=0;_<l;_++){let v=_*t,N=Math.min(v+t,this.selectedFile.size),Y=this.selectedFile.slice(v,N);yield et(this.mUploadService.uploadChunk(f,_,Y).pipe()),this.mProgress=!1,this.progress=Math.round((_+1)/l*100)}yield et(this.mUploadService.completeUpload(f,l,i)),this.mToastrService.success("Media uploaded complete!"),this.router.navigateByUrl("/media")})}static \u0275fac=function(e){return new(e||n)(h(F),h(ft),h(te),h(X))};static \u0275cmp=M({type:n,selectors:[["app-create"]],hostBindings:function(e,t){e&1&&y("dragover",function(m){return t.onDragOver(m)})("dragleave",function(m){return t.onDragLeave(m)})("drop",function(m){return t.onDrop(m)})},standalone:!1,decls:49,vars:14,consts:[["fileInput",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],[1,"dropzone"],["type","file","hidden","","accept","video/*",3,"change"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/my-media","class","btn btn-warning  me-1",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-warning","progress-bar-striped","progress-bar-animated"],["routerLink","/my-media",1,"btn","btn-warning","me-1"]],template:function(e,t){if(e&1){let l=w();c(0,Qi,1,0,"app-progress",1),o(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),s(7,"Media"),r()(),o(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),s(12,"Home"),r()(),o(13,"li",10),s(14,"Media"),r(),o(15,"li",11),s(16,"Create"),r()()()()(),o(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),s(22," Create Media "),r(),p(23,"div",16),r(),o(24,"div",17)(25,"form",18),y("ngSubmit",function(){return S(l),I(t.onSubmit(t.itemForm.value))}),o(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),c(30,Ji,2,0,"p",1)(31,Yi,2,1,"p",1),o(32,"input",23,0),y("change",function(f){return S(l),I(t.onFileSelected(f))}),r(),o(34,"button",24),y("click",function(){S(l);let f=oe(33);return I(f.click())}),s(35,"Choose File"),r()()()(),o(36,"div",20)(37,"div",21)(38,"label",25),s(39,"Title:"),r(),p(40,"input",26),c(41,Zi,2,1,"div",27),r()(),o(42,"div",20)(43,"div",21),c(44,Xi,4,3,"div",1),r()()(),o(45,"div",28),c(46,en,2,0,"a",29),o(47,"button",30),s(48,"Submit"),r()()()()()()()()()}if(e&2){let l,m;d("ngIf",t.mProgress),a(25),d("formGroup",t.itemForm),a(4),ri("dragging",t.isDragging),a(),d("ngIf",!t.selectedFile),a(),d("ngIf",t.selectedFile),a(9),d("ngModel",t.selectedFile==null?null:t.selectedFile.name)("ngClass",x(12,Gi,((l=t.itemForm.get("title"))==null?null:l.invalid)&&(((l=t.itemForm.get("title"))==null?null:l.dirty)||((l=t.itemForm.get("title"))==null?null:l.touched)))),a(),d("ngIf",((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched))),a(3),d("ngIf",t.progress>0),a(2),d("ngIf",t.progress>0),a(),d("disabled",!t.selectedFile||t.itemForm.invalid)}},dependencies:[P,O,A,G,ee,W,z,Q,J,q],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #bbb;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:.2s}.dropzone.dragging[_ngcontent-%COMP%]{background-color:#eef6ff;border-color:#3b82f6}"]})};var V=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${b.base_url}/media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${b.base_url}/media`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}getOneItem(i){let e=`${b.base_url}/media/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${b.base_url}/media/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${b.base_url}/media/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${b.base_url}/unpaginated-items-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${b.base_url}/search-media`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}relatedItems(i,e){let t=`${b.base_url}/related-media/${e}`;return this.http.get(t+i,this.mAppContextService.getHttpOptions())}myMedia(i){let e=`${b.base_url}/my-media/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}likedMediaItems(){let i=`${b.base_url}/liked-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}historyMediaItems(){let i=`${b.base_url}/history-media`;return this.http.get(i,this.mAppContextService.getHttpOptions())}reactItem(i){let e=`${b.base_url}/media/${i.id}/react`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}commentItem(i){let e=`${b.base_url}/media/${i.id}/comment`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}processItem(i){let e=`${b.base_url}/media/${i.id}/process`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}playlistMediaItem(i){let e=`${b.base_url}/media/${i}/playlist`;return this.http.get(e,this.mAppContextService.getHttpOptions())}categoryMediaItem(i){let e=`${b.base_url}/media/${i}/category`;return this.http.get(e,this.mAppContextService.getHttpOptions())}upload(i){let e=`${b.base_url}/upload`;return this.http.post(e,i)}initUpload(i,e){let t=`${b.base_url}/upload/init`;return this.http.post(t,{filename:i,title:e})}uploadChunk(i,e,t){let l=new FormData;l.append("uploadId",i),l.append("chunkIndex",e.toString()),l.append("file",t,`chunk_${e}`);let m=`${b.base_url}/upload/chunk`;return this.http.post(m,l,{reportProgress:!0,observe:"events"})}completeUpload(i,e,t,l){let m=`${b.base_url}/upload/complete`;return this.http.post(m,{uploadId:i,totalChunks:e,title:t,description:l})}static \u0275fac=function(e){return new(e||n)(ie(k),ie(ye))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Pe=n=>({"is-invalid":n}),tn=()=>({height:"150px"});function nn(n,i){n&1&&p(0,"app-progress")}function rn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function on(n,i){if(n&1&&(o(0,"div",46),c(1,rn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function an(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function ln(n,i){if(n&1&&(o(0,"div",46),c(1,an,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function sn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function mn(n,i){if(n&1&&(o(0,"div",46),c(1,sn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("date_produced"))==null||e.errors==null?null:e.errors.required)}}function dn(n,i){if(n&1){let e=w();o(0,"div",47)(1,"div",48)(2,"input",49),y("change",function(l){let m=S(e).$implicit,f=u();return I(f.onCategoryChange(l,m.id))}),r(),o(3,"label",50),s(4),r()()()}if(n&2){let e=i.$implicit,t=u();a(2),d("id","category_"+e.id)("value",e.id)("checked",t.isInList(e.id,t.item.media_categories)),a(),d("for","category_"+e.id),a(),g(e.name)}}function cn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function pn(n,i){if(n&1&&(o(0,"div",46),c(1,cn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("tags"))==null||e.errors==null?null:e.errors.required)}}function un(n,i){if(n&1&&(o(0,"option",51),s(1),r()),n&2){let e=i.$implicit;fe("value",e.id),a(),g(e.name)}}function fn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function vn(n,i){if(n&1&&(o(0,"div",52),c(1,fn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function hn(n,i){if(n&1&&(o(0,"option",51),s(1),r()),n&2){let e=i.$implicit;fe("value",e.id),a(),g(e.name)}}function gn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function _n(n,i){if(n&1&&(o(0,"div",52),c(1,gn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("user_id"))==null||e.errors==null?null:e.errors.required)}}function yn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function bn(n,i){if(n&1&&(o(0,"div",46),c(1,yn,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("allow_comments"))==null||e.errors==null?null:e.errors.required)}}var ht=class n{constructor(i,e,t,l,m){this.mToastrService=i;this.mMediaService=e;this.fb=t;this.router=l;this.route=m;this.itemForm=this.fb.group({title:["",E.required],description:["",E.required],date_produced:["",E.required],category_id:["",E.nullValidator],tags:["",E.nullValidator],type_id:["",E.required],user_id:["",E.required],allow_comments:[!1,E.nullValidator]})}mContentCategories;mMediaTypes;mUsers;mSelectedCategories=[];itemForm;mProgress=!1;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.item.media_categories&&Array.isArray(this.item.media_categories)&&this.mSelectedCategories.push(...this.item.media_categories.map(e=>e.category_id)),this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{i&&(this.mContentCategories=i.data.content_categories,this.mMediaTypes=i.data.media_types,this.mUsers=i.data.users,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onSubmit(i){let e={id:this.id,title:i.title,description:i.description,date_produced:i.date_produced,category_id:this.mSelectedCategories,tags:i.tags,type_id:i.type_id,user_id:i.user_id,allow_comments:i.allow_comments};this.mProgress=!0,this.mMediaService.updateItem(e).subscribe({next:t=>{t&&(this.mToastrService.success(t.message),this.router.navigateByUrl("/media"),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onCategoryChange(i,e){if(i.target.checked)this.mSelectedCategories.push(e);else{let t=this.mSelectedCategories.indexOf(e);t>-1&&this.mSelectedCategories.splice(t,1)}}isInList(i,e){return e?.some(t=>t.category_id===i)??!1}static \u0275fac=function(e){return new(e||n)(h(F),h(V),h(te),h(X),h(be))};static \u0275cmp=M({type:n,selectors:[["app-edit"]],standalone:!1,decls:90,vars:43,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","description",1,"form-label","required"],["formControlName","description",1,"w-100",3,"ngModelChange","ngModel","styles","ngClass"],["for","date_produced",1,"form-label","required"],["type","datetime-local","formControlName","date_produced",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"form-label","required"],["class","col-6 col-md-3",4,"ngFor","ngForOf"],["for","tags",1,"form-label","required"],["type","text","formControlName","tags",1,"form-control",3,"ngModelChange","ngModel","ngClass"],[1,"col-md-6"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","user_id",1,"form-label","required"],["formControlName","user_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],[1,"form-check","d-inline-block"],["type","checkbox","formControlName","allow_comments",1,"form-check-input",3,"ngModelChange","ngModel","ngClass"],["for","allow_comments"],[1,"text-end"],["routerLink","/media",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"col-6","col-md-3"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","id","value","checked"],[1,"form-check-label",3,"for"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"]],template:function(e,t){if(e&1&&(c(0,nn,1,0,"app-progress",0),o(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),s(7,"Media"),r()(),o(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),s(12,"Home"),r()(),o(13,"li",9),s(14,"Media"),r(),o(15,"li",10),s(16,"Create"),r()()()()(),o(17,"div",3)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14),s(22," Create Media "),r(),p(23,"div",15),r(),o(24,"div",16)(25,"form",17),y("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),o(26,"div",18)(27,"div",19)(28,"div",20)(29,"label",21),s(30,"Title:"),r(),p(31,"input",22),c(32,on,2,1,"div",23),r()(),o(33,"div",19)(34,"div",20)(35,"label",24),s(36,"Description:"),r(),o(37,"quill-editor",25),B("ngModelChange",function(m){return H(t.item.description,m)||(t.item.description=m),m}),r(),c(38,ln,2,1,"div",23),r()(),o(39,"div",19)(40,"div",20)(41,"label",26),s(42,"Date Produced:"),r(),o(43,"input",27),B("ngModelChange",function(m){return H(t.item.date_produced,m)||(t.item.date_produced=m),m}),r(),c(44,mn,2,1,"div",23),r()(),o(45,"div",19)(46,"div",20)(47,"label",28),s(48,"Category:"),r(),o(49,"div",3),c(50,dn,5,5,"div",29),r()()(),o(51,"div",19)(52,"div",20)(53,"label",30),s(54,"Tags "),o(55,"small"),s(56,"- a comma separated list of tags"),r(),s(57,":"),r(),o(58,"input",31),B("ngModelChange",function(m){return H(t.item.tags,m)||(t.item.tags=m),m}),r(),c(59,pn,2,1,"div",23),r()(),o(60,"div",32)(61,"div",20)(62,"label",33),s(63,"Type:"),r(),o(64,"select",34),B("ngModelChange",function(m){return H(t.item.type_id,m)||(t.item.type_id=m),m}),o(65,"option",35),s(66,"--- Select type ---"),r(),c(67,un,2,2,"option",36),r(),c(68,vn,2,1,"div",37),r()(),o(69,"div",32)(70,"div",20)(71,"label",38),s(72,"User:"),r(),o(73,"select",39),B("ngModelChange",function(m){return H(t.item.user_id,m)||(t.item.user_id=m),m}),o(74,"option",35),s(75,"--- Select user ---"),r(),c(76,hn,2,2,"option",36),r(),c(77,_n,2,1,"div",37),r()(),o(78,"div",19)(79,"div",20)(80,"div",40)(81,"input",41),B("ngModelChange",function(m){return H(t.item.allow_comments,m)||(t.item.allow_comments=m),m}),r(),o(82,"label",42),s(83," Allow comments"),r(),c(84,bn,2,1,"div",23),r()()()(),o(85,"div",43)(86,"a",44),s(87,"Cancel"),r(),o(88,"button",45),s(89,"Submit"),r()()()()()()()()()),e&2){let l,m,f,_,v,N,Y,D,K,we,_e,Oe,Le,Ae;d("ngIf",t.mProgress),a(25),d("formGroup",t.itemForm),a(6),d("ngModel",t.item.title)("ngClass",x(28,Pe,((l=t.itemForm.get("title"))==null?null:l.invalid)&&(((l=t.itemForm.get("title"))==null?null:l.dirty)||((l=t.itemForm.get("title"))==null?null:l.touched)))),a(),d("ngIf",((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched))),a(5),j("ngModel",t.item.description),d("styles",U(30,tn))("ngClass",x(31,Pe,((f=t.itemForm.get("description"))==null?null:f.invalid)&&(((f=t.itemForm.get("description"))==null?null:f.dirty)||((f=t.itemForm.get("description"))==null?null:f.touched)))),a(),d("ngIf",((_=t.itemForm.get("description"))==null?null:_.invalid)&&(((_=t.itemForm.get("description"))==null?null:_.dirty)||((_=t.itemForm.get("description"))==null?null:_.touched))),a(5),j("ngModel",t.item.date_produced),d("ngClass",x(33,Pe,((v=t.itemForm.get("date_produced"))==null?null:v.invalid)&&(((v=t.itemForm.get("date_produced"))==null?null:v.dirty)||((v=t.itemForm.get("date_produced"))==null?null:v.touched)))),a(),d("ngIf",((N=t.itemForm.get("date_produced"))==null?null:N.invalid)&&(((N=t.itemForm.get("date_produced"))==null?null:N.dirty)||((N=t.itemForm.get("date_produced"))==null?null:N.touched))),a(6),d("ngForOf",t.mContentCategories),a(8),j("ngModel",t.item.tags),d("ngClass",x(35,Pe,((Y=t.itemForm.get("tags"))==null?null:Y.invalid)&&(((Y=t.itemForm.get("tags"))==null?null:Y.dirty)||((Y=t.itemForm.get("tags"))==null?null:Y.touched)))),a(),d("ngIf",((D=t.itemForm.get("tags"))==null?null:D.invalid)&&(((D=t.itemForm.get("tags"))==null?null:D.dirty)||((D=t.itemForm.get("tags"))==null?null:D.touched))),a(5),j("ngModel",t.item.type_id),d("ngClass",x(37,Pe,((K=t.itemForm.get("type_id"))==null?null:K.invalid)&&(((K=t.itemForm.get("type_id"))==null?null:K.dirty)||((K=t.itemForm.get("type_id"))==null?null:K.touched)))),a(3),d("ngForOf",t.mMediaTypes),a(),d("ngIf",((we=t.itemForm.get("type_id"))==null?null:we.invalid)&&(((we=t.itemForm.get("type_id"))==null?null:we.dirty)||((we=t.itemForm.get("type_id"))==null?null:we.touched))),a(5),j("ngModel",t.item.user_id),d("ngClass",x(39,Pe,((_e=t.itemForm.get("user_id"))==null?null:_e.invalid)&&(((_e=t.itemForm.get("user_id"))==null?null:_e.dirty)||((_e=t.itemForm.get("user_id"))==null?null:_e.touched)))),a(3),d("ngForOf",t.mUsers),a(),d("ngIf",((Oe=t.itemForm.get("user_id"))==null?null:Oe.invalid)&&(((Oe=t.itemForm.get("user_id"))==null?null:Oe.dirty)||((Oe=t.itemForm.get("user_id"))==null?null:Oe.touched))),a(4),j("ngModel",t.item.allow_comments),d("ngClass",x(41,Pe,((Le=t.itemForm.get("allow_comments"))==null?null:Le.invalid)&&(((Le=t.itemForm.get("allow_comments"))==null?null:Le.dirty)||((Le=t.itemForm.get("allow_comments"))==null?null:Le.touched)))),a(3),d("ngIf",((Ae=t.itemForm.get("allow_comments"))==null?null:Ae.invalid)&&(((Ae=t.itemForm.get("allow_comments"))==null?null:Ae.dirty)||((Ae=t.itemForm.get("allow_comments"))==null?null:Ae.touched))),a(4),d("disabled",t.itemForm.invalid)}},dependencies:[P,L,O,A,G,xe,Se,ee,ot,Ce,W,z,Q,J,Si,q],encapsulation:2})};var Ei=Ke(st());var Cn=n=>({"is-invalid":n}),xn=()=>["/media/watch"],Sn=n=>({video:n}),In=(n,i,e)=>({"alert-warning":n,"alert-primary":i,"alert-danger":e}),En=(n,i,e)=>({"bg-warning text-dark":n,"bg-primary":i,"bg-danger":e}),wn=(n,i)=>({active:n,disabled:i});function Tn(n,i){n&1&&p(0,"app-progress")}function Mn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Fn(n,i){if(n&1&&(o(0,"div",28),c(1,Mn,2,0,"div",1),r()),n&2){let e=u();a(),d("ngIf",e.search_term.errors==null?null:e.search_term.errors.required)}}function kn(n,i){n&1&&(o(0,"span"),s(1,","),r())}function Pn(n,i){if(n&1&&(o(0,"a",58),s(1),c(2,kn,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;$("routerLink","/categories/show/",e.category_id,""),a(),C(" ",e.name,""),a(),d("ngIf",!t)}}function On(n,i){if(n&1){let e=w();o(0,"tr")(1,"td"),s(2),r(),o(3,"td"),s(4),r(),o(5,"td")(6,"a",32),p(7,"i",33),r()(),o(8,"td"),s(9),r(),o(10,"td")(11,"span",34),s(12),r()(),o(13,"td"),s(14),ae(15,"date"),r(),o(16,"td")(17,"a",35),s(18),r()(),o(19,"td"),s(20),ae(21,"date"),r(),o(22,"td")(23,"div",36)(24,"button",37),p(25,"i",33),r(),o(26,"a",38),p(27,"i",39),r(),o(28,"button",40),y("click",function(){let l=S(e).$implicit,m=u(2);return I(m.onDelete(l))}),p(29,"i",41),r()(),o(30,"div",42)(31,"div",43)(32,"div",44)(33,"div",45)(34,"h5",46),s(35),r(),p(36,"button",47),r(),o(37,"div",48)(38,"ol",49)(39,"li",50)(40,"div",51)(41,"div",52),s(42,"Description: "),r()(),p(43,"span",53),r(),o(44,"li",50)(45,"div",51)(46,"div",52),s(47,"Categories: "),r()(),c(48,Pn,3,4,"a",54),r(),o(49,"li",50)(50,"div",51)(51,"div",52),s(52,"Updated At: "),r()(),o(53,"span",55),s(54),ae(55,"date"),r()(),o(56,"li",50)(57,"div",51)(58,"div",52),s(59,"Stream Key:"),r()(),o(60,"span",55),s(61),r(),o(62,"div",51)(63,"div",52),s(64,"Server Link:"),r()(),o(65,"span",55),s(66),r()()()(),o(67,"div",56)(68,"button",57),s(69,"Close"),r()()()()()()()}if(n&2){let e=i.$implicit,t=i.index;a(2),C("",t+1,"."),a(2),g(e.title),a(2),d("routerLink",U(29,xn))("queryParams",x(30,Sn,e.id)),a(3),g(e.user==null?null:e.user.name),a(2),d("ngClass",He(32,In,e.media_status_id==1,e.media_status_id==2,e.media_status_id==3)),a(),g(e.media_status==null?null:e.media_status.name),a(2),g(nt(15,23,e.date_produced)),a(3),$("routerLink","/media/process/",e.id,""),d("ngClass",He(36,En,e.status_id==1,e.status_id==2,e.status_id==3)),a(),C(" ",e.status==null?null:e.status.name,""),a(2),g(nt(21,25,e.created_at)),a(4),At("data-bs-target","#modal1"+e.id),a(2),$("routerLink","/media/edit/",e.id,""),a(4),At("id","modal1"+e.id),a(5),g(e.title),a(8),d("innerHTML",e.description,re),a(5),d("ngForOf",e.media_categories),a(6),g(nt(55,27,e.updated_at)),a(7),g(e.stream_key),a(5),g(e.server_link)}}function Ln(n,i){if(n&1&&(o(0,"div",29)(1,"table",30)(2,"thead")(3,"tr")(4,"th"),s(5,"#"),r(),o(6,"th"),s(7,"Title"),r(),o(8,"th"),s(9,"Watch"),r(),o(10,"th"),s(11,"User"),r(),o(12,"th"),s(13,"Media Status"),r(),o(14,"th"),s(15,"Produced On"),r(),o(16,"th"),s(17,"Status"),r(),o(18,"th"),s(19,"Created"),r(),o(20,"th"),s(21,"Action"),r()()(),o(22,"tbody"),c(23,On,70,40,"tr",31),r()()()),n&2){let e=u();a(23),d("ngForOf",e.mItems)}}function An(n,i){if(n&1){let e=w();o(0,"li",61)(1,"a",62),y("click",function(){let l=S(e).$implicit,m=u(2);return I(m.onChangePage(l.url))}),r()()}if(n&2){let e=i.$implicit;d("ngClass",ve(2,wn,e.active,!e.url)),a(),d("innerHTML",e.label,re)}}function Vn(n,i){if(n&1&&(o(0,"div")(1,"ul",59),c(2,An,2,5,"li",60),r()()),n&2){let e=u();a(2),d("ngForOf",e.links)}}function qn(n,i){n&1&&(o(0,"p",63),s(1,"No items"),r())}var gt=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ue("",E.required),this.itemForm=new Be({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.allItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}onDelete(i){Ei.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mMediaService.deleteItem(i).subscribe({next:l=>{l&&(this.mItems=this.mItems.filter(m=>m.id!==i.id),this.mToastrService.error(l.message),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}}))})}onSearch(i){this.mProgress=!0,this.mMediaService.searchItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.mToastrService.success(e.message),this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(h(V),h(F),h(k))};static \u0275cmp=M({type:n,selectors:[["app-index"]],standalone:!1,decls:38,vars:9,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item","active"],[1,"app-content"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["routerLink","/media/create",1,"btn","btn-warning","btn-sm"],[1,"bi","bi-plus-circle-fill"],[1,"card-tools"],[3,"ngSubmit","formGroup"],[1,"input-group","input-group-sm",2,"width","150px"],["type","text","formControlName","search_term","placeholder","Search",1,"form-control","float-right",3,"ngClass"],[1,"input-group-append"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-search"],["class","invalid-feedback","type","alert",4,"ngIf"],[1,"card-body"],["class","table-responsive",4,"ngIf","ngIfElse"],["type","alert",1,"invalid-feedback"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener",1,"text-decoration-none1",3,"routerLink","queryParams"],[1,"bi","bi-eye-fill"],[1,"alert","py-0","m-0","text-center","rounded-5",3,"ngClass"],["target","_blank","rel","noopener",1,"text-decoration-none","badge","rounded-pill",3,"routerLink","ngClass"],[1,"text-nowrap"],["data-bs-toggle","modal",1,"btn","btn-outline-dark","btn-sm","me-1"],[1,"btn","btn-dark","btn-sm","me-1",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"btn","btn-danger","btn-sm",3,"click"],[1,"bi","bi-trash2-fill"],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header","bg-primary","text-white"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"list-group"],[1,"list-group-item","d-flex","justify-content-between","align-items-start"],[1,"ms-2","me-auto"],[1,"fw-bold"],[1,"text-muted",3,"innerHTML"],["class","text-decoration-none","data-bs-dismiss","modal",3,"routerLink",4,"ngFor","ngForOf"],[1,"text-muted"],[1,"modal-footer","bg-dark"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light","btn-sm"],["data-bs-dismiss","modal",1,"text-decoration-none",3,"routerLink"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1){let l=w();c(0,Tn,1,0,"app-progress",1),o(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),s(7,"Media"),r()(),o(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),s(12,"Home"),r()(),o(13,"li",10),s(14,"Media"),r()()()()()(),o(15,"div",11)(16,"div",3)(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15)(22,"a",16),p(23,"i",17),s(24," Create "),r()(),o(25,"div",18)(26,"form",19),y("ngSubmit",function(){return S(l),I(t.onSearch(t.itemForm.value))}),o(27,"div",20),p(28,"input",21),o(29,"div",22)(30,"button",23),p(31,"i",24),r()(),c(32,Fn,2,1,"div",25),r()()()(),o(33,"div",26),c(34,Ln,24,1,"div",27)(35,Vn,3,1,"div",1)(36,qn,2,0,"ng-template",null,0,pe),r()()()()()()()}if(e&2){let l=oe(37);d("ngIf",t.mProgress),a(26),d("formGroup",t.itemForm),a(2),d("ngClass",x(7,Cn,t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched))),a(4),d("ngIf",t.search_term.invalid&&(t.search_term.dirty||t.search_term.touched)),a(2),d("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",l),a(),d("ngIf",t.links)}},dependencies:[P,L,O,A,G,ee,W,z,Q,J,q,si],encapsulation:2})};var Mi=Ke(st());var Dn=n=>({"is-invalid":n}),jn=()=>["/media/watch"],Hn=n=>({video:n});function Bn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Un(n,i){if(n&1&&(o(0,"div",10),c(1,Bn,2,0,"div",0),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("autoplay"))==null||e.errors==null?null:e.errors.required)}}function $n(n,i){if(n&1&&(o(0,"div",11)(1,"a",12),p(2,"app-media-card",13),r()()),n&2){let e=i.$implicit;a(),d("routerLink",U(3,jn))("queryParams",x(4,Hn,e.id)),a(),d("data",e)}}function Wn(n,i){n&1&&p(0,"app-loader")}function zn(n,i){if(n&1){let e=w();o(0,"div")(1,"form",1),y("ngSubmit",function(){S(e);let l=u();return I(l.onSubmit(l.itemForm.value))}),o(2,"div",2)(3,"h6",3),s(4,"Up next"),r(),o(5,"div",4)(6,"label",5),s(7,"AUTOPLAY"),r(),o(8,"input",6),B("ngModelChange",function(l){S(e);let m=u();return H(m.mCurrentUser.autoplay,l)||(m.mCurrentUser.autoplay=l),I(l)}),y("change",function(){S(e);let l=u();return I(l.onSubmit(l.itemForm.value))}),r(),c(9,Un,2,1,"div",7),r()()(),o(10,"div",8),y("scrolled",function(){S(e);let l=u();return I(l.onLoadMore())}),c(11,$n,3,6,"div",9),r(),o(12,"div"),c(13,Wn,1,0,"app-loader",0),r()()}if(n&2){let e,t,l=u();a(),d("formGroup",l.itemForm),a(7),j("ngModel",l.mCurrentUser.autoplay),d("checked",l.mCurrentUser.autoplay)("ngClass",x(10,Dn,((e=l.itemForm.get("autoplay"))==null?null:e.invalid)&&(((e=l.itemForm.get("autoplay"))==null?null:e.dirty)||((e=l.itemForm.get("autoplay"))==null?null:e.touched)))),a(),d("ngIf",((t=l.itemForm.get("autoplay"))==null?null:t.invalid)&&(((t=l.itemForm.get("autoplay"))==null?null:t.dirty)||((t=l.itemForm.get("autoplay"))==null?null:t.touched))),a(),d("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!l.mHasMorePages||l.mLoadingMore),a(),d("ngForOf",l.mItems),a(2),d("ngIf",l.mLoadingMore)}}var Ge=class n{constructor(i,e,t,l,m,f){this.mMediaService=i;this.mProfileService=e;this.mToastrService=t;this.fb=l;this.mAuthService=m;this.router=f;this.itemForm=this.fb.group({autoplay:["",E.required]})}data;item;itemForm;mProgress=!1;mItems=[];mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;mCurrentUser;mCurrentIndex=0;ngOnInit(){this.item=this.data,this.mCurrentUser=this.mAuthService?.currentUser}ngOnChanges(i){i.data&&this.data&&(this.item=this.data,this.mItems=[],this.index(this.mCurrentPage))}index(i){let e=typeof i=="string"?i:`?page=${this.mCurrentPage}`;this.mMediaService.relatedItems(e,this.item.id).subscribe({next:t=>{this.mCurrentPage===1?this.mItems=t.data:this.mItems=[...this.mItems,...t.data],this.mLinks=t.links,this.mLoadingMore=!1;let l=this.mLinks.find(m=>m.label==="Next &raquo;");this.mHasMorePages=!!l?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let i=this.mLinks.find(e=>e.label==="Next &raquo;");i?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(i)):this.mHasMorePages=!1}onSubmit(i){let e={user_id:this.mCurrentUser.id,autoplay:i.autoplay};this.mProgress=!0,this.mProfileService.updateAutoplay(e).subscribe({next:t=>{t&&(this.mAuthService.saveUserLocally(t),this.mToastrService.success(t.message),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}playNextVideo(){if(this.mCurrentUser?.autoplay===!0){let i=this.mItems[this.mCurrentIndex];if(!i)return;this.router.navigate(["/media/watch"],{queryParams:{video:i.id}})}else Mi.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-primary"},buttonsStyling:!1}).fire({title:"Video Finished!",text:`${this.item.title} ended!`,icon:"warning",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Home"}).then(e=>{e.isConfirmed&&this.router.navigate(["/dashboard"])})}static \u0275fac=function(e){return new(e||n)(h(V),h(xi),h(F),h(te),h(We),h(X))};static \u0275cmp=M({type:n,selectors:[["app-related"]],inputs:{data:"data"},standalone:!1,features:[qe],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngSubmit","formGroup"],[1,"d-flex","align-items-start","justify-content-between","mb-3"],[1,"mb-0"],[1,"form-check","form-switch"],["for","switchCheckDefault",1,"form-check-label","text-muted"],["type","checkbox","formControlName","autoplay",1,"form-check-input",3,"ngModelChange","change","ngModel","checked","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","mb-3",4,"ngFor","ngForOf"],["role","alert",1,"invalid-feedback","d-block"],[1,"mb-3"],[1,"text-decoration-none","text-reset",3,"routerLink","queryParams"],[3,"data"]],template:function(e,t){e&1&&c(0,zn,14,12,"div",0),e&2&&d("ngIf",t.mItems&&t.mItems.length>0)},dependencies:[P,L,O,A,G,ot,W,z,Q,J,mt,$e,dt],encapsulation:2})};var ki=Ke(st());var _t=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${b.base_url}/media-comments`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${b.base_url}/media-comments`;return this.http.post(e,i)}getOneItem(i){let e=`${b.base_url}/media-comments/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${b.base_url}/media-comments/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${b.base_url}/media-comments/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${b.base_url}/unpaginated-items-media-comments`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${b.base_url}/search-media-comments`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}filteredItems(i,e){let t=`${b.base_url}/filtered-media-comments/${e}`;return this.http.get(t+i,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||n)(ie(k),ie(ye))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Pi=n=>({"is-invalid":n});function Qn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Jn(n,i){if(n&1&&(o(0,"div",13),c(1,Qn,2,0,"div",12),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("text"))==null||e.errors==null?null:e.errors.required)}}function Yn(n,i){if(n&1&&(o(0,"div"),s(1),r()),n&2){let e=u(2).$implicit;a(),C(" ",e.text," ")}}function Kn(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Zn(n,i){if(n&1&&(o(0,"div",13),c(1,Kn,2,0,"div",12),r()),n&2){let e,t=u(5);a(),d("ngIf",(e=t.mItemForm.get("comment_text"))==null||e.errors==null?null:e.errors.required)}}function Xn(n,i){if(n&1){let e=w();o(0,"div")(1,"form",2),y("ngSubmit",function(){S(e);let l=u(2).$implicit,m=u(2);return I(m.onUpdate(m.mItemForm.value,l.id))}),o(2,"input",21),B("ngModelChange",function(l){S(e);let m=u(2).$implicit;return H(m.text,l)||(m.text=l),I(l)}),r(),c(3,Zn,2,1,"div",9),o(4,"div",10)(5,"button",22),y("click",function(){S(e);let l=u(4);return I(l.onCancelEdit())}),s(6,"Cancel"),r(),o(7,"button",11),s(8,"Save"),r()()()()}if(n&2){let e,t,l=u(2).$implicit,m=u(2);a(),d("formGroup",m.mItemForm),a(),j("ngModel",l.text),d("ngClass",x(5,Pi,((e=m.mItemForm.get("comment_text"))==null?null:e.invalid)&&(((e=m.mItemForm.get("comment_text"))==null?null:e.dirty)||((e=m.mItemForm.get("comment_text"))==null?null:e.touched)))),a(),d("ngIf",((t=m.mItemForm.get("comment_text"))==null?null:t.invalid)&&(((t=m.mItemForm.get("comment_text"))==null?null:t.dirty)||((t=m.mItemForm.get("comment_text"))==null?null:t.touched))),a(4),d("disabled",m.mItemForm.invalid)}}function er(n,i){if(n&1&&(o(0,"div"),c(1,Yn,2,1,"div",12)(2,Xn,9,7,"div",12),r()),n&2){let e=u().index,t=u(2);a(),d("ngIf",t.mEditIndex!==e),a(),d("ngIf",t.mEditIndex===e)}}function tr(n,i){if(n&1&&(o(0,"div")(1,"h6",23),s(2),o(3,"span",24),s(4),r()(),o(5,"div",25),s(6),r()()),n&2){let e=u().$implicit;a(2),C("",e==null||e.user==null?null:e.user.name," "),a(2),g(e.readable_date),a(2),g(e.text)}}function ir(n,i){if(n&1){let e=w();o(0,"div",26)(1,"span",27),p(2,"i",28),r(),o(3,"ul",29)(4,"li")(5,"a",30),y("click",function(){S(e);let l=u().index,m=u(2);return I(m.onStartEdit(l))}),p(6,"i",31),s(7," Edit"),r()(),o(8,"li")(9,"a",30),y("click",function(){S(e);let l=u().$implicit,m=u(2);return I(m.onDelete(l))}),p(10,"i",32),s(11," Delete"),r()()()()}}function nr(n,i){if(n&1&&(o(0,"div",16)(1,"div",17),s(2),r(),o(3,"div",18),c(4,er,3,2,"div",12)(5,tr,7,3,"div",12),r(),o(6,"div",19),c(7,ir,12,0,"div",20),r()()),n&2){let e=i.$implicit,t=i.index,l=u(2);a(2),C(" ",l.mAppContextService.getInitials(e.user==null?null:e.user.name)," "),a(2),d("ngIf",l.mEditIndex!==null),a(),d("ngIf",l.mEditIndex!==t),a(2),d("ngIf",l.mCurrentUser.id==(e.user==null?null:e.user.id))}}function rr(n,i){n&1&&p(0,"app-loader")}function or(n,i){if(n&1){let e=w();o(0,"div")(1,"div",14),y("scrolled",function(){S(e);let l=u();return I(l.onLoadMore())}),c(2,nr,8,4,"div",15),r(),o(3,"div"),c(4,rr,1,0,"app-loader",12),r()()}if(n&2){let e=u();a(),d("infiniteScrollDistance",2)("infiniteScrollThrottle",150)("infiniteScrollDisabled",!e.mHasMorePages||e.mLoadingMore),a(),d("ngForOf",e.mItems),a(2),d("ngIf",e.mLoadingMore)}}var Qe=class n{constructor(i,e,t,l,m){this.mCommentService=i;this.mToastrService=e;this.mAppContextService=t;this.mAuthService=l;this.fb=m;this.itemForm=this.fb.group({text:["",E.required]}),this.mItemForm=this.fb.group({comment_text:["",E.required]})}data;item;mItems=[];mLinks=[];mCurrentPage=1;mLoadingMore=!1;mHasMorePages=!0;itemForm;mProgress=!1;mItemForm;mEditIndex=null;mCurrentUser;ngOnInit(){this.item=this.data,this.mCurrentUser=this.mAuthService?.currentUser}ngOnChanges(i){i.data&&this.data&&(this.item=this.data,this.mItems=[],this.mCurrentPage=1,this.index(this.mCurrentPage))}index(i){let e=typeof i=="string"?i:`?page=${this.mCurrentPage}`;this.mCommentService.filteredItems(e,this.item.id).subscribe({next:t=>{this.mCurrentPage===1?this.mItems=t.data:this.mItems=[...this.mItems,...t.data],this.mLinks=t.links,this.mLoadingMore=!1;let l=this.mLinks.find(m=>m.label==="Next &raquo;");this.mHasMorePages=!!l?.url},error:()=>{this.mLoadingMore=!1,this.mHasMorePages=!1}})}onLoadMore(){if(!this.mHasMorePages||this.mLoadingMore)return;let i=this.mLinks.find(e=>e.label==="Next &raquo;");i?(this.mLoadingMore=!0,this.mCurrentPage++,this.index(i)):this.mHasMorePages=!1}onSubmit(i){let e={media_id:this.item.id,text:i.text};this.mProgress=!0,this.mCommentService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.item=t.data.item,this.mItems=[Tt({},t.data.comment),...this.mItems],this.itemForm.reset(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message)}})}onDelete(i){ki.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mCommentService.deleteItem(i).subscribe({next:l=>{l&&(this.mItems=this.mItems.filter(m=>m.id!==i.id),this.item=l.item.media,this.mToastrService.error(l.message),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}}))})}onStartEdit(i){this.mEditIndex=i}onCancelEdit(){this.mEditIndex=null}onUpdate(i,e){this.mEditIndex=null;let t={id:e,text:i.comment_text};this.mProgress=!0,this.mCommentService.updateItem(t).subscribe({next:l=>{l&&(l.status==="success"&&(this.mItems=this.mItems.map(m=>m.id===t.id?l.data:m),this.mToastrService.success(l.message)),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message)}})}static \u0275fac=function(e){return new(e||n)(h(_t),h(F),h(k),h(We),h(te))};static \u0275cmp=M({type:n,selectors:[["app-comments"]],inputs:{data:"data"},standalone:!1,features:[qe],decls:17,vars:9,consts:[[1,"row"],[1,"col-md-12"],[3,"ngSubmit","formGroup"],[1,"row","g-2","align-items-start"],["for","text",1,"form-label","required1"],[1,"col-auto"],[1,"rounded-circle","bg-warning","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"col"],["formControlName","text",1,"form-control",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],[1,"text-end","my-2"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],[4,"ngIf"],["role","alert",1,"invalid-feedback","d-block"],["infiniteScroll","",3,"scrolled","infiniteScrollDistance","infiniteScrollThrottle","infiniteScrollDisabled"],["class","d-flex align-items-start mb-3",4,"ngFor","ngForOf"],[1,"d-flex","align-items-start","mb-3"],[1,"rounded-circle","bg-secondary","text-light","d-flex","justify-content-center","align-items-center","fw-medium",2,"width","32px","height","32px"],[1,"ms-2","flex-grow-1"],[1,"ms-auto","d-flex","align-items-start"],["class","dropdown",4,"ngIf"],["formControlName","comment_text",1,"form-control","form-control-sm",3,"ngModelChange","ngModel","ngClass"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted"],[1,"mt-0","text-muted","justify-text"],[1,"dropdown"],["data-bs-toggle","dropdown","type","button",1,"p-0","border-0","bg-transparent"],[1,"bi","bi-three-dots-vertical"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-trash2"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"form",2),y("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),o(3,"div",3)(4,"label",4),s(5),r(),o(6,"div",5)(7,"div",6),s(8),r()(),o(9,"div",7),p(10,"input",8),c(11,Jn,2,1,"div",9),o(12,"div",10)(13,"button",11),s(14,"Submit"),r()()()()()(),o(15,"div",1),c(16,or,5,5,"div",12),r()()),e&2){let l,m;a(2),d("formGroup",t.itemForm),a(3),g(t.item.total_comments),a(3),C(" ",t.mAppContextService.getInitials(t.mCurrentUser==null?null:t.mCurrentUser.name)," "),a(2),d("ngClass",x(7,Pi,((l=t.itemForm.get("text"))==null?null:l.invalid)&&(((l=t.itemForm.get("text"))==null?null:l.dirty)||((l=t.itemForm.get("text"))==null?null:l.touched)))),a(),d("ngIf",((m=t.itemForm.get("text"))==null?null:m.invalid)&&(((m=t.itemForm.get("text"))==null?null:m.dirty)||((m=t.itemForm.get("text"))==null?null:m.touched))),a(2),d("disabled",t.itemForm.invalid),a(3),d("ngIf",t.mItems&&t.mItems.length>0)}},dependencies:[P,L,O,G,ee,W,z,Q,J,mt,dt],encapsulation:2})};var sr=["mRelatedComponent"],mr=n=>({"text-primary":n}),dr=n=>({"text-warning":n}),Nt=n=>({"is-invalid":n});function cr(n,i){n&1&&p(0,"app-progress")}function pr(n,i){if(n&1){let e=w();o(0,"app-hls-player",58),y("mVideoEnded",function(){S(e);let l=u();return I(l.onVideoEnded())}),r()}if(n&2){let e=u();d("data",e.item)}}function ur(n,i){n&1&&(o(0,"span"),s(1,","),r())}function fr(n,i){if(n&1&&(o(0,"a",59),s(1),c(2,ur,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;$("routerLink","/categories/show/",e.category_id,""),a(),C(" ",e.name,""),a(),d("ngIf",!t)}}function vr(n,i){if(n&1&&p(0,"app-comments",60),n&2){let e=u();d("data",e.item)}}function hr(n,i){if(n&1&&p(0,"app-related",60,0),n&2){let e=u();d("data",e.item)}}function gr(n,i){if(n&1){let e=w();o(0,"div",63)(1,"input",64),y("change",function(l){let m=S(e).$implicit,f=u(2);return I(f.onSave(m,l))}),r(),o(2,"label",65),s(3),r()()}if(n&2){let e=i.$implicit,t=u(2);a(),d("checked",t.isInList(e.id,t.item==null?null:t.item.media_playlists)),a(2),g(e.name)}}function _r(n,i){if(n&1&&(o(0,"div",61),c(1,gr,4,2,"div",62),r()),n&2){let e=u();a(),d("ngForOf",e.mPlaylists)}}function yr(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function br(n,i){if(n&1&&(o(0,"div",80),c(1,yr,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function Cr(n,i){if(n&1&&(o(0,"option",81),s(1),r()),n&2){let e=i.$implicit;fe("value",e.id),a(),g(e.name)}}function xr(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Sr(n,i){if(n&1&&(o(0,"div",82),c(1,xr,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function Ir(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Er(n,i){if(n&1&&(o(0,"div",80),c(1,Ir,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function wr(n,i){if(n&1){let e=w();o(0,"form",66),y("ngSubmit",function(){S(e);let l=u();return I(l.onSubmit(l.itemForm.value))}),o(1,"div",5)(2,"div",10)(3,"div",61)(4,"label",67),s(5,"Name:"),r(),p(6,"input",68),c(7,br,2,1,"div",69),r(),o(8,"div",61)(9,"label",70),s(10,"Type:"),r(),o(11,"select",71)(12,"option",72),s(13,"--- Select type ---"),r(),c(14,Cr,2,2,"option",73),r(),c(15,Sr,2,1,"div",74),r(),o(16,"div",61)(17,"label",75),s(18,"Description:"),r(),p(19,"textarea",76),c(20,Er,2,1,"div",69),r()()(),o(21,"div",77)(22,"button",78),y("click",function(){S(e);let l=u();return I(l.onCancelCreate())}),s(23,"Cancel"),r(),o(24,"button",79),s(25,"Create"),r()()()}if(n&2){let e,t,l,m,f,_,v=u();d("formGroup",v.itemForm),a(6),d("ngClass",x(9,Nt,((e=v.itemForm.get("name"))==null?null:e.invalid)&&(((e=v.itemForm.get("name"))==null?null:e.dirty)||((e=v.itemForm.get("name"))==null?null:e.touched)))),a(),d("ngIf",((t=v.itemForm.get("name"))==null?null:t.invalid)&&(((t=v.itemForm.get("name"))==null?null:t.dirty)||((t=v.itemForm.get("name"))==null?null:t.touched))),a(4),d("ngClass",x(11,Nt,((l=v.itemForm.get("type_id"))==null?null:l.invalid)&&(((l=v.itemForm.get("type_id"))==null?null:l.dirty)||((l=v.itemForm.get("type_id"))==null?null:l.touched)))),a(3),d("ngForOf",v.mTypes),a(),d("ngIf",((m=v.itemForm.get("type_id"))==null?null:m.invalid)&&(((m=v.itemForm.get("type_id"))==null?null:m.dirty)||((m=v.itemForm.get("type_id"))==null?null:m.touched))),a(4),d("ngClass",x(13,Nt,((f=v.itemForm.get("description"))==null?null:f.invalid)&&(((f=v.itemForm.get("description"))==null?null:f.dirty)||((f=v.itemForm.get("description"))==null?null:f.touched)))),a(),d("ngIf",((_=v.itemForm.get("description"))==null?null:_.invalid)&&(((_=v.itemForm.get("description"))==null?null:_.dirty)||((_=v.itemForm.get("description"))==null?null:_.touched))),a(4),d("disabled",v.itemForm.invalid)}}function Tr(n,i){if(n&1){let e=w();o(0,"div")(1,"p",83),y("click",function(){S(e);let l=u();return I(l.onShowCreate())}),p(2,"i",84),s(3,"Create a new playlist"),r()()}}var yt=class n{constructor(i,e,t,l,m,f,_){this.route=i;this.mMediaService=e;this.mPlaylistService=t;this.mToastrService=l;this.mAppContextService=m;this.router=f;this.fb=_;this.itemForm=this.fb.group({name:["",E.required],type_id:["",E.required],description:["",E.nullValidator]}),this.myPlaylists(),this.index()}id;item={};mCurrentUrl="";mItem="";mCreateIndex=0;itemForm;mEditIndex=null;mProgress=!1;mRelatedComponent;mPlaylists=[];mTypes=[];ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.mItem=this.item,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.mCurrentUrl=window.location.origin+this.router.url}index(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mTypes=i.data.types,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}toggleReact(i,e){let t={id:i.id,type_id:e};this.mMediaService.reactItem(t).subscribe({next:l=>{l&&(l.status==="success"&&(e==1?this.mToastrService.success(l.message):this.mToastrService.error(l.message),this.mItem=l.data),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}copyUrl(){navigator.clipboard.writeText(this.mCurrentUrl).then(()=>{this.mToastrService.success("Link copied to clipboard!")})}onVideoEnded(){this.mRelatedComponent&&this.mRelatedComponent.playNextVideo()}onSubmit(i){let e={name:i.name,type_id:i.type_id,description:i.description};this.mProgress=!0,this.mPlaylistService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.mPlaylists=[t.item,...this.mPlaylists??[]],this.itemForm.reset(),this.onCancelCreate(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}onShowCreate(){this.mCreateIndex=1}onCancelCreate(){this.mCreateIndex=0}myPlaylists(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mPlaylists=i.data.playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}isInList(i,e){return e?.some(t=>t.playlist_id===i)??!1}onSave(i,e){if(e.target.checked){let l={media_id:this.item.id,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.addItem(l).subscribe({next:m=>{m&&(m.status==="success"&&this.mToastrService.success(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}else{let l={media_id:this.item.id,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.removeItem(l).subscribe({next:m=>{m&&(m.status==="success"&&this.mToastrService.error(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}}static \u0275fac=function(e){return new(e||n)(h(be),h(V),h(ct),h(F),h(k),h(X),h(te))};static \u0275cmp=M({type:n,selectors:[["app-show"]],viewQuery:function(e,t){if(e&1&&Ne(sr,5),e&2){let l;De(l=je())&&(t.mRelatedComponent=l.first)}},standalone:!1,decls:102,vars:32,consts:[["mRelatedComponent",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-9","order-md-1"],[1,"col-md-12"],[3,"data","mVideoEnded",4,"ngIf"],[1,"fw-bold1","card-title1"],[1,"col-6"],[1,"d-flex","justify-content-end"],[1,"mx-2","btn",3,"click"],[3,"ngClass"],[1,"bi","me-2",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#modal",1,"mx-2","btn"],[1,"bi","bi-bookmark-fill","me-2"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"mx-2","btn"],[1,"bi","bi-share-fill","me-2"],[1,"text-decoration-none","text-reset1","d-flex","align-items-center",3,"routerLink"],[1,"rounded-circle","bg-primary","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"ms-2"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted","mt-0"],[1,"py-2"],[1,"justify-text",2,"word-break","break-word","white-space","normal",3,"innerHTML"],["for","categories",1,"text-muted","me-2"],["class","text-decoration-none",3,"routerLink",4,"ngFor","ngForOf"],["for","tags",1,"text-muted","me-2"],["href","#",1,"text-decoration-none",3,"click"],[3,"data",4,"ngIf"],[1,"col-md-3","order-md-2"],["id","myModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-flex","justify-content-center","gap-3"],["target","_blank",1,"btn","btn-outline-primary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-facebook","fs-4"],["target","_blank",1,"btn","btn-outline-info","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-twitter","fs-4"],["target","_blank",1,"btn","btn-outline-secondary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-linkedin","fs-4"],[1,"bi","bi-whatsapp","fs-4"],[1,"modal-footer"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text","text-primary",3,"click"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["class","mb-3",4,"ngIf"],[1,"modal-footer","d-block"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"mVideoEnded","data"],[1,"text-decoration-none",3,"routerLink"],[3,"data"],[1,"mb-3"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"me-1"],[3,"ngSubmit","formGroup"],["for","name",1,"form-label","required"],["formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","description",1,"form-label","required1"],["formControlName","description",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[3,"click"],[1,"bi","bi-plus-lg","me-2"]],template:function(e,t){e&1&&(c(0,cr,1,0,"app-progress",1),o(1,"section")(2,"div",2),p(3,"div",3),r(),o(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",5)(11,"div",9)(12,"div",5)(13,"div",10),c(14,pr,1,1,"app-hls-player",11),r(),o(15,"div",10)(16,"h6",12),s(17),r()(),o(18,"div",13),s(19),r(),o(20,"div",13)(21,"div",14)(22,"span",15),y("click",function(){return t.toggleReact(t.item,1)}),o(23,"span",16),p(24,"i",17),s(25),r()(),o(26,"span",15),y("click",function(){return t.toggleReact(t.item,2)}),o(27,"span",16),p(28,"i",17),s(29),r()(),o(30,"span",18),p(31,"i",19),o(32,"span"),s(33,"SAVE"),r()(),o(34,"span",20),p(35,"i",21),o(36,"span"),s(37,"SHARE"),r()()()(),o(38,"div",10),p(39,"hr"),r(),o(40,"div",10)(41,"a",22)(42,"div",23),s(43),r(),o(44,"div",24)(45,"h6",25),s(46),r(),o(47,"div",26),s(48),r()()()(),o(49,"div",10)(50,"div",27),p(51,"p",28),o(52,"div")(53,"label",29),s(54,"Categories:"),r(),c(55,fr,3,4,"a",30),r(),o(56,"div")(57,"label",31),s(58,"Tags:"),r(),o(59,"a",32),y("click",function(m){return m.preventDefault()}),s(60),r()()()(),o(61,"div",10),p(62,"hr"),r(),o(63,"div",10),c(64,vr,1,1,"app-comments",33),r()()(),o(65,"div",34),c(66,hr,2,1,"app-related",33),r()()()()()()()()(),o(67,"section")(68,"div",35)(69,"div",36)(70,"div",37)(71,"div",38)(72,"h5",39),s(73,"Share media"),r(),p(74,"button",40),r(),o(75,"div",41)(76,"div",42)(77,"a",43),p(78,"i",44),r(),o(79,"a",45),p(80,"i",46),r(),o(81,"a",47),p(82,"i",48),r(),o(83,"a",43),p(84,"i",49),r()()(),o(85,"div",50)(86,"div",51)(87,"input",52),B("ngModelChange",function(m){return H(t.mCurrentUrl,m)||(t.mCurrentUrl=m),m}),r(),o(88,"div",53),y("click",function(){return t.copyUrl()}),s(89,"COPY"),r()()()()()(),o(90,"div",54)(91,"div",36)(92,"div",37)(93,"div",38)(94,"h5",39),s(95,"Save to..."),r(),p(96,"button",40),r(),o(97,"div",41),c(98,_r,2,1,"div",55),r(),o(99,"div",56),c(100,wr,26,15,"form",57)(101,Tr,4,0,"div",1),r()()()()()),e&2&&(d("ngIf",t.mProgress),a(14),d("ngIf",t.item),a(3),g(t.item.title),a(2),C(" ",t.item.total_views," "),a(4),d("ngClass",x(28,mr,t.mItem.is_liked)),a(),d("ngClass",t.mItem.is_liked?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"),a(),C("",t.mItem.likes_count," "),a(2),d("ngClass",x(30,dr,t.mItem.is_disliked)),a(),d("ngClass",t.mItem.is_disliked?"bi-hand-thumbs-down-fill":"bi-hand-thumbs-down"),a(),C("",t.mItem.dislikes_count," "),a(12),$("routerLink","/users/show/",t.item.user==null?null:t.item.user.id,""),a(2),C(" ",t.mAppContextService.getInitials(t.item.user==null?null:t.item.user.name)," "),a(3),g(t.item.user==null?null:t.item.user.name),a(2),C("Published ",t.item.readable_date,""),a(3),d("innerHTML",t.item.description,re),a(4),d("ngForOf",t.item.media_categories),a(5),g(t.item.tags),a(4),d("ngIf",t.item),a(2),d("ngIf",t.item),a(11),d("href","https://www.facebook.com/sharer/sharer.php?u="+t.mCurrentUrl,Z),a(2),d("href","https://twitter.com/intent/tweet?url="+t.mCurrentUrl,Z),a(2),d("href","https://www.linkedin.com/shareArticle?url="+t.mCurrentUrl,Z),a(2),d("href","https://wa.me/?text="+t.mCurrentUrl,Z),a(4),j("ngModel",t.mCurrentUrl),a(11),d("ngIf",t.mPlaylists&&t.mPlaylists.length>0),a(2),d("ngIf",t.mCreateIndex===1),a(),d("ngIf",t.mCreateIndex===0))},dependencies:[P,L,O,A,G,xe,Se,ee,Ce,W,z,at,Q,J,q,lt,Ge,Qe],encapsulation:2})};var Mr=()=>["/media/watch"],Fr=n=>({video:n}),kr=(n,i)=>({active:n,disabled:i});function Pr(n,i){n&1&&p(0,"app-progress")}function Or(n,i){if(n&1&&(o(0,"div")(1,"a",13)(2,"div",14),p(3,"img",15),r(),o(4,"div",16)(5,"h6",17),s(6),r(),o(7,"div",18)(8,"span"),s(9),r(),s(10,"\xA0\u2022 "),o(11,"span"),s(12),r(),s(13,"\xA0\u2022 "),o(14,"span"),s(15),r()()()()()),n&2){let e=i.$implicit;a(),d("routerLink",U(7,Mr))("queryParams",x(8,Fr,e.media==null?null:e.media.id)),a(2),d("src",e.media.thumbnail_url,Z),a(3),g(e.media==null?null:e.media.title),a(3),g(e.media==null||e.media.user==null?null:e.media.user.name),a(3),g(e.media==null?null:e.media.total_views),a(3),g(e.media==null?null:e.media.readable_date)}}function Lr(n,i){if(n&1&&(o(0,"div"),c(1,Or,16,10,"div",12),r()),n&2){let e=u();a(),d("ngForOf",e.mItems)}}function Ar(n,i){if(n&1){let e=w();o(0,"li",21)(1,"a",22),y("click",function(){let l=S(e).$implicit,m=u(2);return I(m.onChangePage(l.url))}),r()()}if(n&2){let e=i.$implicit;d("ngClass",ve(2,kr,e.active,!e.url)),a(),d("innerHTML",e.label,re)}}function Vr(n,i){if(n&1&&(o(0,"div")(1,"ul",19),c(2,Ar,2,5,"li",20),r()()),n&2){let e=u();a(2),d("ngForOf",e.links)}}function qr(n,i){n&1&&(o(0,"p",23),s(1,"No items"),r())}var bt=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ue("",E.required),this.itemForm=new Be({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.likedMediaItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(h(V),h(F),h(k))};static \u0275cmp=M({type:n,selectors:[["app-liked"]],standalone:!1,decls:17,vars:5,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-decoration-none","text-reset","me-1",3,"routerLink","queryParams"],[1,"col-md-2"],["width","100%","height","auto","alt","Thumbnail",1,"img-fluid","rounded","ratio","ratio-16x9",3,"src"],[1,"col-md-10"],[1,"mb-1"],[1,"text-muted","text-xs"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1&&(c(0,Pr,1,0,"app-progress",1),o(1,"section")(2,"div",2),p(3,"div",3),r(),o(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),s(11),r()(),o(12,"div",10),c(13,Lr,2,1,"div",11)(14,Vr,3,1,"div",1)(15,qr,2,0,"ng-template",null,0,pe),r()()()()()()()),e&2){let l=oe(16);d("ngIf",t.mProgress),a(11),C(" Liked media (",t.mItems.length,") "),a(2),d("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",l),a(),d("ngIf",t.links)}},dependencies:[P,L,O,A,q],encapsulation:2})};var Rr=()=>["/media/watch"],Nr=n=>({video:n}),Dr=(n,i)=>({active:n,disabled:i});function jr(n,i){n&1&&p(0,"app-progress")}function Hr(n,i){if(n&1&&(o(0,"div")(1,"a",13)(2,"div",14),p(3,"img",15),r(),o(4,"div",16)(5,"h6",17),s(6),r(),o(7,"div",18)(8,"span"),s(9),r(),s(10,"\xA0\u2022 "),o(11,"span"),s(12),r(),s(13,"\xA0\u2022 "),o(14,"span"),s(15),r()()()()()),n&2){let e=i.$implicit;a(),d("routerLink",U(7,Rr))("queryParams",x(8,Nr,e.media==null?null:e.media.id)),a(2),d("src",e.media.thumbnail_url,Z),a(3),g(e.media==null?null:e.media.title),a(3),g(e.media==null||e.media.user==null?null:e.media.user.name),a(3),g(e.media==null?null:e.media.total_views),a(3),g(e.media==null?null:e.media.readable_date)}}function Br(n,i){if(n&1&&(o(0,"div"),c(1,Hr,16,10,"div",12),r()),n&2){let e=u();a(),d("ngForOf",e.mItems)}}function Ur(n,i){if(n&1){let e=w();o(0,"li",21)(1,"a",22),y("click",function(){let l=S(e).$implicit,m=u(2);return I(m.onChangePage(l.url))}),r()()}if(n&2){let e=i.$implicit;d("ngClass",ve(2,Dr,e.active,!e.url)),a(),d("innerHTML",e.label,re)}}function $r(n,i){if(n&1&&(o(0,"div")(1,"ul",19),c(2,Ur,2,5,"li",20),r()()),n&2){let e=u();a(2),d("ngForOf",e.links)}}function Wr(n,i){n&1&&(o(0,"p",23),s(1,"No items"),r())}var Ct=class n{constructor(i,e,t){this.mMediaService=i;this.mToastrService=e;this.mContext=t}mItems=[];itemForm;search_term;mProgress=!1;links=[];ngOnInit(){this.index(),this.search_term=new Ue("",E.required),this.itemForm=new Be({search_term:this.search_term})}index(){this.mProgress=!0,this.mProgress=!0,this.mMediaService.historyMediaItems().subscribe({next:i=>{i&&(this.mItems=i.data,this.links=i.links,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onChangePage(i){this.mProgress=!0,this.mMediaService.paginateItems(i).subscribe({next:e=>{e&&(this.mItems=e.data,this.links=e.links,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(h(V),h(F),h(k))};static \u0275cmp=M({type:n,selectors:[["app-history"]],standalone:!1,decls:17,vars:5,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-decoration-none","text-reset","me-1",3,"routerLink","queryParams"],[1,"col-md-2"],["width","100%","height","auto","alt","Thumbnail",1,"img-fluid","rounded","ratio","ratio-16x9",3,"src"],[1,"col-md-10"],[1,"mb-1"],[1,"text-muted","text-xs"],[1,"pagination"],["class","page-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"page-item",3,"ngClass"],[1,"page-link",3,"click","innerHTML"],[1,"p-5","text-center","text-muted"]],template:function(e,t){if(e&1&&(c(0,jr,1,0,"app-progress",1),o(1,"section")(2,"div",2),p(3,"div",3),r(),o(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9),s(11),r()(),o(12,"div",10),c(13,Br,2,1,"div",11)(14,$r,3,1,"div",1)(15,Wr,2,0,"ng-template",null,0,pe),r()()()()()()()),e&2){let l=oe(16);d("ngIf",t.mProgress),a(11),C(" History (",t.mItems.length,") "),a(2),d("ngIf",t.mItems&&t.mItems.length>0)("ngIfElse",l),a(),d("ngIf",t.links)}},dependencies:[P,L,O,A,q],encapsulation:2})};var Li=n=>({"is-invalid":n});function zr(n,i){n&1&&p(0,"app-progress")}function Gr(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Qr(n,i){if(n&1&&(o(0,"div",32),c(1,Gr,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function Jr(n,i){if(n&1&&(o(0,"option",33),s(1),r()),n&2){let e=i.$implicit;fe("value",e.id),a(),g(e.alias)}}function Yr(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Kr(n,i){if(n&1&&(o(0,"div",34),c(1,Yr,2,0,"div",0),r()),n&2){let e,t=u();a(),d("ngIf",(e=t.itemForm.get("status_id"))==null||e.errors==null?null:e.errors.required)}}var xt=class n{constructor(i,e,t,l,m){this.mToastrService=i;this.mMediaService=e;this.fb=t;this.router=l;this.route=m;this.itemForm=this.fb.group({title:["",E.required],status_id:["",E.required]})}mStatus;itemForm;mProgress=!1;id;item={};ngOnInit(){this.id=this.route.snapshot.paramMap.get("id"),this.mProgress=!0,this.mMediaService.getOneItem(this.id).subscribe({next:i=>{i&&(this.item=i,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}}),this.index()}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{i&&(this.mStatus=i.data.approval_status,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onSubmit(i){let e={id:this.id,title:i.title,status_id:i.status_id};this.mProgress=!0,this.mMediaService.processItem(e).subscribe({next:t=>{t&&(this.mToastrService.success(t.message),this.router.navigateByUrl("/media"),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(h(F),h(V),h(te),h(X),h(be))};static \u0275cmp=M({type:n,selectors:[["app-process"]],standalone:!1,decls:47,vars:14,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],["for","title",1,"form-label","required"],["type","text","formControlName","title","readonly","",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","status_id",1,"form-label","required"],["formControlName","status_id",1,"form-select",3,"ngModelChange","ngModel","ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],[1,"text-end"],["routerLink","/media",1,"btn","btn-warning","me-1"],["type","submit",1,"btn","btn-primary",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"]],template:function(e,t){if(e&1&&(c(0,zr,1,0,"app-progress",0),o(1,"section")(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3",5),s(7,"Media"),r()(),o(8,"div",4)(9,"ol",6)(10,"li",7)(11,"a",8),s(12,"Home"),r()(),o(13,"li",9),s(14,"Media"),r(),o(15,"li",10),s(16,"Process"),r()()()()(),o(17,"div",3)(18,"div",11)(19,"div",12)(20,"div",13)(21,"div",14),s(22," Process Media "),r(),p(23,"div",15),r(),o(24,"div",16)(25,"form",17),y("ngSubmit",function(){return t.onSubmit(t.itemForm.value)}),o(26,"div",18)(27,"div",19)(28,"div",20)(29,"label",21),s(30,"Title:"),r(),p(31,"input",22),c(32,Qr,2,1,"div",23),r()(),o(33,"div",19)(34,"div",20)(35,"label",24),s(36,"Status:"),r(),o(37,"select",25),B("ngModelChange",function(m){return H(t.item.status_id,m)||(t.item.status_id=m),m}),o(38,"option",26),s(39,"--- Select status ---"),r(),c(40,Jr,2,2,"option",27),r(),c(41,Kr,2,1,"div",28),r()()(),o(42,"div",29)(43,"a",30),s(44,"Cancel"),r(),o(45,"button",31),s(46,"Submit"),r()()()()()()()()()),e&2){let l,m,f,_;d("ngIf",t.mProgress),a(25),d("formGroup",t.itemForm),a(6),d("ngModel",t.item.title)("ngClass",x(10,Li,((l=t.itemForm.get("title"))==null?null:l.invalid)&&(((l=t.itemForm.get("title"))==null?null:l.dirty)||((l=t.itemForm.get("title"))==null?null:l.touched)))),a(),d("ngIf",((m=t.itemForm.get("title"))==null?null:m.invalid)&&(((m=t.itemForm.get("title"))==null?null:m.dirty)||((m=t.itemForm.get("title"))==null?null:m.touched))),a(5),j("ngModel",t.item.status_id),d("ngClass",x(12,Li,((f=t.itemForm.get("status_id"))==null?null:f.invalid)&&(((f=t.itemForm.get("status_id"))==null?null:f.dirty)||((f=t.itemForm.get("status_id"))==null?null:f.touched)))),a(3),d("ngForOf",t.mStatus),a(),d("ngIf",((_=t.itemForm.get("status_id"))==null?null:_.invalid)&&(((_=t.itemForm.get("status_id"))==null?null:_.dirty)||((_=t.itemForm.get("status_id"))==null?null:_.touched))),a(4),d("disabled",t.itemForm.invalid)}},dependencies:[P,L,O,A,G,xe,Se,ee,Ce,W,z,Q,J,q],encapsulation:2})};var Ai=Ke(st());var St=class n{constructor(i,e){this.mAppContextService=i;this.http=e}allItems(){let i=`${b.base_url}/reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}createItem(i){let e=`${b.base_url}/reports`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}getOneItem(i){let e=`${b.base_url}/reports/${i}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(i){let e=`${b.base_url}/reports/${i.id}`;return this.http.put(e,i,this.mAppContextService.getHttpOptions())}deleteItem(i){let e=`${b.base_url}/reports/${i.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(i){return this.http.get(i,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let i=`${b.base_url}/unpaginated-items-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}searchItems(i){let e=`${b.base_url}/search-reports`;return this.http.post(e,i,this.mAppContextService.getHttpOptions())}insightsItems(){let i=`${b.base_url}/insights-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}analyticsItems(){let i=`${b.base_url}/analytics-reports`;return this.http.get(i,this.mAppContextService.getHttpOptions())}static \u0275fac=function(e){return new(e||n)(ie(k),ie(ye))};static \u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xr=["chart"],It=class n{constructor(i,e,t,l){this.mContext=i;this.mReportService=e;this.mToastrService=t;this.mAppInfo=l}mProgress=!1;item;chart;chartOptions;mMediaPerMonth;mViewsPerMonth;mLikesPerMonth;mCommentsPerMonth;ngOnInit(){this.index()}index(){this.mProgress=!0,this.mReportService.analyticsItems().subscribe({next:i=>{i&&(this.item=i.data,this.mMediaPerMonth=Object.values(this.item.media_per_month),this.mViewsPerMonth=Object.values(this.item.views_per_month),this.mLikesPerMonth=Object.values(this.item.likes_per_month),this.mCommentsPerMonth=Object.values(this.item.comments_per_month),this.reports())},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}reports(){this.chartOptions={series:[{name:"Media",data:this.mMediaPerMonth},{name:"Views",data:this.mViewsPerMonth},{name:"Likes",data:this.mLikesPerMonth},{name:"Comments",data:this.mCommentsPerMonth}],chart:{type:"line",height:350},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},title:{text:"Yearly Trend",align:"center"}}}static \u0275fac=function(e){return new(e||n)(h(k),h(St),h(F),h(_i))};static \u0275cmp=M({type:n,selectors:[["app-analytics"]],viewQuery:function(e,t){if(e&1&&Ne(Xr,5),e&2){let l;De(l=je())&&(t.chart=l.first)}},standalone:!1,decls:125,vars:50,consts:[["chart",""],[1,"row"],[1,"col-12","col-sm-6","col-md-3"],[1,"info-box"],[1,"info-box-icon","text-bg-primary","shadow-sm"],[1,"bi","bi-gear-fill"],[1,"info-box-content"],[1,"info-box-text"],[1,"info-box-number"],[1,"info-box-icon","text-bg-danger","shadow-sm"],[1,"bi","bi-hand-thumbs-up-fill"],[1,"info-box-icon","text-bg-success","shadow-sm"],[1,"bi","bi-collection-play-fill"],[1,"info-box-icon","text-bg-warning","shadow-sm"],[1,"bi","bi-people-fill"],[1,"col-md-12"],[1,"card","mb-4"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"col-md-8"],[1,"text-center"],["id","report-chart"],[3,"series","chart","xaxis","title"],[1,"col-md-4"],[1,"progress-group"],[1,"float-end"],[1,"progress","progress-sm"],[1,"progress-bar","text-bg-primary"],[1,"progress-bar","text-bg-success"],[1,"progress-bar","text-bg-danger"],[1,"progress-bar","text-bg-warning"],[1,"card-footer"],[1,"col-md-4","col-6"],[1,"text-center","border-end"],[1,"text-success"],[1,"bi","bi-caret-right-fill"],[1,"fw-bold","mb-0"],[1,"text-uppercase"],[1,"text-info"],[1,"text-danger"]],template:function(e,t){e&1&&(o(0,"section")(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),p(5,"i",5),r(),o(6,"div",6)(7,"span",7),s(8,"Memory Usage"),r(),o(9,"span",8),s(10),r()()()(),o(11,"div",2)(12,"div",3)(13,"span",9),p(14,"i",10),r(),o(15,"div",6)(16,"span",7),s(17,"Likes"),r(),o(18,"span",8),s(19),ae(20,"number"),r()()()(),o(21,"div",2)(22,"div",3)(23,"span",11),p(24,"i",12),r(),o(25,"div",6)(26,"span",7),s(27,"Media"),r(),o(28,"span",8),s(29),ae(30,"number"),r()()()(),o(31,"div",2)(32,"div",3)(33,"span",13),p(34,"i",14),r(),o(35,"div",6)(36,"span",7),s(37,"Total Views"),r(),o(38,"span",8),s(39),ae(40,"number"),r()()()()(),o(41,"div",1)(42,"div",15)(43,"div",16)(44,"div",17)(45,"h5",18),s(46,"Recap Report"),r()(),o(47,"div",19)(48,"div",1)(49,"div",20)(50,"p",21)(51,"strong"),s(52),r()(),p(53,"div",22),o(54,"div"),p(55,"apx-chart",23,0),r()(),o(57,"div",24)(58,"p",21)(59,"strong"),s(60,"Overview"),r()(),o(61,"div",25),s(62," Memory "),o(63,"span",26)(64,"b"),s(65),r(),s(66),r(),o(67,"div",27),p(68,"div",28),r()(),o(69,"div",25),s(70," Likes "),o(71,"span",26)(72,"b"),s(73),r(),s(74),r(),o(75,"div",27),p(76,"div",29),r()(),o(77,"div",25),s(78," Media "),o(79,"span",26)(80,"b"),s(81),r(),s(82),r(),o(83,"div",27),p(84,"div",30),r()(),o(85,"div",25),s(86," Views "),o(87,"span",26)(88,"b"),s(89),r(),s(90),r(),o(91,"div",27),p(92,"div",31),r()()()()(),o(93,"div",32)(94,"div",1)(95,"div",33)(96,"div",34)(97,"span",35),p(98,"i",36),s(99),r(),o(100,"h5",37),s(101),ae(102,"number"),r(),o(103,"span",38),s(104,"TOTAL COMMENTS"),r()()(),o(105,"div",33)(106,"div",34)(107,"span",39),p(108,"i",36),s(109),r(),o(110,"h5",37),s(111),ae(112,"number"),r(),o(113,"span",38),s(114,"TOTAL VIEWS"),r()()(),o(115,"div",33)(116,"div",21)(117,"span",40),p(118,"i",36),s(119),r(),o(120,"h5",37),s(121),ae(122,"number"),r(),o(123,"span",38),s(124,"TOTAL MEDIA"),r()()()()()()()()()),e&2&&(a(10),C(" ",t.mContext.formatMemory(t.item==null?null:t.item.my_total_memory)," "),a(9),g(Fe(20,32,t.item.my_total_likes,"1.0-0")),a(10),g(Fe(30,35,t.item.my_total_media,"1.0-0")),a(10),g(Fe(40,38,t.item.my_total_views,"1.0-0")),a(13),Je("Analytics: 1 Jan,",t.mAppInfo.year," - 31 Dec,",t.mAppInfo.year,""),a(3),d("series",t.chartOptions.series)("chart",t.chartOptions.chart)("xaxis",t.chartOptions.xaxis)("title",t.chartOptions.title),a(10),g(t.mContext.formatMemory(t.item.my_total_memory)),a(),C("/",t.mContext.formatMemory(t.item.total_memory),""),a(2),Me("width",t.item.total_memory_percentage,"%"),a(5),g(t.item.my_total_likes),a(),C("/",t.item.total_likes,""),a(2),Me("width",t.item.total_likes_percentage,"%"),a(5),g(t.item.my_total_media),a(),C("/",t.item.total_media,""),a(2),Me("width",t.item.total_media_percentage,"%"),a(5),g(t.item.my_total_views),a(),C("/",t.item.total_views,""),a(2),Me("width",t.item.total_views_percentage,"%"),a(7),C(" ",t.item.total_comments_percentage,"%"),a(2),g(Fe(102,41,t.item.my_total_comments,"1.0-0")),a(8),C(" ",t.item.total_views_percentage,"%"),a(2),g(Fe(112,44,t.item.my_total_views,"1.0-0")),a(8),C(" ",t.item.total_media_percentage,"%"),a(2),g(Fe(122,47,t.item.my_total_media,"1.0-0")))},dependencies:[bi,mi],encapsulation:2})};var to=()=>({exact:!0}),io=(n,i,e)=>({"bg-warning text-dark":n,"bg-primary":i,"bg-danger":e}),no=(n,i,e)=>({"bg-secondary":n,"bg-warning text-dark":i,"bg-dark":e}),ro=()=>[1,2,4];function oo(n,i){n&1&&p(0,"app-progress")}function ao(n,i){if(n&1&&(o(0,"div",27)(1,"div",28)(2,"label",29),s(3,"Biography:"),r(),o(4,"div",13),s(5),r()()()),n&2){let e=u();a(5),g(e.mCurrentUser.bio)}}function lo(n,i){if(n&1&&(o(0,"div",43)(1,"a",44),p(2,"i",45),s(3," Process "),r()()),n&2){let e=u(2).$implicit;a(),$("routerLink","/media/process/",e.id,"")}}function so(n,i){if(n&1){let e=w();o(0,"div")(1,"div",35)(2,"a",36),s(3,"Show"),r(),o(4,"a",37),s(5,"Edit"),r(),o(6,"button",38),y("click",function(){S(e);let l=u().$implicit,m=u(3);return I(m.onDelete(l))}),s(7,"Delete"),r()(),p(8,"app-media-card",39),o(9,"div",40)(10,"span",41),s(11),r(),o(12,"span",41),s(13),r()(),c(14,lo,4,2,"div",42),r()}if(n&2){let e=u().$implicit,t=u(3);a(2),$("routerLink","/media/show/",e.id,""),a(2),$("routerLink","/media/edit/",e.id,""),a(4),d("data",e),a(2),d("ngClass",He(10,io,e.status_id==1,e.status_id==2,e.status_id==3)),a(),C(" ",e.status==null?null:e.status.name,""),a(),d("ngClass",He(14,no,e.media_status_id==1,e.media_status_id==2,e.media_status_id==3)),a(),C(" ",e.media_status==null?null:e.media_status.name,""),a(),d("ngIf",t.mAppContextService.hasRoles(U(18,ro)))}}function mo(n,i){if(n&1&&(o(0,"div",34),c(1,so,15,19,"div",1),r()),n&2){let e=i.$implicit;a(),d("ngIf",e)}}function co(n,i){if(n&1&&(o(0,"div",32),c(1,mo,2,1,"div",33),r()),n&2){let e=u(2);a(),d("ngForOf",e.myMedia)}}function po(n,i){n&1&&(o(0,"p",46),s(1,"No items"),r())}function uo(n,i){if(n&1&&(o(0,"div",27)(1,"div",28)(2,"label",30),s(3,"Uploads:"),r(),c(4,co,2,1,"div",31)(5,po,2,0,"ng-template",null,0,pe),r()()),n&2){let e=oe(6),t=u();a(4),d("ngIf",t.myMedia&&t.myMedia.length>0)("ngIfElse",e)}}function fo(n,i){if(n&1&&(o(0,"a",48),p(1,"app-media-card",39),r()),n&2){let e=u().$implicit;$("routerLink","/media/show/",e.id,""),a(),d("data",e)}}function vo(n,i){if(n&1&&(o(0,"div",34),c(1,fo,2,3,"a",47),r()),n&2){let e=i.$implicit;a(),d("ngIf",e)}}function ho(n,i){if(n&1&&(o(0,"div",32),c(1,vo,2,1,"div",33),r()),n&2){let e=u(2);a(),d("ngForOf",e.myPlaylists)}}function go(n,i){n&1&&(o(0,"p",46),s(1,"No items"),r())}function _o(n,i){if(n&1&&(o(0,"div",27)(1,"div",28)(2,"label",29),s(3,"Playlists:"),r(),c(4,ho,2,1,"div",31)(5,go,2,0,"ng-template",null,0,pe),r()()),n&2){let e=oe(6),t=u();a(4),d("ngIf",t.myPlaylists&&t.myPlaylists.length>0)("ngIfElse",e)}}function yo(n,i){if(n&1&&(o(0,"a",48),p(1,"app-media-card",39),r()),n&2){let e=u().$implicit;$("routerLink","/media/show/",e.id,""),a(),d("data",e)}}function bo(n,i){if(n&1&&(o(0,"div",34),c(1,yo,2,3,"a",47),o(2,"div",49)(3,"small"),s(4,"Server Link: "),o(5,"span",13),s(6),r()(),p(7,"br"),o(8,"small"),s(9,"Stream Key: "),o(10,"span",13),s(11),r()()()()),n&2){let e=i.$implicit;a(),d("ngIf",e),a(5),g(e.server_link),a(5),g(e.stream_key)}}function Co(n,i){if(n&1&&(o(0,"div",32),c(1,bo,12,3,"div",33),r()),n&2){let e=u(2);a(),d("ngForOf",e.mLiveStreams)}}function xo(n,i){n&1&&(o(0,"p",46),s(1,"No items"),r())}function So(n,i){if(n&1&&(o(0,"div",27)(1,"div",28)(2,"label",29),s(3,"Live Streams:"),r(),c(4,Co,2,1,"div",31)(5,xo,2,0,"ng-template",null,0,pe),r()()),n&2){let e=oe(6),t=u();a(4),d("ngIf",t.mLiveStreams&&t.mLiveStreams.length>0)("ngIfElse",e)}}function Io(n,i){n&1&&(o(0,"div",27)(1,"div",28)(2,"label",50),s(3,"Analytics:"),r(),p(4,"app-analytics"),r()())}var Ee=class n{constructor(i,e,t,l,m){this.mAuthService=i;this.mAppContextService=e;this.mMediaService=t;this.mToastrService=l;this.router=m}mCurrentUser;mInitials;itemForm;mProgress=!1;myMedia=[];myPlaylists=[];mLiveStreams=[];ngOnInit(){this.mCurrentUser=this.mAuthService.currentUser,this.mInitials=this.mCurrentUser.name.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),this.index(this.mCurrentUser.id)}index(i){this.mProgress=!0,this.mMediaService.myMedia(i).subscribe({next:e=>{e&&(this.myMedia=e.data.my_media,this.myPlaylists=e.data.my_playlists,this.myPlaylists=e.data.my_playlists,this.mLiveStreams=e.data.live_streams,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}onDelete(i){Ai.default.mixin({customClass:{cancelButton:"btn btn-dark me-2",confirmButton:"btn btn-danger"},buttonsStyling:!1}).fire({title:"Remove?",text:"You won't be able to revert this!",icon:"error",showCancelButton:!0,reverseButtons:!0,cancelButtonText:"Cancel",confirmButtonText:"Delete"}).then(t=>{t.isConfirmed&&(this.mProgress=!0,this.mMediaService.deleteItem(i).subscribe({next:l=>{l&&(this.myMedia=this.myMedia.filter(m=>m.id!==i.id),this.mToastrService.error(l.message),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}}))})}static \u0275fac=function(e){return new(e||n)(h(We),h(k),h(V),h(F),h(X))};static \u0275cmp=M({type:n,selectors:[["app-read"]],standalone:!1,decls:46,vars:13,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"user-image","rounded-circle","bg-primary","text-white","fw-bold","d-inline-flex","justify-content-center","align-items-center","me-3",2,"width","64px","height","64px","font-size","1rem"],[1,"mb-0","fw-semibold"],[1,"text-muted"],["id","myTab","role","tablist",1,"nav","nav-tabs","border-0","text-uppercase"],["role","presentation",1,"nav-item"],["routerLink","/media/about","routerLinkActive","active","id","home-tab","data-bs-toggle","tab","data-bs-target","#home","type","button","role","tab","aria-controls","home",1,"nav-link","border-0","text-uppercase","text-sm",3,"routerLinkActiveOptions"],["routerLink","/media/my-media","routerLinkActive","active","id","media-tab","data-bs-toggle","tab","data-bs-target","#media","type","button","role","tab","aria-controls","media",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/my-playlist","routerLinkActive","active","id","playlist-tab","data-bs-toggle","tab","data-bs-target","#playlist","type","button","role","tab","aria-controls","playlist",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/live-streams","routerLinkActive","active","id","live-streams-tab","data-bs-toggle","tab","data-bs-target","#live-streams","type","button","role","tab","aria-controls","live-streams",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/analytics","routerLinkActive","active","id","analytics-tab","data-bs-toggle","tab","data-bs-target","#analytics","type","button","role","tab","aria-controls","analytics",1,"nav-link","border-0","text-uppercase","text-sm"],[1,"card-tools"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"card-body","p-0","m-0"],["id","myTabContent",1,"tab-content","container-fluid","p-3"],["class","tab-pane fade show active",4,"ngIf"],[1,"tab-pane","fade","show","active"],[1,"mb-3"],["for","bio",1,"form-label"],["for","uploads",1,"form-label"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],["role","group","aria-label","Basic mixed styles example",1,"btn-group","w-100","mb-1"],[1,"btn","btn-dark","btn-sm",3,"routerLink"],[1,"btn","btn-primary","btn-sm",3,"routerLink"],["type","button",1,"btn","btn-warning","btn-sm",3,"click"],[3,"data"],[1,"d-flex","align-items-center1","gap-2"],[1,"badge","rounded-pill",3,"ngClass"],["class","my-1",4,"ngIf"],[1,"my-1"],[1,"btn","btn-primary","btn-sm","w-100",3,"routerLink"],[1,"bi","bi-pencil-square"],[1,"p-5","text-center","text-muted"],["class","text-decoration-none text-reset",3,"routerLink",4,"ngIf"],[1,"text-decoration-none","text-reset",3,"routerLink"],[1,"no-wrap"],["for","analytics",1,"form-label"]],template:function(e,t){e&1&&(c(0,oo,1,0,"app-progress",1),o(1,"section")(2,"div",2),p(3,"div",3),r(),o(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),s(13),r(),o(14,"div")(15,"p",12),s(16),r(),o(17,"small",13),s(18),r()()(),o(19,"ul",14)(20,"li",15)(21,"button",16),s(22," About "),r()(),o(23,"li",15)(24,"button",17),s(25," My Media "),r()(),o(26,"li",15)(27,"button",18),s(28," Playlist "),r()(),o(29,"li",15)(30,"button",19),s(31," Live Streams "),r()(),o(32,"li",15)(33,"button",20),s(34," Analytics "),r()()()(),o(35,"div",21)(36,"a",22),p(37,"i",23),s(38," Edit Profile "),r()()(),o(39,"div",24)(40,"div",25),c(41,ao,6,1,"div",26)(42,uo,7,2,"div",26)(43,_o,7,2,"div",26)(44,So,7,2,"div",26)(45,Io,5,0,"div",26),r()()()()()()()()),e&2&&(d("ngIf",t.mProgress),a(13),C(" ",t.mAppContextService.getInitials(t.mCurrentUser.name)," "),a(3),g(t.mCurrentUser.name),a(2),g(t.mCurrentUser.role==null?null:t.mCurrentUser.role.name),a(3),d("routerLinkActiveOptions",U(12,to)),a(15),$("routerLink","/profile/edit/",t.mCurrentUser.id,""),a(5),d("ngIf",t.router.url==="/media/about"),a(),d("ngIf",t.router.url==="/media/my-media"),a(),d("ngIf",t.router.url==="/media/my-playlist"),a(),d("ngIf",t.router.url==="/media/live-streams"),a(),d("ngIf",t.router.url==="/media/analytics"))},dependencies:[P,L,O,A,pi,q,$e,It],encapsulation:2})};var Eo=["mRelatedComponent"],wo=n=>({"text-primary":n}),To=n=>({"text-warning":n}),jt=()=>["/media/watch"],Mo=n=>({category:n}),Vi=n=>({"active bg-warning bg-opacity-10":n}),qi=(n,i)=>({video:n,playlist:i}),Dt=n=>({"is-invalid":n});function Fo(n,i){n&1&&p(0,"app-progress")}function ko(n,i){if(n&1){let e=w();o(0,"app-hls-player",59),y("mVideoEnded",function(){S(e);let l=u();return I(l.onVideoEnded())}),r()}if(n&2){let e=u();d("data",e.item)}}function Po(n,i){n&1&&(o(0,"span"),s(1,","),r())}function Oo(n,i){if(n&1&&(o(0,"a",60),s(1),c(2,Po,2,0,"span",1),r()),n&2){let e=i.$implicit,t=i.last;d("routerLink",U(4,jt))("queryParams",x(5,Mo,e.category_id)),a(),C(" ",e.name,""),a(),d("ngIf",!t)}}function Lo(n,i){if(n&1&&p(0,"app-comments",61),n&2){let e=u();d("data",e.item)}}function Ao(n,i){if(n&1&&(o(0,"a",70)(1,"div",71),p(2,"app-media-card",61),r()()),n&2){let e=i.$implicit,t=u(2);d("ngClass",x(4,Vi,e.media.id===t.mVideoId))("routerLink",U(6,jt))("queryParams",ve(7,qi,e.media.id,t.mPlaylistId)),a(2),d("data",e.media)}}function Vo(n,i){if(n&1&&(o(0,"div",62)(1,"div",63)(2,"h2",64)(3,"button",65),s(4),r()(),o(5,"div",66)(6,"div",67)(7,"div",68),c(8,Ao,3,10,"a",69),r()()()()()),n&2){let e=u();a(4),Je(" ",e.mPlaylist==null?null:e.mPlaylist.name," (",e.mPlaylist==null?null:e.mPlaylist.total_media,") "),a(4),d("ngForOf",e.mMediaPlaylist)}}function qo(n,i){if(n&1&&(o(0,"a",70)(1,"div",71),p(2,"div",73)(3,"app-media-card",61),r()()),n&2){let e=i.$implicit,t=u(2);d("ngClass",x(4,Vi,e.media.id===t.mVideoId))("routerLink",U(6,jt))("queryParams",ve(7,qi,e.media.id,t.mPlaylistId)),a(3),d("data",e.media)}}function Ro(n,i){if(n&1&&(o(0,"div",62)(1,"div",63)(2,"h2",64)(3,"button",65),s(4),r()(),o(5,"div",66)(6,"div",72)(7,"div",68),c(8,qo,4,10,"a",69),r()()()()()),n&2){let e=u();a(4),Je(" ",e.mCategory==null?null:e.mCategory.name," (",e.mCategory==null?null:e.mCategory.total_media,") "),a(4),d("ngForOf",e.mCategorylist)}}function No(n,i){if(n&1&&p(0,"app-related",61,0),n&2){let e=u();d("data",e.item)}}function Do(n,i){if(n&1){let e=w();o(0,"div",76)(1,"input",77),y("change",function(l){let m=S(e).$implicit,f=u(2);return I(f.onSave(m,l))}),r(),o(2,"label",78),s(3),r()()}if(n&2){let e=i.$implicit,t=u(2);a(),d("checked",t.isInList(e.id,t.item.media_playlists)),a(2),g(e.name)}}function jo(n,i){if(n&1&&(o(0,"div",74),c(1,Do,4,2,"div",75),r()),n&2){let e=u();a(),d("ngForOf",e.mMyPlaylists)}}function Ho(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Bo(n,i){if(n&1&&(o(0,"div",93),c(1,Ho,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("name"))==null||e.errors==null?null:e.errors.required)}}function Uo(n,i){if(n&1&&(o(0,"option",94),s(1),r()),n&2){let e=i.$implicit;fe("value",e.id),a(),g(e.name)}}function $o(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Wo(n,i){if(n&1&&(o(0,"div",95),c(1,$o,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("type_id"))==null||e.errors==null?null:e.errors.required)}}function zo(n,i){n&1&&(o(0,"div"),s(1,"This field is required."),r())}function Go(n,i){if(n&1&&(o(0,"div",93),c(1,zo,2,0,"div",1),r()),n&2){let e,t=u(2);a(),d("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Qo(n,i){if(n&1){let e=w();o(0,"form",79),y("ngSubmit",function(){S(e);let l=u();return I(l.onSubmit(l.itemForm.value))}),o(1,"div",5)(2,"div",10)(3,"div",74)(4,"label",80),s(5,"Name:"),r(),p(6,"input",81),c(7,Bo,2,1,"div",82),r(),o(8,"div",74)(9,"label",83),s(10,"Type:"),r(),o(11,"select",84)(12,"option",85),s(13,"--- Select type ---"),r(),c(14,Uo,2,2,"option",86),r(),c(15,Wo,2,1,"div",87),r(),o(16,"div",74)(17,"label",88),s(18,"Description:"),r(),p(19,"textarea",89),c(20,Go,2,1,"div",82),r()()(),o(21,"div",90)(22,"button",91),y("click",function(){S(e);let l=u();return I(l.onCancelCreate())}),s(23,"Cancel"),r(),o(24,"button",92),s(25,"Create"),r()()()}if(n&2){let e,t,l,m,f,_,v=u();d("formGroup",v.itemForm),a(6),d("ngClass",x(9,Dt,((e=v.itemForm.get("name"))==null?null:e.invalid)&&(((e=v.itemForm.get("name"))==null?null:e.dirty)||((e=v.itemForm.get("name"))==null?null:e.touched)))),a(),d("ngIf",((t=v.itemForm.get("name"))==null?null:t.invalid)&&(((t=v.itemForm.get("name"))==null?null:t.dirty)||((t=v.itemForm.get("name"))==null?null:t.touched))),a(4),d("ngClass",x(11,Dt,((l=v.itemForm.get("type_id"))==null?null:l.invalid)&&(((l=v.itemForm.get("type_id"))==null?null:l.dirty)||((l=v.itemForm.get("type_id"))==null?null:l.touched)))),a(3),d("ngForOf",v.mTypes),a(),d("ngIf",((m=v.itemForm.get("type_id"))==null?null:m.invalid)&&(((m=v.itemForm.get("type_id"))==null?null:m.dirty)||((m=v.itemForm.get("type_id"))==null?null:m.touched))),a(4),d("ngClass",x(13,Dt,((f=v.itemForm.get("description"))==null?null:f.invalid)&&(((f=v.itemForm.get("description"))==null?null:f.dirty)||((f=v.itemForm.get("description"))==null?null:f.touched)))),a(),d("ngIf",((_=v.itemForm.get("description"))==null?null:_.invalid)&&(((_=v.itemForm.get("description"))==null?null:_.dirty)||((_=v.itemForm.get("description"))==null?null:_.touched))),a(4),d("disabled",v.itemForm.invalid)}}function Jo(n,i){if(n&1){let e=w();o(0,"div")(1,"p",96),y("click",function(){S(e);let l=u();return I(l.onShowCreate())}),p(2,"i",97),s(3,"Create a new playlist"),r()()}}var Et=class n{constructor(i,e,t,l,m,f,_){this.route=i;this.router=e;this.mMediaService=t;this.mToastrService=l;this.mPlaylistService=m;this.mAppContextService=f;this.fb=_;this.itemForm=this.fb.group({name:["",E.required],type_id:["",E.required],description:["",E.nullValidator]}),this.myMediaPlaylists(),this.index(),this.mCurrentUrl=window.location.origin+this.router.url}id;item={};mCurrentUrl="";mItem="";mCreateIndex=0;itemForm;mEditIndex=null;mProgress=!1;mMyPlaylists=[];mMyMediaPlaylists=[];mTypes=[];mRelatedComponent;mVideoId;mVideo;mPlaylistId;mPlaylist;mMediaPlaylist=[];mCurrentMediaPlaylistIndex=0;mCategoryId;mCategory;mCategorylist=[];mCurrentCategorylistIndex=0;ngOnInit(){this.route.queryParamMap.subscribe(i=>{this.mVideoId=i.get("video"),this.mPlaylistId=i.get("playlist"),this.mCategoryId=i.get("category"),this.mPlaylistId?this.loadPlaylistMediaAndIndex(()=>{this.mVideoId&&this.loadVideo(this.mVideoId)}):this.mCategoryId?this.loadCategoryMediaAndIndex(()=>{this.mVideoId&&this.loadVideo(this.mVideoId)}):this.mVideoId&&this.loadVideo(this.mVideoId)})}loadVideo(i){this.mProgress=!0,this.mMediaService.getOneItem(i).subscribe({next:e=>{e&&(this.item=e,this.mItem=this.item,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}toggleReact(i,e){let t={id:i.id,type_id:e};this.mMediaService.reactItem(t).subscribe({next:l=>{l&&(l.status==="success"&&(e==1?this.mToastrService.success(l.message):this.mToastrService.error(l.message),this.mItem=l.data),this.mProgress=!1)},error:l=>{l.error.message&&this.mToastrService.error(l.error.message),this.mProgress=!1}})}copyUrl(){navigator.clipboard.writeText(this.mCurrentUrl).then(()=>{this.mToastrService.success("Link copied to clipboard!")})}onSubmit(i){let e={name:i.name,type_id:i.type_id,description:i.description};this.mProgress=!0,this.mPlaylistService.createItem(e).subscribe({next:t=>{t&&(t.status==="success"&&(this.mMyPlaylists=[t.item,...this.mMyPlaylists??[]],this.itemForm.reset(),this.onCancelCreate(),this.mToastrService.success(t.message)),this.mProgress=!1)},error:t=>{t.error.message&&this.mToastrService.error(t.error.message),this.mProgress=!1}})}index(){this.mProgress=!0,this.mMediaService.unpaginatedItems().subscribe({next:i=>{console.log(i),i&&(this.mTypes=i.data.media_types,this.mMyMediaPlaylists=i.data.media_playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}onShowCreate(){this.mCreateIndex=1}onCancelCreate(){this.mCreateIndex=0}myMediaPlaylists(){this.mProgress=!0,this.mPlaylistService.unpaginatedItems().subscribe({next:i=>{i&&(this.mMyPlaylists=i.data.playlists,this.mProgress=!1)},error:i=>{i.error.message&&this.mToastrService.error(i.error.message),this.mProgress=!1}})}isInList(i,e){return!i||!e?!1:e?.some(t=>t.playlist_id===i)??!1}onSave(i,e){if(e.preventDefault(),e.target.checked){let l={media_id:this.mVideoId,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.addItem(l).subscribe({next:m=>{m&&(m.status==="success"&&this.mToastrService.success(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}else{let l={media_id:this.mVideoId,playlist_id:i.id};this.mProgress=!0,this.mPlaylistService.removeItem(l).subscribe({next:m=>{m&&(m.status==="success"&&this.mToastrService.error(m.message),this.mProgress=!1)},error:m=>{m.error.message&&this.mToastrService.error(m.error.message),this.mProgress=!1}})}}onVideoEnded(){if(this.mPlaylistId&&this.mCurrentMediaPlaylistIndex<this.mMediaPlaylist.length-1){this.mCurrentMediaPlaylistIndex++;let i=this.mMediaPlaylist[this.mCurrentMediaPlaylistIndex];this.mVideoId=i.media.id,this.router.navigate(["/media/watch"],{queryParams:{video:this.mVideoId,playlist:this.mPlaylistId}})}else this.mVideoId&&this.mRelatedComponent&&this.mRelatedComponent.playNextVideo()}loadPlaylistMediaAndIndex(i){this.mProgress=!0,this.mMediaService.playlistMediaItem(this.mPlaylistId).subscribe({next:e=>{this.mPlaylist=e,this.mMediaPlaylist=e.media_playlist,this.mCurrentMediaPlaylistIndex=this.mMediaPlaylist.findIndex(t=>t.media.id===this.mVideoId),this.mCurrentMediaPlaylistIndex===-1&&this.mMediaPlaylist.length>0&&(this.mCurrentMediaPlaylistIndex=0,this.mVideoId=this.mMediaPlaylist[0].media.id),this.mProgress=!1,i&&i()},error:e=>{e.error?.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}loadCategoryMediaAndIndex(i){this.mProgress=!0,this.mMediaService.categoryMediaItem(this.mCategoryId).subscribe({next:e=>{this.mCategory=e,this.mCategorylist=e.media_category,this.mCurrentCategorylistIndex=this.mCategorylist.findIndex(t=>t.media.id===this.mVideoId),this.mCurrentCategorylistIndex===-1&&this.mCategorylist.length>0&&(this.mCurrentCategorylistIndex=0,this.mVideoId=this.mCategorylist[0].media.id),this.mProgress=!1,i&&i()},error:e=>{e.error?.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||n)(h(be),h(X),h(V),h(F),h(ct),h(k),h(te))};static \u0275cmp=M({type:n,selectors:[["app-watch"]],viewQuery:function(e,t){if(e&1&&Ne(Eo,5),e&2){let l;De(l=je())&&(t.mRelatedComponent=l.first)}},standalone:!1,decls:105,vars:34,consts:[["mRelatedComponent",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-9","order-md-1"],[1,"col-md-12"],[3,"data","mVideoEnded",4,"ngIf"],[1,"fw-bold1","card-title1"],[1,"col-6"],[1,"d-flex","justify-content-end"],[1,"mx-2","btn",3,"click"],[3,"ngClass"],[1,"bi","me-2",3,"ngClass"],["data-bs-toggle","modal","data-bs-target","#modal",1,"mx-2","btn"],[1,"bi","bi-bookmark-fill","me-2"],["data-bs-toggle","modal","data-bs-target","#myModal",1,"mx-2","btn"],[1,"bi","bi-share-fill","me-2"],[1,"text-decoration-none","text-reset1","d-flex","align-items-center",3,"routerLink"],[1,"rounded-circle","bg-primary","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"ms-2"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted","mt-0"],[1,"py-2"],[1,"justify-text",2,"word-break","break-word","white-space","normal",3,"innerHTML"],["for","categories",1,"text-muted","me-2"],["class","text-decoration-none",3,"routerLink","queryParams",4,"ngFor","ngForOf"],["for","tags",1,"text-muted","me-2"],["href","#",1,"text-decoration-none",3,"click"],[3,"data",4,"ngIf"],[1,"col-md-3","order-md-2"],["class","accordion mb-3","id","accordionPanelsStayOpenExample",4,"ngIf"],["id","myModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-flex","justify-content-center","gap-3"],["target","_blank",1,"btn","btn-outline-primary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-facebook","fs-4"],["target","_blank",1,"btn","btn-outline-info","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-twitter","fs-4"],["target","_blank",1,"btn","btn-outline-secondary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-linkedin","fs-4"],[1,"bi","bi-whatsapp","fs-4"],[1,"modal-footer"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text","text-primary",3,"click"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],["class","mb-3",4,"ngIf"],[1,"modal-footer","d-block"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"mVideoEnded","data"],[1,"text-decoration-none",3,"routerLink","queryParams"],[3,"data"],["id","accordionPanelsStayOpenExample",1,"accordion","mb-3"],[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","data-bs-target","#panelsStayOpen-collapseOne","aria-expanded","true","aria-controls","panelsStayOpen-collapseOne",1,"accordion-button"],["id","panelsStayOpen-collapseOne",1,"accordion-collapse","collapse","show"],[1,"accordion-body"],[1,"list-group","list-group-numbered"],["class","list-group-item border-0 d-flex justify-content-between align-items-start text-decoration-none text-reset","queryParamsHandling","merge",3,"ngClass","routerLink","queryParams",4,"ngFor","ngForOf"],["queryParamsHandling","merge",1,"list-group-item","border-0","d-flex","justify-content-between","align-items-start","text-decoration-none","text-reset",3,"ngClass","routerLink","queryParams"],[1,"ms-2","me-auto","flex-grow-1"],[1,"accordion-body","p-0"],[1,"text-wrap",2,"word-break","break-word","white-space","normal"],[1,"mb-3"],["class","form-check",4,"ngFor","ngForOf"],[1,"form-check"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"me-1"],[3,"ngSubmit","formGroup"],["for","name",1,"form-label","required"],["formControlName","name",1,"form-control","form-control-sm",3,"ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","type_id",1,"form-label","required"],["formControlName","type_id",1,"form-select",3,"ngClass"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback d-block1","role","alert",4,"ngIf"],["for","description",1,"form-label","required1"],["formControlName","description",1,"form-control","form-control-sm",3,"ngClass"],[1,"text-end"],["type","button",1,"btn","btn-light","btn-sm","me-1",3,"click"],["type","submit",1,"btn","btn-primary","btn-sm",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[3,"value"],["role","alert",1,"invalid-feedback","d-block1"],[3,"click"],[1,"bi","bi-plus-lg","me-2"]],template:function(e,t){e&1&&(c(0,Fo,1,0,"app-progress",1),o(1,"section")(2,"div",2),p(3,"div",3),r(),o(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",5)(11,"div",9)(12,"div",5)(13,"div",10),c(14,ko,1,1,"app-hls-player",11),r(),o(15,"div",10)(16,"h6",12),s(17),r()(),o(18,"div",13),s(19),r(),o(20,"div",13)(21,"div",14)(22,"span",15),y("click",function(){return t.toggleReact(t.item,1)}),o(23,"span",16),p(24,"i",17),s(25),r()(),o(26,"span",15),y("click",function(){return t.toggleReact(t.item,2)}),o(27,"span",16),p(28,"i",17),s(29),r()(),o(30,"span",18),p(31,"i",19),o(32,"span"),s(33,"SAVE"),r()(),o(34,"span",20),p(35,"i",21),o(36,"span"),s(37,"SHARE"),r()()()(),o(38,"div",10),p(39,"hr"),r(),o(40,"div",10)(41,"a",22)(42,"div",23),s(43),r(),o(44,"div",24)(45,"h6",25),s(46),r(),o(47,"div",26),s(48),r()()()(),o(49,"div",10)(50,"div",27),p(51,"p",28),o(52,"div")(53,"label",29),s(54,"Categories:"),r(),c(55,Oo,3,7,"a",30),r(),o(56,"div")(57,"label",31),s(58,"Tags:"),r(),o(59,"a",32),y("click",function(m){return m.preventDefault()}),s(60),r()()()(),o(61,"div",10),p(62,"hr"),r(),o(63,"div",10),c(64,Lo,1,1,"app-comments",33),r()()(),o(65,"div",34),c(66,Vo,9,3,"div",35)(67,Ro,9,3,"div",35),o(68,"div"),c(69,No,2,1,"app-related",33),r()()()()()()()()()(),o(70,"section")(71,"div",36)(72,"div",37)(73,"div",38)(74,"div",39)(75,"h5",40),s(76,"Share media"),r(),p(77,"button",41),r(),o(78,"div",42)(79,"div",43)(80,"a",44),p(81,"i",45),r(),o(82,"a",46),p(83,"i",47),r(),o(84,"a",48),p(85,"i",49),r(),o(86,"a",44),p(87,"i",50),r()()(),o(88,"div",51)(89,"div",52)(90,"input",53),B("ngModelChange",function(m){return H(t.mCurrentUrl,m)||(t.mCurrentUrl=m),m}),r(),o(91,"div",54),y("click",function(){return t.copyUrl()}),s(92,"COPY"),r()()()()()(),o(93,"div",55)(94,"div",37)(95,"div",38)(96,"div",39)(97,"h5",40),s(98,"Save to..."),r(),p(99,"button",41),r(),o(100,"div",42),c(101,jo,2,1,"div",56),r(),o(102,"div",57),c(103,Qo,26,15,"form",58)(104,Jo,4,0,"div",1),r()()()()()),e&2&&(d("ngIf",t.mProgress),a(14),d("ngIf",t.item),a(3),g(t.item.title),a(2),C(" ",t.item.total_views," "),a(4),d("ngClass",x(30,wo,t.mItem.is_liked)),a(),d("ngClass",t.mItem.is_liked?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"),a(),C("",t.mItem.likes_count," "),a(2),d("ngClass",x(32,To,t.mItem.is_disliked)),a(),d("ngClass",t.mItem.is_disliked?"bi-hand-thumbs-down-fill":"bi-hand-thumbs-down"),a(),C("",t.mItem.dislikes_count," "),a(12),$("routerLink","/users/show/",t.item.user==null?null:t.item.user.id,""),a(2),C(" ",t.mAppContextService.getInitials(t.item.user==null?null:t.item.user.name)," "),a(3),g(t.item.user==null?null:t.item.user.name),a(2),C("Published ",t.item.readable_date,""),a(3),d("innerHTML",t.item.description,re),a(4),d("ngForOf",t.item.media_categories),a(5),g(t.item.tags),a(4),d("ngIf",t.item),a(2),d("ngIf",t.mMediaPlaylist&&t.mPlaylist),a(),d("ngIf",t.mCategorylist&&t.mCategory),a(2),d("ngIf",t.item),a(11),d("href","https://www.facebook.com/sharer/sharer.php?u="+t.mCurrentUrl,Z),a(2),d("href","https://twitter.com/intent/tweet?url="+t.mCurrentUrl,Z),a(2),d("href","https://www.linkedin.com/shareArticle?url="+t.mCurrentUrl,Z),a(2),d("href","https://wa.me/?text="+t.mCurrentUrl,Z),a(4),j("ngModel",t.mCurrentUrl),a(11),d("ngIf",t.mMyPlaylists&&t.mMyPlaylists.length>0),a(2),d("ngIf",t.mCreateIndex===1),a(),d("ngIf",t.mCreateIndex===0))},dependencies:[P,L,O,A,G,xe,Se,ee,Ce,W,z,at,Q,J,q,$e,lt,Ge,Qe],encapsulation:2})};var Yo=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:gt,data:{title:"Index"}},{path:"create",component:vt,data:{title:"Create"}},{path:"edit/:id",component:ht,data:{title:"Edit"}},{path:"show/:id",component:yt,data:{title:"Show"}},{path:"watch",component:Et,data:{title:"Watch"}},{path:"liked",component:bt,data:{title:"Liked"}},{path:"history",component:Ct,data:{title:"History"}},{path:"about",component:Ee,data:{title:"Read"}},{path:"my-media",component:Ee,data:{title:"Read"}},{path:"my-playlist",component:Ee,data:{title:"Read"}},{path:"live-streams",component:Ee,data:{title:"Index"}},{path:"analytics",component:Ee,data:{title:"Index"}},{path:"process/:id",component:xt,data:{title:"Show"}}],wt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Re({type:n});static \u0275inj=Ve({imports:[rt,Ye.forChild(Yo),Ye]})};var Ri=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=Re({type:n});static \u0275inj=Ve({imports:[rt,Ye,vi,hi,Ii.forRoot(),wt,gi,Ci,yi]})};export{Ri as MediaModule};
