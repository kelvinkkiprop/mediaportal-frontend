import{a as Ct}from"./chunk-APJMTMHP.js";import{a as yt}from"./chunk-24UOGDB5.js";import{a as at,c as ae,d as lt,e as we,f as le,g as dt,j as ct,k as mt,m as ut,n as pt,r as ht,s as ft,t as vt}from"./chunk-FJ5YBQ2M.js";import{h as z,j as V}from"./chunk-ESNP5LCJ.js";import{a as gt,b as v,c as T,f as bt}from"./chunk-YHGBVNHR.js";import{$ as Ge,Aa as m,B as Ne,Ba as q,C as Pe,Ca as S,D as Y,E as X,Ea as Ke,F as Ae,Fa as Ye,Ga as Xe,H as ee,Ha as et,I as w,Ia as ie,J as ze,Ja as N,K as h,L as Ve,M as ye,N as Ue,Oa as Ee,Q as He,Qa as tt,R as Se,S as G,T as l,W as $e,X as b,Y as E,Ya as ne,Z as j,Za as it,_ as Be,_a as P,a as Te,aa as f,ab as re,b as Z,bb as nt,ea as d,f as fe,fa as Qe,g as Oe,ga as Je,gb as oe,h as K,i as ve,ia as xe,ja as s,jb as rt,k as Fe,ka as a,kb as ot,l as qe,la as p,m as ge,mb as A,n as F,nb as se,oa as We,ob as st,p as be,q as De,qa as M,qb as J,r as Re,ra as C,s as Le,sa as Ze,ta as te,u as Ce,v as D,va as _e,w as R,x as je,y as L,z as y,za as Q}from"./chunk-EN7VB6NI.js";import{g as W}from"./chunk-GAL4ENT6.js";var de={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},Me=new je("config",{providedIn:"root",factory:()=>({modules:de})});function U(i){i||(Ne(U),i=y(ee));let n=new Z(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(Re(n))}var Ft=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],qt=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function Dt(i,n){i&1&&p(0,"div",0)}function Rt(i,n){i&1&&p(0,"div",0)}var ce=(i,n)=>i||n||"html",Lt=()=>new Z(i=>{let n=requestAnimationFrame(()=>{i.next(),i.complete()});return()=>cancelAnimationFrame(n)}),jt=(()=>{class i{constructor(){this.config=y(Me)||{modules:de},this.quill$=qe(()=>W(this,null,function*(){if(!this.Quill){let e=document.addEventListener;document.addEventListener=document.__zone_symbol__addEventListener||document.addEventListener;let{Quill:t}=yield import("./chunk-AAUYG7N6.js");document.addEventListener=e,this.Quill=t}return this.config.customOptions?.forEach(e=>{let t=this.Quill.import(e.import);t.whitelist=e.whitelist,this.Quill.register(t,!0,this.config.suppressGlobalRegisterWarning)}),new Promise(e=>{this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning).subscribe(e)})})).pipe(De({bufferSize:1,refCount:!1})),this.registeredModules=new Set}getQuill(){return this.quill$}beforeRender(e,t,r=this.config.beforeRender){let o=[this.registerCustomModules(e,t)];return r&&o.push(r()),ge(o).pipe(ve(()=>e))}registerCustomModules(e,t,r){if(!Array.isArray(t))return fe(e);let o=[];for(let c of t){let{path:u,implementation:g}=c;this.registeredModules.has(u)||(this.registeredModules.add(u),Oe(g)?o.push(g.pipe(Le(x=>{e.register(u,x,r)}))):e.register(u,g,r))}return o.length>0?ge(o).pipe(ve(()=>e)):fe(e)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Nt=(()=>{class i{constructor(){this.format=h(void 0),this.theme=h(void 0),this.modules=h(void 0),this.debug=h(!1),this.readOnly=h(!1),this.placeholder=h(void 0),this.maxLength=h(void 0),this.minLength=h(void 0),this.required=h(!1),this.formats=h(void 0),this.customToolbarPosition=h("top"),this.sanitize=h(void 0),this.beforeRender=h(void 0),this.styles=h(null),this.registry=h(void 0),this.bounds=h(void 0),this.customOptions=h([]),this.customModules=h([]),this.trackChanges=h(void 0),this.classes=h(void 0),this.trimOnValidation=h(!1),this.linkPlaceholder=h(void 0),this.compareValues=h(!1),this.filterNull=h(!1),this.debounceTime=h(void 0),this.defaultEmptyValue=h(null),this.onEditorCreated=new w,this.onEditorChanged=new w,this.onContentChanged=new w,this.onSelectionChanged=new w,this.onFocus=new w,this.onBlur=new w,this.onNativeFocus=new w,this.onNativeBlur=new w,this.disabled=!1,this.toolbarPosition=ye("top"),this.eventsSubscription=null,this.quillSubscription=null,this.elementRef=y(Ve),this.cd=y(tt),this.domSanitizer=y(rt),this.platformId=y(Ue),this.renderer=y($e),this.zone=y(ze),this.service=y(jt),this.destroyRef=y(ee),this.valueGetter=h(e=>{let t=e.getSemanticHTML();this.isEmptyValue(t)&&(t=this.defaultEmptyValue());let r=t,o=ce(this.format(),this.service.config.format);if(o==="text")r=e.getText();else if(o==="object")r=e.getContents();else if(o==="json")try{r=JSON.stringify(e.getContents())}catch{r=e.getText()}return r}),this.valueSetter=h((e,t)=>{let r=ce(this.format(),this.service.config.format);if(r==="html")return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(He.HTML,t)),e.clipboard.convert({html:t});if(r==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t}),this.selectionChangeHandler=(e,t,r)=>{let o=this.trackChanges()||this.service.config.trackChanges,c=!e&&!!this.onModelTouched&&(r==="user"||o&&o==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!c||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:r}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:r}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:r}),c&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,r)=>{let o=this.quillEditor.getText(),c=this.quillEditor.getContents(),u=this.quillEditor.getSemanticHTML();this.isEmptyValue(u)&&(u=this.defaultEmptyValue());let g=this.trackChanges()||this.service.config.trackChanges,x=(r==="user"||g&&g==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!x||this.zone.run(()=>{if(x){let I=this.valueGetter();this.onModelChange(I(this.quillEditor))}this.onContentChanged.emit({content:c,delta:e,editor:this.quillEditor,html:u,oldDelta:t,source:r,text:o}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,r,o)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let c=this.quillEditor.getText(),u=this.quillEditor.getContents(),g=this.quillEditor.getSemanticHTML();this.isEmptyValue(g)&&(g=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:u,delta:t,editor:this.quillEditor,event:e,html:g,oldDelta:r,source:o,text:c}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:r,range:t,source:o}),this.cd.markForCheck()})},this.destroyRef.onDestroy(()=>{this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null})}static normalizeClassNames(e){return e.trim().split(" ").reduce((r,o)=>{let c=o.trim();return c&&r.push(c),r},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){nt(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(Fe(e=>this.service.beforeRender(e,this.customModules(),this.beforeRender()))).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),r=Object.assign({},this.modules()||this.service.config.modules);t?r.toolbar=t:r.toolbar===void 0&&(r.toolbar=de.toolbar);let o=this.placeholder()!==void 0?this.placeholder():this.service.config.placeholder;o===void 0&&(o="Insert text here ...");let c=this.styles();c&&Object.keys(c).forEach(_=>{this.renderer.setStyle(this.editorElem,_,c[_])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(_=>{let k=e.import(_.import);k.whitelist=_.whitelist,e.register(k,!0)});let u=this.bounds()&&this.bounds()==="self"?this.editorElem:this.bounds();u||(u=this.service.config.bounds?this.service.config.bounds:document.body);let g=this.debug();!g&&g!==!1&&this.service.config.debug&&(g=this.service.config.debug);let x=this.readOnly();!x&&this.readOnly()!==!1&&(x=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let I=this.formats();if(!I&&I===void 0&&(I=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:u,debug:g,formats:I,modules:r,placeholder:o,readOnly:x,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed){F(this.quillEditor.scroll.domNode,"blur").pipe(U(this.destroyRef)).subscribe(()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"}));let _=this.quillEditor.getModule("toolbar");_.container&&F(_.container,"mousedown").pipe(U(this.destroyRef)).subscribe(k=>k.preventDefault())}if(this.onNativeFocus.observed&&F(this.quillEditor.scroll.domNode,"focus").pipe(U(this.destroyRef)).subscribe(()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){let k=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");k?.dataset&&(k.dataset.link=this.linkPlaceholder())}}),this.content){if(ce(this.format(),this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let Ot=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(Ot,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&Lt().pipe(U(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.styles){let t=e.styles.currentValue,r=e.styles.previousValue;r&&Object.keys(r).forEach(o=>{this.renderer.removeStyle(this.editorElem,o)}),t&&Object.keys(t).forEach(o=>{this.renderer.setStyle(this.editorElem,o,this.styles()[o])})}if(e.classes){let t=e.classes.currentValue,r=e.classes.previousValue;r&&this.removeClasses(r),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull()&&e===null||(this.content=e,!this.quillEditor))return;let t=ce(this.format(),this.service.config.format),o=this.valueSetter()(this.quillEditor,e);if(this.compareValues()){let c=this.quillEditor.getContents();if(JSON.stringify(c)===JSON.stringify(o))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(o);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,r=this.quillEditor.getText(),o=this.trimOnValidation()?r.trim().length:r.length===1&&r.trim().length===0?0:r.length-1,c=this.quillEditor.getContents().ops,u=!!c&&c.length===1&&[`
`,""].includes(c[0].insert?.toString());return this.minLength()&&o&&o<this.minLength()&&(e.minLengthError={given:o,minLength:this.minLength()},t=!1),this.maxLength()&&o>this.maxLength()&&(e.maxLengthError={given:o,maxLength:this.maxLength()},t=!1),this.required()&&!o&&u&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.eventsSubscription=new Te,this.eventsSubscription.add(F(this.quillEditor,"selection-change").subscribe(([r,o,c])=>{this.selectionChangeHandler(r,o,c)}));let e=F(this.quillEditor,"text-change"),t=F(this.quillEditor,"editor-change");typeof this.debounceTime()=="number"&&(e=e.pipe(be(this.debounceTime())),t=t.pipe(be(this.debounceTime()))),this.eventsSubscription.add(e.subscribe(([r,o,c])=>{this.textChangeHandler(r,o,c)})),this.eventsSubscription.add(t.subscribe(([r,o,c,u])=>{this.editorChangeHandler(r,o,c,u)}))})}dispose(){this.eventsSubscription?.unsubscribe(),this.eventsSubscription=null}isEmptyValue(e){return e==="<p></p>"||e==="<div></div>"||e==="<p><br></p>"||e==="<div><br></div>"}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=Be({type:i,inputs:{format:[1,"format"],theme:[1,"theme"],modules:[1,"modules"],debug:[1,"debug"],readOnly:[1,"readOnly"],placeholder:[1,"placeholder"],maxLength:[1,"maxLength"],minLength:[1,"minLength"],required:[1,"required"],formats:[1,"formats"],customToolbarPosition:[1,"customToolbarPosition"],sanitize:[1,"sanitize"],beforeRender:[1,"beforeRender"],styles:[1,"styles"],registry:[1,"registry"],bounds:[1,"bounds"],customOptions:[1,"customOptions"],customModules:[1,"customModules"],trackChanges:[1,"trackChanges"],classes:[1,"classes"],trimOnValidation:[1,"trimOnValidation"],linkPlaceholder:[1,"linkPlaceholder"],compareValues:[1,"compareValues"],filterNull:[1,"filterNull"],debounceTime:[1,"debounceTime"],defaultEmptyValue:[1,"defaultEmptyValue"],valueGetter:[1,"valueGetter"],valueSetter:[1,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[Pe]})}}return i})(),St=(()=>{class i extends Nt{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Ae(i)))(r||i)}})()}static{this.\u0275cmp=E({type:i,selectors:[["quill-editor"]],features:[et([{multi:!0,provide:at,useExisting:Ce(()=>i)},{multi:!0,provide:lt,useExisting:Ce(()=>i)}]),Ge],ngContentSelectors:qt,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,r){t&1&&(Ze(Ft),f(0,Dt,1,0,"div",0),te(1),te(2,1),te(3,2),f(4,Rt,1,0,"div",0)),t&2&&(xe(r.toolbarPosition()!=="top"?0:-1),l(4),xe(r.toolbarPosition()==="top"?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}}return i})();var xt=(()=>{class i{static forRoot(e){return{ngModule:i,providers:[{provide:Me,useValue:e}]}}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275mod=j({type:i})}static{this.\u0275inj=R({})}}return i})();var me=class i{constructor(n,e){this.mAppContextService=n;this.http=e}createItem(n){let e=`${v.base_url}/upload`;return this.http.post(e,n)}initUpload(n,e){let t=`${v.base_url}/upload/init`;return this.http.post(t,{filename:n,title:e})}uploadChunk(n,e,t){let r=new FormData;r.append("uploadId",n),r.append("chunkIndex",e.toString()),r.append("file",t,`chunk_${e}`);let o=`${v.base_url}/upload/chunk`;return this.http.post(o,r,{reportProgress:!0,observe:"events"})}completeUpload(n,e,t,r){let o=`${v.base_url}/upload/complete`;return this.http.post(o,{uploadId:n,totalChunks:e,title:t,description:r})}static \u0275fac=function(e){return new(e||i)(L(T),L(oe))};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})};var _t=i=>({"is-invalid":i}),Ut=()=>({height:"150px"});function Ht(i,n){i&1&&p(0,"app-progress")}function $t(i,n){i&1&&(s(0,"p"),m(1,"Drag & drop a video here, or click to select"),a())}function Bt(i,n){if(i&1&&(s(0,"p"),m(1),a()),i&2){let e=C();l(),S("Selected: ",e.selectedFile.name,"")}}function Gt(i,n){i&1&&(s(0,"div"),m(1,"This field is required."),a())}function Qt(i,n){if(i&1&&(s(0,"div",33),f(1,Gt,2,0,"div",1),a()),i&2){let e,t=C();l(),d("ngIf",(e=t.itemForm.get("title"))==null||e.errors==null?null:e.errors.required)}}function Jt(i,n){i&1&&(s(0,"div"),m(1,"This field is required."),a())}function Wt(i,n){if(i&1&&(s(0,"div",33),f(1,Jt,2,0,"div",1),a()),i&2){let e,t=C();l(),d("ngIf",(e=t.itemForm.get("description"))==null||e.errors==null?null:e.errors.required)}}function Zt(i,n){if(i&1&&(s(0,"div")(1,"div",34)(2,"div",35),m(3),a()()()),i&2){let e=C();l(2),Qe("width",e.progress,"%"),l(),S("",e.progress,"%")}}function Kt(i,n){i&1&&(s(0,"a",36),m(1,"Run in Background"),a())}var ue=class i{constructor(n,e,t,r){this.mToastrService=n;this.mUploadService=e;this.fb=t;this.router=r;this.itemForm=this.fb.group({title:["",we.required],description:["",we.required]})}selectedFile=null;progress=0;isDragging=!1;itemForm;mProgress=!1;onSubmit(n){this.mProgress=!0,this.upload(n.title,n.description)}onDragOver(n){n.preventDefault(),this.isDragging=!0}onDragLeave(n){n.preventDefault(),this.isDragging=!1}onDrop(n){n.preventDefault(),this.isDragging=!1,n.dataTransfer?.files.length&&(this.selectedFile=n.dataTransfer.files[0])}onFileSelected(n){this.selectedFile=n.target.files[0]}upload(n,e){return W(this,null,function*(){if(!this.selectedFile||this.itemForm.invalid){this.mToastrService.warning("Please fill out all fields and select a file.");return}let t=5*1024*1024,r=Math.ceil(this.selectedFile.size/t),c=(yield K(this.mUploadService.initUpload(this.selectedFile.name,n))).uploadId;for(let u=0;u<r;u++){let g=u*t,x=Math.min(g+t,this.selectedFile.size),I=this.selectedFile.slice(g,x);yield K(this.mUploadService.uploadChunk(c,u,I).pipe()),this.mProgress=!1,this.progress=Math.round((u+1)/r*100)}yield K(this.mUploadService.completeUpload(c,r,n,e)),this.mToastrService.success("Media uploaded complete!"),this.router.navigateByUrl("/media")})}static \u0275fac=function(e){return new(e||i)(b(z),b(me),b(ht),b(A))};static \u0275cmp=E({type:i,selectors:[["app-create"]],hostBindings:function(e,t){e&1&&M("dragover",function(o){return t.onDragOver(o)})("dragleave",function(o){return t.onDragLeave(o)})("drop",function(o){return t.onDrop(o)})},standalone:!1,decls:54,vars:20,consts:[["fileInput",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"row"],[1,"col-sm-6"],[1,"mb-0"],[1,"breadcrumb","float-sm-end"],[1,"breadcrumb-item"],["href","#"],["aria-current","page",1,"breadcrumb-item"],["aria-current","page",1,"breadcrumb-item","active"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-tools"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"row","mb-3"],[1,"col-md-12"],[1,"mb-3"],[1,"dropzone"],["type","file","hidden","","accept","video/*",3,"change"],["type","button",1,"btn","btn-light","btn-sm",3,"click"],["for","title",1,"form-label","required"],["type","text","formControlName","title",1,"form-control",3,"ngModel","ngClass"],["class","invalid-feedback d-block","role","alert",4,"ngIf"],["for","description",1,"form-label","required"],["formControlName","description",1,"w-100",3,"styles","ngClass"],[1,"text-end"],["routerLink","/my-media","class","btn btn-danger me-1",4,"ngIf"],["type","submit",1,"btn","btn-success",3,"disabled"],["role","alert",1,"invalid-feedback","d-block"],[1,"progress"],["role","progressbar","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-danger","progress-bar-striped","progress-bar-animated"],["routerLink","/my-media",1,"btn","btn-danger","me-1"]],template:function(e,t){if(e&1){let r=We();f(0,Ht,1,0,"app-progress",1),s(1,"section")(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h3",6),m(7,"Media"),a()(),s(8,"div",5)(9,"ol",7)(10,"li",8)(11,"a",9),m(12,"Home"),a()(),s(13,"li",10),m(14,"Media"),a(),s(15,"li",11),m(16,"Create"),a()()()()(),s(17,"div",4)(18,"div",12)(19,"div",13)(20,"div",14)(21,"div",15),m(22," Create Media "),a(),p(23,"div",16),a(),s(24,"div",17)(25,"form",18),M("ngSubmit",function(){return Y(r),X(t.onSubmit(t.itemForm.value))}),s(26,"div",19)(27,"div",20)(28,"div",21)(29,"div",22),f(30,$t,2,0,"p",1)(31,Bt,2,1,"p",1),s(32,"input",23,0),M("change",function(c){return Y(r),X(t.onFileSelected(c))}),a(),s(34,"button",24),M("click",function(){Y(r);let c=Q(33);return X(c.click())}),m(35,"Choose File"),a()()()(),s(36,"div",20)(37,"div",21)(38,"label",25),m(39,"Title:"),a(),p(40,"input",26),f(41,Qt,2,1,"div",27),a()()(),s(42,"div",20)(43,"div",21)(44,"label",28),m(45,"Description:"),a(),p(46,"quill-editor",29),f(47,Wt,2,1,"div",27),a()(),s(48,"div",21),f(49,Zt,4,3,"div",1),a(),s(50,"div",30),f(51,Kt,2,0,"a",31),s(52,"button",32),m(53,"Submit"),a()()()()()()()()()}if(e&2){let r,o,c,u;d("ngIf",t.mProgress),l(25),d("formGroup",t.itemForm),l(4),Je("dragging",t.isDragging),l(),d("ngIf",!t.selectedFile),l(),d("ngIf",t.selectedFile),l(9),d("ngModel",t.selectedFile==null?null:t.selectedFile.name)("ngClass",N(15,_t,((r=t.itemForm.get("title"))==null?null:r.invalid)&&(((r=t.itemForm.get("title"))==null?null:r.dirty)||((r=t.itemForm.get("title"))==null?null:r.touched)))),l(),d("ngIf",((o=t.itemForm.get("title"))==null?null:o.invalid)&&(((o=t.itemForm.get("title"))==null?null:o.dirty)||((o=t.itemForm.get("title"))==null?null:o.touched))),l(5),d("styles",ie(17,Ut))("ngClass",N(18,_t,((c=t.itemForm.get("description"))==null?null:c.invalid)&&(((c=t.itemForm.get("description"))==null?null:c.dirty)||((c=t.itemForm.get("description"))==null?null:c.touched)))),l(),d("ngIf",((u=t.itemForm.get("description"))==null?null:u.invalid)&&(((u=t.itemForm.get("description"))==null?null:u.dirty)||((u=t.itemForm.get("description"))==null?null:u.touched))),l(2),d("ngIf",t.progress>0),l(2),d("ngIf",t.progress>0),l(),d("disabled",!t.selectedFile||t.itemForm.invalid)}},dependencies:[ne,P,se,mt,ae,le,dt,ut,pt,St,V],styles:[".dropzone[_ngcontent-%COMP%]{border:2px dashed #bbb;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:.2s}.dropzone.dragging[_ngcontent-%COMP%]{background-color:#eef6ff;border-color:#3b82f6}"]})};var H=class i{constructor(n,e){this.mAppContextService=n;this.http=e}allItems(){let n=`${v.base_url}/media`;return this.http.get(n,this.mAppContextService.getHttpOptions())}createItem(n){let e=`${v.base_url}/media`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}getOneItem(n){let e=`${v.base_url}/media/${n}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}updateItem(n){let e=`${v.base_url}/media/${n.id}`;return this.http.put(e,n,this.mAppContextService.getHttpOptions())}deleteItem(n){let e=`${v.base_url}/media/${n.id}`;return this.http.delete(e,this.mAppContextService.getHttpOptions())}paginateItems(n){return this.http.get(n,this.mAppContextService.getHttpOptions())}unpaginatedItems(){let n=`${v.base_url}/unpaginated-items-media`;return this.http.get(n,this.mAppContextService.getHttpOptions())}searchItems(n){let e=`${v.base_url}/search-media`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}myMedia(n){let e=`${v.base_url}/my-media/${n}`;return this.http.get(e,this.mAppContextService.getHttpOptions())}reactItem(n){let e=`${v.base_url}/media/${n.id}/react`;return this.http.post(e,n,this.mAppContextService.getHttpOptions())}upload(n){let e=`${v.base_url}/upload`;return this.http.post(e,n)}initUpload(n,e){let t=`${v.base_url}/upload/init`;return this.http.post(t,{filename:n,title:e})}uploadChunk(n,e,t){let r=new FormData;r.append("uploadId",n),r.append("chunkIndex",e.toString()),r.append("file",t,`chunk_${e}`);let o=`${v.base_url}/upload/chunk`;return this.http.post(o,r,{reportProgress:!0,observe:"events"})}completeUpload(n,e,t,r){let o=`${v.base_url}/upload/complete`;return this.http.post(o,{uploadId:n,totalChunks:e,title:t,description:r})}static \u0275fac=function(e){return new(e||i)(L(T),L(oe))};static \u0275prov=D({token:i,factory:i.\u0275fac,providedIn:"root"})};var Yt=()=>({exact:!0});function Xt(i,n){i&1&&p(0,"app-progress")}function ei(i,n){if(i&1&&(s(0,"div",25)(1,"div",26)(2,"label",27),m(3,"Biography:"),a(),s(4,"div",13),m(5),a()()()),i&2){let e=C();l(5),q(e.mCurrentUser.bio)}}function ti(i,n){if(i&1&&(s(0,"div"),p(1,"app-media-card",33),a()),i&2){let e=C().$implicit;l(),d("data",e)}}function ii(i,n){if(i&1&&(s(0,"div",32),f(1,ti,2,1,"div",1),a()),i&2){let e=n.$implicit;l(),d("ngIf",e)}}function ni(i,n){if(i&1&&(s(0,"div",30),f(1,ii,2,1,"div",31),a()),i&2){let e=C(2);l(),d("ngForOf",e.myMedia)}}function ri(i,n){i&1&&(s(0,"p",34),m(1,"No items"),a())}function oi(i,n){if(i&1&&(s(0,"div",25)(1,"div",26)(2,"label",28),m(3,"Uploads:"),a(),f(4,ni,2,1,"div",29)(5,ri,2,0,"ng-template",null,0,Ee),a()()),i&2){let e=Q(6),t=C();l(4),d("ngIf",t.myMedia&&t.myMedia.length>0)("ngIfElse",e)}}function si(i,n){if(i&1&&(s(0,"a",36),p(1,"app-media-card",33),a()),i&2){let e=C().$implicit;_e("routerLink","/media/",e.id,"/show"),l(),d("data",e)}}function ai(i,n){if(i&1&&(s(0,"div",32),f(1,si,2,3,"a",35),a()),i&2){let e=n.$implicit;l(),d("ngIf",e)}}function li(i,n){if(i&1&&(s(0,"div",30),f(1,ai,2,1,"div",31),a()),i&2){let e=C(2);l(),d("ngForOf",e.myPlaylists)}}function di(i,n){i&1&&(s(0,"p",34),m(1,"No items"),a())}function ci(i,n){if(i&1&&(s(0,"div",25)(1,"div",26)(2,"label",27),m(3,"Playlists:"),a(),f(4,li,2,1,"div",29)(5,di,2,0,"ng-template",null,0,Ee),a()()),i&2){let e=Q(6),t=C();l(4),d("ngIf",t.myPlaylists&&t.myPlaylists.length>0)("ngIfElse",e)}}var $=class i{constructor(n,e,t,r,o){this.mAuthService=n;this.mAppContextService=e;this.mMediaService=t;this.mToastrService=r;this.router=o}mCurrentUser;mInitials;itemForm;mProgress=!1;myMedia;myPlaylists;ngOnInit(){this.mCurrentUser=this.mAuthService.currentUser,this.mInitials=this.mCurrentUser.name.match(/(\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase(),this.index(this.mCurrentUser.id)}index(n){this.mProgress=!0,this.mMediaService.myMedia(n).subscribe({next:e=>{e&&(this.myMedia=e.data.my_media,this.myPlaylists=e.data.my_playlists,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}static \u0275fac=function(e){return new(e||i)(b(Ct),b(T),b(H),b(z),b(A))};static \u0275cmp=E({type:i,selectors:[["app-edit"]],standalone:!1,decls:38,vars:11,consts:[["noItemsTemplate",""],[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"d-flex","align-items-center","mb-3"],[1,"user-image","rounded-circle","bg-success","text-white","fw-bold","d-inline-flex","justify-content-center","align-items-center","me-3",2,"width","64px","height","64px","font-size","1rem"],[1,"mb-0","fw-semibold"],[1,"text-muted"],["id","myTab","role","tablist",1,"nav","nav-tabs","border-0","text-uppercase"],["role","presentation",1,"nav-item"],["routerLink","/media/about","routerLinkActive","active","id","home-tab","data-bs-toggle","tab","data-bs-target","#home","type","button","role","tab","aria-controls","home",1,"nav-link","border-0","text-uppercase","text-sm",3,"routerLinkActiveOptions"],["routerLink","/media/index","routerLinkActive","active","id","media-tab","data-bs-toggle","tab","data-bs-target","#media","type","button","role","tab","aria-controls","media",1,"nav-link","border-0","text-uppercase","text-sm"],["routerLink","/media/my-playlist","routerLinkActive","active","id","playlist-tab","data-bs-toggle","tab","data-bs-target","#playlist","type","button","role","tab","aria-controls","playlist",1,"nav-link","border-0","text-uppercase","text-sm"],[1,"card-tools"],[1,"btn","btn-danger","btn-sm",3,"routerLink"],[1,"bi","bi-pencil-fill"],[1,"card-body","p-0","m-0"],["id","myTabContent",1,"tab-content","container","py-3"],["class","tab-pane fade show active",4,"ngIf"],[1,"tab-pane","fade","show","active"],[1,"mb-3","container"],["for","bio",1,"form-label"],["for","uploads",1,"form-label"],["class","row row-cols-1 row-cols-md-3 g-4",4,"ngIf","ngIfElse"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[3,"data"],[1,"p-5","text-center","text-muted"],["class","text-decoration-none text-reset",3,"routerLink",4,"ngIf"],[1,"text-decoration-none","text-reset",3,"routerLink"]],template:function(e,t){e&1&&(f(0,Xt,1,0,"app-progress",1),s(1,"section")(2,"div",2),p(3,"div",3),a(),s(4,"div",4)(5,"div",3)(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"span",11),m(13),a(),s(14,"div")(15,"p",12),m(16),a(),s(17,"small",13),m(18),a()()(),s(19,"ul",14)(20,"li",15)(21,"button",16),m(22," About "),a()(),s(23,"li",15)(24,"button",17),m(25," Media "),a()(),s(26,"li",15)(27,"button",18),m(28," Playlist "),a()()()(),s(29,"div",19)(30,"a",20),p(31,"i",21),m(32," Edit Profile "),a()()(),s(33,"div",22)(34,"div",23),f(35,ei,6,1,"div",24)(36,oi,7,2,"div",24)(37,ci,7,2,"div",24),a()()()()()()()()),e&2&&(d("ngIf",t.mProgress),l(13),S(" ",t.mAppContextService.getInitials(t.mCurrentUser.name)," "),l(3),q(t.mCurrentUser.name),l(2),q(t.mCurrentUser.role==null?null:t.mCurrentUser.role.name),l(3),d("routerLinkActiveOptions",ie(10,Yt)),l(9),_e("routerLink","/profile/edit/",t.mCurrentUser.id,""),l(5),d("ngIf",t.router.url==="/media/about"),l(),d("ngIf",t.router.url==="/media/index"),l(),d("ngIf",t.router.url==="/media/my-playlist"))},dependencies:[it,P,se,st,V,yt],encapsulation:2})};var B=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=E({type:i,selectors:[["app-index"]],standalone:!1,decls:1,vars:0,template:function(e,t){e&1&&p(0,"app-edit")},dependencies:[$],encapsulation:2})};var ui=i=>({"text-success":i}),pi=i=>({"text-danger":i});function hi(i,n){i&1&&p(0,"app-progress")}function fi(i,n){if(i&1&&p(0,"app-hls-player",47),i&2){let e=C();d("data",e.item)}}var pe=class i{constructor(n,e,t,r,o){this.route=n;this.mMediaService=e;this.mToastrService=t;this.mContext=r;this.router=o}mProgress=!1;id;item={};mCurrentUrl="";mShowOptions=!1;ngOnInit(){this.route.paramMap.subscribe(n=>{let e=n.get("id");e&&(this.index(e),this.id=n.get("id"))}),this.mCurrentUrl=window.location.origin+this.router.url}index(n){this.mProgress=!0,this.mMediaService.getOneItem(n).subscribe({next:e=>{e&&(this.item=e,this.mProgress=!1)},error:e=>{e.error.message&&this.mToastrService.error(e.error.message),this.mProgress=!1}})}toggleReact(n,e){let t={id:n.id,type_id:e};this.mProgress=!0,this.mMediaService.reactItem(t).subscribe({next:r=>{r&&(r.status==="success"&&(this.index(this.id),e==1?this.mToastrService.success(r.message):this.mToastrService.error(r.message),this.mProgress=!1),this.mProgress=!1)},error:r=>{r.error.message&&this.mToastrService.error(r.error.message),this.mProgress=!1}})}toggleShare(){this.mShowOptions=!this.mShowOptions}copyUrl(){navigator.clipboard.writeText(this.mCurrentUrl).then(()=>{this.mToastrService.success("Link copied to clipboard!")})}static \u0275fac=function(e){return new(e||i)(b(ot),b(H),b(z),b(T),b(A))};static \u0275cmp=E({type:i,selectors:[["app-show"]],standalone:!1,decls:70,vars:23,consts:[[4,"ngIf"],[1,"app-content-header"],[1,"container-fluid"],[1,"app-content"],[1,"row"],[1,"col-lg-12","col-12"],[1,"card1"],[1,"card-body","p-0","m-0"],[1,"col-md-9"],[3,"data",4,"ngIf"],[1,"col-md-12"],[1,"fw-bold1","card-title1"],[1,"col-6"],[1,"d-flex","justify-content-end"],[3,"click"],[3,"ngClass"],[1,"bi","me-2",3,"ngClass"],[1,"mx-4",3,"click"],["data-bs-toggle","modal","data-bs-target","#modal"],[1,"bi","bi-share-fill","me-2"],["id","modal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","staticBackdropLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"d-flex","justify-content-center","gap-3"],["target","_blank",1,"btn","btn-outline-primary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-facebook","fs-4"],["target","_blank",1,"btn","btn-outline-info","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-twitter","fs-4"],["target","_blank",1,"btn","btn-outline-secondary","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-linkedin","fs-4"],["target","_blank",1,"btn","btn-outline-success","rounded-circle","d-flex","align-items-center","justify-content-center",2,"width","48px","height","48px",3,"href"],[1,"bi","bi-whatsapp","fs-4"],[1,"modal-footer"],[1,"input-group","mb-3"],["type","text","readonly","",1,"form-control",3,"ngModelChange","ngModel"],[1,"input-group-text","text-success",3,"click"],[1,"d-flex","align-items-center"],[1,"rounded-circle","bg-success","text-white","d-flex","justify-content-center","align-items-center","fw-bold",2,"width","40px","height","40px"],[1,"ms-2"],[1,"fw-semibold1","mb-0"],[1,"text-xs","text-muted","mt-0"],[1,"py-2"],[1,"justify-text",2,"word-break","break-word","white-space","normal",3,"innerHTML"],[3,"data"]],template:function(e,t){e&1&&(f(0,hi,1,0,"app-progress",0),s(1,"section")(2,"div",1),p(3,"div",2),a(),s(4,"div",3)(5,"div",2)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",4)(11,"div",8),f(12,fi,1,1,"app-hls-player",9),s(13,"div",4)(14,"div",10)(15,"h6",11),m(16),a()(),s(17,"div",10)(18,"div",4)(19,"div",12),m(20),a(),s(21,"div",12)(22,"div",13)(23,"span",14),M("click",function(){return t.toggleReact(t.item,1)}),s(24,"span",15),p(25,"i",16),m(26),a()(),s(27,"span",17),M("click",function(){return t.toggleReact(t.item,2)}),s(28,"span",15),p(29,"i",16),m(30),a()(),s(31,"span",18),p(32,"i",19),s(33,"span"),m(34,"SHARE"),a()(),s(35,"div",20)(36,"div",21)(37,"div",22)(38,"div",23)(39,"h5",24),m(40,"Share media"),a(),p(41,"button",25),a(),s(42,"div",26)(43,"div",27)(44,"a",28),p(45,"i",29),a(),s(46,"a",30),p(47,"i",31),a(),s(48,"a",32),p(49,"i",33),a(),s(50,"a",34),p(51,"i",35),a()()(),s(52,"div",36)(53,"div",37)(54,"input",38),Xe("ngModelChange",function(o){return Ye(t.mCurrentUrl,o)||(t.mCurrentUrl=o),o}),a(),s(55,"div",39),M("click",function(){return t.copyUrl()}),m(56,"COPY"),a()()()()()()()()(),p(57,"hr"),a(),s(58,"div",10)(59,"div",40)(60,"div",41),m(61),a(),s(62,"div",42)(63,"h6",43),m(64),a(),s(65,"div",44),m(66),a()()()(),s(67,"div",10)(68,"div",45),p(69,"p",46),a()()()()()()()()()()()()),e&2&&(d("ngIf",t.mProgress),l(12),d("ngIf",t.item),l(4),q(t.item.title),l(4),S(" ",t.item.total_views," "),l(4),d("ngClass",N(19,ui,t.item.is_liked)),l(),d("ngClass",t.item.is_liked?"bi-hand-thumbs-up-fill":"bi-hand-thumbs-up"),l(),S("",t.item.likes_count," "),l(2),d("ngClass",N(21,pi,t.item.is_disliked)),l(),d("ngClass",t.item.is_disliked?"bi-hand-thumbs-down-fill":"bi-hand-thumbs-down"),l(),S("",t.item.dislikes_count," "),l(14),d("href","https://www.facebook.com/sharer/sharer.php?u="+t.mCurrentUrl,G),l(2),d("href","https://twitter.com/intent/tweet?url="+t.mCurrentUrl,G),l(2),d("href","https://www.linkedin.com/shareArticle?url="+t.mCurrentUrl,G),l(2),d("href","https://wa.me/?text="+t.mCurrentUrl,G),l(4),Ke("ngModel",t.mCurrentUrl),l(7),S(" ",t.mContext.getInitials(t.item.user==null?null:t.item.user.name)," "),l(3),q(t.item.user==null?null:t.item.user.name),l(2),S("Published ",t.item.readable_date,""),l(3),d("innerHTML",t.item.description,Se))},dependencies:[ne,P,ae,le,ct,V,gt],encapsulation:2})};var vi=[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:B,data:{title:"Index"}},{path:"create",component:ue,data:{title:"Create"}},{path:"edit/:id",component:$,data:{title:"Edit"}},{path:":id/show",component:pe,data:{title:"Show"}},{path:"about",component:B,data:{title:"Index"}},{path:"my-playlist",component:B,data:{title:"Index"}}],he=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=j({type:i});static \u0275inj=R({imports:[re,J.forChild(vi),J]})};var Tt=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=j({type:i});static \u0275inj=R({imports:[re,J,ft,vt,xt.forRoot(),he,bt]})};export{Tt as MediaModule};
